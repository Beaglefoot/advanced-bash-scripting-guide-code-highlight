<!DOCTYPE html><html><head>
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
    <title>Internal Commands and Builtins</title>
    <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
    <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
    <link rel="UP" title="Commands" href="part4.html">
    <link rel="PREVIOUS" title="Commands" href="part4.html">
    <link rel="NEXT" title="Job Control Commands" href="x9644.html">
  <link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"><script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }

      document.getElementById('theme-toggle').addEventListener(
        'click',
        () => document.body.classList.toggle('dark-mode')
      );
    });
  </script></head>
  <body class="CHAPTER" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
    <div class="NAVHEADER">
      <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
          <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
        </tr>
        <tr>
          <td width="10%" align="left" valign="bottom">
            <a href="part4.html" accesskey="P">Prev</a>
          </td>
          <td width="80%" align="center" valign="bottom"></td>
          <td width="10%" align="right" valign="bottom">
            <a href="x9644.html" accesskey="N">Next</a>
          </td>
        </tr>
      </tbody></table>
      <hr align="left" width="100%">
    </div>
    <div class="CHAPTER">
      <h1>
        <a name="INTERNAL" id="INTERNAL"></a>Chapter 15. Internal Commands and
        Builtins
      </h1>
      <p>
        <a name="BUILTINREF" id="BUILTINREF"></a>A
        <i class="FIRSTTERM">builtin</i> is a
        <b class="COMMAND">command</b> contained within the Bash tool set,
        literally <i class="FIRSTTERM">built in</i>. This is either for
        performance reasons -- builtins execute faster than external commands,
        which usually require <i class="FIRSTTERM">forking off</i>
        <a name="AEN8607" href="#FTN.AEN8607" id="AEN8607"><span class="footnote">[1]</span></a>
        a separate process -- or because a particular builtin needs direct
        access to the shell internals.
      </p>
      <p><a name="FORKREF" id="FORKREF"></a></p>
      <table class="SIDEBAR" border="1" cellpadding="5">
        <tbody><tr>
          <td>
            <div class="SIDEBAR">
              <a name="AEN8611" id="AEN8611"></a>
              <p>
                <a name="PARENTREF" id="PARENTREF"></a>When a command or the
                shell itself initiates (or <i class="FIRSTTERM">spawns</i>) a
                new subprocess to carry out a task, this is called
                <i class="FIRSTTERM">forking</i>. This new process is the
                <i class="FIRSTTERM">child</i>, and the process that
                <i class="FIRSTTERM">forked</i> it off is the
                <i class="FIRSTTERM">parent</i>. While the
                <i class="FIRSTTERM">child process</i> is doing its work, the
                <i class="FIRSTTERM">parent process</i> is still executing.
              </p>
              <p>
                Note that while a <i class="FIRSTTERM">parent process</i> gets
                the <i class="FIRSTTERM">process ID</i> of the
                <i class="FIRSTTERM">child process</i>, and can thus pass
                arguments to it, <em>the reverse is not true</em>.
                <a href="gotchas.html#PARCHILDPROBREF">This can create problems that are subtle and hard to track
                  down.</a>
              </p>
              <div class="EXAMPLE">
                <a name="SPAWNSCR" id="SPAWNSCR"></a>
                <p>
                  <b>Example 15-1. A script that spawns multiple instances of
                    itself</b>
                </p>
                <table border="0" bgcolor="#E0E0E0" width="100%">
                  <tbody><tr>
                    <td>
                      <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># spawn.sh</span>


PIDS=$(pidof sh <span class="hljs-variable">$0</span>)  <span class="hljs-comment"># Process IDs of the various instances of this script.</span>
P_array=( <span class="hljs-variable">$PIDS</span> )    <span class="hljs-comment"># Put them in an array (why?).</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$PIDS</span>           <span class="hljs-comment"># Show process IDs of parent and child processes.</span>
<span class="hljs-built_in">let</span> <span class="hljs-string">"instances = <span class="hljs-variable">${#P_array[*]}</span> - 1"</span>  <span class="hljs-comment"># Count elements, less 1.</span>
                                      <span class="hljs-comment"># Why subtract 1?</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$instances</span> instance(s) of this script running."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[Hit Ctl-C to exit.]"</span>; <span class="hljs-built_in">echo</span>


sleep 1              <span class="hljs-comment"># Wait.</span>
sh <span class="hljs-variable">$0</span>                <span class="hljs-comment"># Play it again, Sam.</span>

<span class="hljs-built_in">exit</span> 0               <span class="hljs-comment"># Not necessary; script will never get to here.</span>
                     <span class="hljs-comment"># Why not?</span>

<span class="hljs-comment">#  After exiting with a Ctl-C,</span>
<span class="hljs-comment">#+ do all the spawned instances of the script die?</span>
<span class="hljs-comment">#  If so, why?</span>

<span class="hljs-comment"># Note:</span>
<span class="hljs-comment"># ----</span>
<span class="hljs-comment"># Be careful not to run this script too long.</span>
<span class="hljs-comment"># It will eventually eat up too many system resources.</span>

<span class="hljs-comment">#  Is having a script spawn multiple instances of itself</span>
<span class="hljs-comment">#+ an advisable scripting technique.</span>
<span class="hljs-comment">#  Why or why not?</span></pre>
                    </td>
                  </tr>
                </tbody></table>
              </div>
              <p><a name="BLTINFRK" id="BLTINFRK"></a></p>
              <p>
                Generally, a Bash <i class="FIRSTTERM">builtin</i> does not fork
                a subprocess when it executes within a script. An external
                system command or filter in a script usually <em>will</em> fork
                a subprocess.
              </p>
            </div>
          </td>
        </tr>
      </tbody></table>
      <p>
        A builtin may be a synonym to a system command of the same name, but
        Bash reimplements it internally. For example, the Bash
        <b class="COMMAND">echo</b> command is not the same as
        <tt class="FILENAME">/bin/echo</tt>, although their behavior is almost
        identical.
      </p>
      <table border="0" bgcolor="#E0E0E0" width="100%">
        <tbody><tr>
          <td>
            <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"This line uses the \"echo\" builtin."</span>
/bin/<span class="hljs-built_in">echo</span> <span class="hljs-string">"This line uses the /bin/echo system command."</span></pre>
          </td>
        </tr>
      </tbody></table>
      <p>
        <a name="KEYWORDREF" id="KEYWORDREF"></a>A
        <i class="FIRSTTERM">keyword</i> is a
        <i class="FIRSTTERM">reserved</i> word, token or operator. Keywords have
        a special meaning to the shell, and indeed are the building blocks of
        the shell's syntax. As examples, <i class="FIRSTTERM">for</i>,
        <i class="FIRSTTERM">while</i>, <i class="FIRSTTERM">do</i>, and
        <i class="FIRSTTERM">!</i> are keywords. Similar to a
        <a href="internal.html#BUILTINREF">builtin</a>, a keyword is hard-coded
        into Bash, but unlike a <i class="FIRSTTERM">builtin</i>, a keyword is
        not in itself a command, but <em>a subunit of a command construct</em>.
        <a name="AEN8650" href="#FTN.AEN8650" id="AEN8650"><span class="footnote">[2]</span></a>
      </p>
      <div class="VARIABLELIST">
        <p>
          <b><a name="INTIO1" id="INTIO1"></a>I/O</b>
        </p>
        <dl>
          <dt>
            <a name="ECHOREF" id="ECHOREF"></a><b class="COMMAND">echo</b>
          </dt>
          <dd>
            <p>
              prints (to <tt class="FILENAME">stdout</tt>) an expression or
              variable (see <a href="varsubn.html#EX9">Example 4-1</a>).
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-built_in">echo</span> Hello
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$a</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              An <b class="COMMAND">echo</b> requires the
              <tt class="OPTION">-e</tt> option to print escaped characters. See
              <a href="escapingsection.html#ESCAPED">Example 5-2</a>.
            </p>
            <p>
              Normally, each <b class="COMMAND">echo</b> command prints a
              terminal newline, but the <tt class="OPTION">-n</tt> option
              suppresses this.
            </p>
            <p><a name="ECHOGREPREF" id="ECHOGREPREF"></a></p>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      An <b class="COMMAND">echo</b> can be used to feed a
                      sequence of commands down a pipe.
                    </p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs"><span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$VAR</span>"</span> | grep -q txt   <span class="hljs-comment"># if [[ $VAR = *txt* ]]</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$VAR</span> contains the substring sequence \"txt\""</span>
<span class="hljs-keyword">fi</span></pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="ECHOCS" id="ECHOCS"></a></p>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      An <b class="COMMAND">echo</b>, in combination with
                      <a href="commandsub.html#COMMANDSUBREF">command substitution</a>
                      can set a variable.
                    </p>
                    <p>
                      <tt class="USERINPUT"><b>a=`echo "HELLO" | tr A-Z a-z`</b></tt>
                    </p>
                    <p>
                      See also
                      <a href="textproc.html#LOWERCASE">Example 16-22</a>,
                      <a href="moreadv.html#EX57">Example 16-3</a>,
                      <a href="mathc.html#MONTHLYPMT">Example 16-47</a>, and
                      <a href="mathc.html#BASE">Example 16-48</a>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              Be aware that <b class="COMMAND">echo `command`</b> deletes any
              linefeeds that the output of
              <tt class="REPLACEABLE"><i>command</i></tt> generates.
            </p>
            <p>
              The <a href="internalvariables.html#IFSREF">$IFS</a> (internal
              field separator) variable normally contains
              <span class="TOKEN">\n</span> (linefeed) as one of its set of
              <a href="special-chars.html#WHITESPACEREF">whitespace</a>
              characters. Bash therefore splits the output of
              <tt class="REPLACEABLE"><i>command</i></tt> at linefeeds into
              arguments to <b class="COMMAND">echo</b>. Then
              <b class="COMMAND">echo</b> outputs these arguments, separated by
              spaces.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> ls -l /usr/share/apps/kjezz/sounds</span>
-rw-r--r--    1 root     root         1407 Nov  7  2000 reflect.au
 -rw-r--r--    1 root     root          362 Nov  7  2000 seconds.au

<span class="hljs-meta">


bash$</span><span class="bash"> <span class="hljs-built_in">echo</span> `ls -l /usr/share/apps/kjezz/sounds`</span>
total 40 -rw-r--r-- 1 root root 716 Nov 7 2000 reflect.au -rw-r--r-- 1 root root ...
              </pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              So, how can we embed a linefeed within an
              <a href="internal.html#ECHOREF">echoed</a> character string?
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># Embedding a linefeed?</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Why doesn't this string \n split on two lines?"</span>
<span class="hljs-comment"># Doesn't split.</span>

<span class="hljs-comment"># Let's try something else.</span>

<span class="hljs-built_in">echo</span>
             
<span class="hljs-built_in">echo</span> $<span class="hljs-string">"A line of text containing
a linefeed."</span>
<span class="hljs-comment"># Prints as two distinct lines (embedded linefeed).</span>
<span class="hljs-comment"># But, is the "$" variable prefix really necessary?</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"This string splits
on two lines."</span>
<span class="hljs-comment"># No, the "$" is not needed.</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"---------------"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> -n $<span class="hljs-string">"Another line of text containing
a linefeed."</span>
<span class="hljs-comment"># Prints as two distinct lines (embedded linefeed).</span>
<span class="hljs-comment"># Even the -n option fails to suppress the linefeed here.</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"---------------"</span>
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># However, the following doesn't work as expected.</span>
<span class="hljs-comment"># Why not? Hint: Assignment to a variable.</span>
string1=$<span class="hljs-string">"Yet another line of text containing
a linefeed (maybe)."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-variable">$string1</span>
<span class="hljs-comment"># Yet another line of text containing a linefeed (maybe).</span>
<span class="hljs-comment">#                                    ^</span>
<span class="hljs-comment"># Linefeed becomes a space.</span>

<span class="hljs-comment"># Thanks, Steve Parker, for pointing this out.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p><a name="BINECHO" id="BINECHO"></a></p>
            <div class="NOTE">
              <table class="NOTE no-border" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      This command is a shell builtin, and not the same as
                      <tt class="FILENAME">/bin/echo</tt>, although its behavior
                      is similar.
                    </p>
                    <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
                      <tbody><tr>
                        <td>
                          <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">type</span> -a <span class="hljs-built_in">echo</span></span>
echo is a shell builtin
 echo is /bin/echo
              </pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="PRINTFREF" id="PRINTFREF"></a><b class="COMMAND">printf</b>
          </dt>
          <dd>
            <p>
              The <b class="COMMAND">printf</b>, formatted print, command is an
              enhanced <b class="COMMAND">echo</b>. It is a limited variant of
              the <i class="FIRSTTERM">C</i> language
              <tt class="FUNCTION">printf()</tt> library function, and its
              syntax is somewhat different.
            </p>
            <p>
              <b class="COMMAND">printf</b>
              <tt class="REPLACEABLE"><i>format-string</i></tt>... <tt class="REPLACEABLE"><i>parameter</i></tt>...
            </p>
            <p>
              This is the Bash <i class="FIRSTTERM">builtin</i> version of the
              <tt class="FILENAME">/bin/printf</tt> or
              <tt class="FILENAME">/usr/bin/printf</tt> command. See the
              <b class="COMMAND">printf</b>
              <a href="basic.html#MANREF">manpage</a> (of the system command)
              for in-depth coverage.
            </p>
            <div class="CAUTION">
              <table class="CAUTION" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/caution.gif" hspace="5" alt="Caution">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      Older versions of Bash may not support
                      <b class="COMMAND">printf</b>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="EX47" id="EX47"></a>
              <p>
                <b>Example 15-2. <i class="FIRSTTERM">printf</i> in action</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># printf demo</span>

<span class="hljs-built_in">declare</span> -r PI=3.14159265358979     <span class="hljs-comment"># Read-only variable, i.e., a constant.</span>
<span class="hljs-built_in">declare</span> -r DecimalConstant=31373

Message1=<span class="hljs-string">"Greetings,"</span>
Message2=<span class="hljs-string">"Earthling."</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">"Pi to 2 decimal places = %1.2f"</span> <span class="hljs-variable">$PI</span>
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"Pi to 9 decimal places = %1.9f"</span> <span class="hljs-variable">$PI</span>  <span class="hljs-comment"># It even rounds off correctly.</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">"\n"</span>                                  <span class="hljs-comment"># Prints a line feed,</span>
                                             <span class="hljs-comment"># Equivalent to 'echo' . . .</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">"Constant = \t%d\n"</span> <span class="hljs-variable">$DecimalConstant</span>  <span class="hljs-comment"># Inserts tab (\t).</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">"%s %s \n"</span> <span class="hljs-variable">$Message1</span> <span class="hljs-variable">$Message2</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># ==========================================#</span>
<span class="hljs-comment"># Simulation of C function, sprintf().</span>
<span class="hljs-comment"># Loading a variable with a formatted string.</span>

<span class="hljs-built_in">echo</span> 

Pi12=$(<span class="hljs-built_in">printf</span> <span class="hljs-string">"%1.12f"</span> <span class="hljs-variable">$PI</span>)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Pi to 12 decimal places = <span class="hljs-variable">$Pi12</span>"</span>      <span class="hljs-comment"># Roundoff error!</span>

Msg=`<span class="hljs-built_in">printf</span> <span class="hljs-string">"%s %s \n"</span> <span class="hljs-variable">$Message1</span> <span class="hljs-variable">$Message2</span>`
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$Msg</span>; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$Msg</span>

<span class="hljs-comment">#  As it happens, the 'sprintf' function can now be accessed</span>
<span class="hljs-comment">#+ as a loadable module to Bash,</span>
<span class="hljs-comment">#+ but this is not portable.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              Formatting error messages is a useful application of
              <b class="COMMAND">printf</b>
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs">E_BADDIR=85

var=nonexistent_directory

<span class="hljs-function"><span class="hljs-title">error</span></span>()
{
  <span class="hljs-built_in">printf</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span> &gt;&amp;2
  <span class="hljs-comment"># Formats positional params passed, and sends them to stderr.</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_BADDIR</span>
}

<span class="hljs-built_in">cd</span> <span class="hljs-variable">$var</span> || error $<span class="hljs-string">"Can't cd to %s."</span> <span class="hljs-string">"<span class="hljs-variable">$var</span>"</span>

<span class="hljs-comment"># Thanks, S.C.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              See also
              <a href="assortedtips.html#PROGRESSBAR">Example 36-17</a>.
            </p>
          </dd>
          <dt>
            <a name="READREF" id="READREF"></a><b class="COMMAND">read</b>
          </dt>
          <dd>
            <p>
              <span class="QUOTE">"Reads"</span> the value of a variable from
              <tt class="FILENAME">stdin</tt>, that is, interactively fetches
              input from the keyboard. The <tt class="OPTION">-a</tt> option
              lets <b class="COMMAND">read</b> get array variables (see
              <a href="arrays.html#EX67">Example 27-6</a>).
            </p>
            <div class="EXAMPLE">
              <a name="EX36" id="EX36"></a>
              <p>
                <b>Example 15-3. Variable assignment, using
                  <i class="FIRSTTERM">read</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># "Reading" variables.</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Enter the value of variable 'var1': "</span>
<span class="hljs-comment"># The -n option to echo suppresses newline.</span>

<span class="hljs-built_in">read</span> var1
<span class="hljs-comment"># Note no '$' in front of var1, since it is being set.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"var1 = <span class="hljs-variable">$var1</span>"</span>


<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># A single 'read' statement can set multiple variables.</span>
<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Enter the values of variables 'var2' and 'var3' "</span>
<span class="hljs-built_in">echo</span> =n <span class="hljs-string">"(separated by a space or tab): "</span>
<span class="hljs-built_in">read</span> var2 var3
<span class="hljs-built_in">echo</span> <span class="hljs-string">"var2 = <span class="hljs-variable">$var2</span>      var3 = <span class="hljs-variable">$var3</span>"</span>
<span class="hljs-comment">#  If you input only one value,</span>
<span class="hljs-comment">#+ the other variable(s) will remain unset (null).</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              A <b class="COMMAND">read</b> without an associated variable
              assigns its input to the dedicated variable
              <a href="internalvariables.html#REPLYREF">$REPLY</a>.
            </p>
            <div class="EXAMPLE">
              <a name="READNOVAR" id="READNOVAR"></a>
              <p>
                <b>Example 15-4. What happens when
                  <i class="FIRSTTERM">read</i> has no variable</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># read-novar.sh</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># -------------------------- #</span>
<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Enter a value: "</span>
<span class="hljs-built_in">read</span> var
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\"var\" = "</span><span class="hljs-variable">$var</span><span class="hljs-string">""</span>
<span class="hljs-comment"># Everything as expected here.</span>
<span class="hljs-comment"># -------------------------- #</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># ------------------------------------------------------------------- #</span>
<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Enter another value: "</span>
<span class="hljs-built_in">read</span>           <span class="hljs-comment">#  No variable supplied for 'read', therefore...</span>
               <span class="hljs-comment">#+ Input to 'read' assigned to default variable, $REPLY.</span>
var=<span class="hljs-string">"<span class="hljs-variable">$REPLY</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\"var\" = "</span><span class="hljs-variable">$var</span><span class="hljs-string">""</span>
<span class="hljs-comment"># This is equivalent to the first code block.</span>
<span class="hljs-comment"># ------------------------------------------------------------------- #</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================="</span>
<span class="hljs-built_in">echo</span>


<span class="hljs-comment">#  This example is similar to the "reply.sh" script.</span>
<span class="hljs-comment">#  However, this one shows that $REPLY is available</span>
<span class="hljs-comment">#+ even after a 'read' to a variable in the conventional way.</span>


<span class="hljs-comment"># ================================================================= #</span>

<span class="hljs-comment">#  In some instances, you might wish to discard the first value read.</span>
<span class="hljs-comment">#  In such cases, simply ignore the $REPLY variable.</span>

{ <span class="hljs-comment"># Code block.</span>
<span class="hljs-built_in">read</span>            <span class="hljs-comment"># Line 1, to be discarded.</span>
<span class="hljs-built_in">read</span> line2      <span class="hljs-comment"># Line 2, saved in variable.</span>
  } &lt;<span class="hljs-variable">$0</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Line 2 of this script is:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line2</span>"</span>   <span class="hljs-comment">#   # read-novar.sh</span>
<span class="hljs-built_in">echo</span>            <span class="hljs-comment">#   #!/bin/bash  line discarded.</span>

<span class="hljs-comment"># See also the soundcard-on.sh script.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              Normally, inputting a
              <tt class="USERINPUT"><b>\</b></tt> suppresses a newline during
              input to a <b class="COMMAND">read</b>. The
              <tt class="OPTION">-r</tt> option causes an inputted
              <tt class="USERINPUT"><b>\</b></tt> to be interpreted literally.
            </p>
            <div class="EXAMPLE">
              <a name="READR" id="READR"></a>
              <p>
                <b>Example 15-5. Multi-line input to
                  <i class="FIRSTTERM">read</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Enter a string terminated by a \\, then press &lt;ENTER&gt;."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Then, enter a second string (no \\ this time), and again press &lt;ENTER&gt;."</span>

<span class="hljs-built_in">read</span> var1     <span class="hljs-comment"># The "\" suppresses the newline, when reading $var1.</span>
              <span class="hljs-comment">#     first line \</span>
              <span class="hljs-comment">#     second line</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"var1 = <span class="hljs-variable">$var1</span>"</span>
<span class="hljs-comment">#     var1 = first line second line</span>

<span class="hljs-comment">#  For each line terminated by a "\"</span>
<span class="hljs-comment">#+ you get a prompt on the next line to continue feeding characters into var1.</span>

<span class="hljs-built_in">echo</span>; <span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Enter another string terminated by a \\ , then press &lt;ENTER&gt;."</span>
<span class="hljs-built_in">read</span> -r var2  <span class="hljs-comment"># The -r option causes the "\" to be read literally.</span>
              <span class="hljs-comment">#     first line \</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"var2 = <span class="hljs-variable">$var2</span>"</span>
<span class="hljs-comment">#     var2 = first line \</span>

<span class="hljs-comment"># Data entry terminates with the first &lt;ENTER&gt;.</span>

<span class="hljs-built_in">echo</span> 

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="READOPTIONS" id="READOPTIONS"></a></p>
            <p>
              The <b class="COMMAND">read</b> command has some interesting
              options that permit echoing a prompt and even reading keystrokes
              without hitting <b class="KEYCAP">ENTER</b>.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># Read a keypress without hitting ENTER.</span>

<span class="hljs-built_in">read</span> -s -n1 -p <span class="hljs-string">"Hit a key "</span> keypress
<span class="hljs-built_in">echo</span>; <span class="hljs-built_in">echo</span> <span class="hljs-string">"Keypress was "</span>\"<span class="hljs-variable">$keypress</span>\"<span class="hljs-string">"."</span>

<span class="hljs-comment"># -s option means do not echo input.</span>
<span class="hljs-comment"># -n N option means accept only N characters of input.</span>
<span class="hljs-comment"># -p option means echo the following prompt before reading input.</span>

<span class="hljs-comment"># Using these options is tricky, since they need to be in the correct order.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p><a name="READARROW" id="READARROW"></a></p>
            <p>
              The <tt class="OPTION">-n</tt> option to
              <b class="COMMAND">read</b> also allows detection of the
              <b class="KEYCAP">arrow keys</b> and certain of the other unusual
              keys.
            </p>
            <div class="EXAMPLE">
              <a name="ARROWDETECT" id="ARROWDETECT"></a>
              <p><b>Example 15-6. Detecting the arrow keys</b></p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># arrow-detect.sh: Detects the arrow keys, and a few more.</span>
<span class="hljs-comment"># Thank you, Sandro Magi, for showing me how.</span>

<span class="hljs-comment"># --------------------------------------------</span>
<span class="hljs-comment"># Character codes generated by the keypresses.</span>
arrowup=<span class="hljs-string">'\[A'</span>
arrowdown=<span class="hljs-string">'\[B'</span>
arrowrt=<span class="hljs-string">'\[C'</span>
arrowleft=<span class="hljs-string">'\[D'</span>
insert=<span class="hljs-string">'\[2'</span>
delete=<span class="hljs-string">'\[3'</span>
<span class="hljs-comment"># --------------------------------------------</span>

SUCCESS=0
OTHER=65

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Press a key...  "</span>
<span class="hljs-comment"># May need to also press ENTER if a key not listed above pressed.</span>
<span class="hljs-built_in">read</span> -n3 key                      <span class="hljs-comment"># Read 3 characters.</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$arrowup</span>"</span>  <span class="hljs-comment">#Check if character code detected.</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"$?"</span> -eq <span class="hljs-variable">$SUCCESS</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Up-arrow key pressed."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$SUCCESS</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$arrowdown</span>"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"$?"</span> -eq <span class="hljs-variable">$SUCCESS</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Down-arrow key pressed."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$SUCCESS</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$arrowrt</span>"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"$?"</span> -eq <span class="hljs-variable">$SUCCESS</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Right-arrow key pressed."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$SUCCESS</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$arrowleft</span>"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"$?"</span> -eq <span class="hljs-variable">$SUCCESS</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Left-arrow key pressed."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$SUCCESS</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$insert</span>"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"$?"</span> -eq <span class="hljs-variable">$SUCCESS</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"Insert\" key pressed."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$SUCCESS</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$delete</span>"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"$?"</span> -eq <span class="hljs-variable">$SUCCESS</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"Delete\" key pressed."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$SUCCESS</span>
<span class="hljs-keyword">fi</span>


<span class="hljs-built_in">echo</span> <span class="hljs-string">" Some other key pressed."</span>

<span class="hljs-built_in">exit</span> <span class="hljs-variable">$OTHER</span>

<span class="hljs-comment"># ========================================= #</span>

<span class="hljs-comment">#  Mark Alexander came up with a simplified</span>
<span class="hljs-comment">#+ version of the above script (Thank you!).</span>
<span class="hljs-comment">#  It eliminates the need for grep.</span>

<span class="hljs-comment">#!/bin/bash</span>

  uparrow=$<span class="hljs-string">'\x1b[A'</span>
  downarrow=$<span class="hljs-string">'\x1b[B'</span>
  leftarrow=$<span class="hljs-string">'\x1b[D'</span>
  rightarrow=$<span class="hljs-string">'\x1b[C'</span>

  <span class="hljs-built_in">read</span> -s -n3 -p <span class="hljs-string">"Hit an arrow key: "</span> x

  <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$x</span>"</span> <span class="hljs-keyword">in</span>
  <span class="hljs-variable">$uparrow</span>)
     <span class="hljs-built_in">echo</span> <span class="hljs-string">"You pressed up-arrow"</span>
     ;;
  <span class="hljs-variable">$downarrow</span>)
     <span class="hljs-built_in">echo</span> <span class="hljs-string">"You pressed down-arrow"</span>
     ;;
  <span class="hljs-variable">$leftarrow</span>)
     <span class="hljs-built_in">echo</span> <span class="hljs-string">"You pressed left-arrow"</span>
     ;;
  <span class="hljs-variable">$rightarrow</span>)
     <span class="hljs-built_in">echo</span> <span class="hljs-string">"You pressed right-arrow"</span>
     ;;
  <span class="hljs-keyword">esac</span>

<span class="hljs-built_in">exit</span> $?

<span class="hljs-comment"># ========================================= #</span>

<span class="hljs-comment"># Antonio Macchi has a simpler alternative.</span>

<span class="hljs-comment">#!/bin/bash</span>

<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">read</span> -sn1 a
  <span class="hljs-built_in">test</span> <span class="hljs-string">"<span class="hljs-variable">$a</span>"</span> == `<span class="hljs-built_in">echo</span> -en <span class="hljs-string">"\e"</span>` || <span class="hljs-built_in">continue</span>
  <span class="hljs-built_in">read</span> -sn1 a
  <span class="hljs-built_in">test</span> <span class="hljs-string">"<span class="hljs-variable">$a</span>"</span> == <span class="hljs-string">"["</span> || <span class="hljs-built_in">continue</span>
  <span class="hljs-built_in">read</span> -sn1 a
  <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$a</span>"</span> <span class="hljs-keyword">in</span>
    A)  <span class="hljs-built_in">echo</span> <span class="hljs-string">"up"</span>;;
    B)  <span class="hljs-built_in">echo</span> <span class="hljs-string">"down"</span>;;
    C)  <span class="hljs-built_in">echo</span> <span class="hljs-string">"right"</span>;;
    D)  <span class="hljs-built_in">echo</span> <span class="hljs-string">"left"</span>;;
  <span class="hljs-keyword">esac</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># ========================================= #</span>

<span class="hljs-comment">#  Exercise:</span>
<span class="hljs-comment">#  --------</span>
<span class="hljs-comment">#  1) Add detection of the "Home," "End," "PgUp," and "PgDn" keys.</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <tt class="OPTION">-n</tt> option to
                      <b class="COMMAND">read</b> will not detect the
                      <b class="KEYCAP">ENTER</b> (newline) key.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="READTIMED" id="READTIMED"></a></p>
            <p>
              The <tt class="OPTION">-t</tt> option to
              <b class="COMMAND">read</b> permits timed input (see
              <a href="internalvariables.html#TOUT">Example 9-4</a> and
              <a href="contributed-scripts.html#QKY">Example A-41</a>).
            </p>
            <p>
              <a name="READFD" id="READFD"></a>The
              <tt class="OPTION">-u</tt> option takes the
              <a href="io-redirection.html#FDREF">file descriptor</a> of the
              target file.
            </p>
            <p><a name="READREDIR0" id="READREDIR0"></a></p>
            <p>
              The <b class="COMMAND">read</b> command may also
              <span class="QUOTE">"read"</span> its variable value from a file
              <a href="io-redirection.html#IOREDIRREF">redirected</a> to
              <tt class="FILENAME">stdin</tt>. If the file contains more than
              one line, only the first line is assigned to the variable. If
              <b class="COMMAND">read</b> has more than one parameter, then each
              of these variables gets assigned a successive
              <a href="special-chars.html#WHITESPACEREF">whitespace-delineated</a>
              string. Caution!
            </p>
            <div class="EXAMPLE">
              <a name="READREDIR" id="READREDIR"></a>
              <p>
                <b>Example 15-7. Using <i class="FIRSTTERM">read</i> with
                  <a href="io-redirection.html#IOREDIRREF">file redirection</a></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">read</span> var1 &lt;data-file
<span class="hljs-built_in">echo</span> <span class="hljs-string">"var1 = <span class="hljs-variable">$var1</span>"</span>
<span class="hljs-comment"># var1 set to the entire first line of the input file "data-file"</span>

<span class="hljs-built_in">read</span> var2 var3 &lt;data-file
<span class="hljs-built_in">echo</span> <span class="hljs-string">"var2 = <span class="hljs-variable">$var2</span>   var3 = <span class="hljs-variable">$var3</span>"</span>
<span class="hljs-comment"># Note non-intuitive behavior of "read" here.</span>
<span class="hljs-comment"># 1) Rewinds back to the beginning of input file.</span>
<span class="hljs-comment"># 2) Each variable is now set to a corresponding string,</span>
<span class="hljs-comment">#    separated by whitespace, rather than to an entire line of text.</span>
<span class="hljs-comment"># 3) The final variable gets the remainder of the line.</span>
<span class="hljs-comment"># 4) If there are more variables to be set than whitespace-terminated strings</span>
<span class="hljs-comment">#    on the first line of the file, then the excess variables remain empty.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"------------------------------------------------"</span>

<span class="hljs-comment"># How to resolve the above problem with a loop:</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span>
<span class="hljs-keyword">done</span> &lt;data-file
<span class="hljs-comment"># Thanks, Heiner Steven for pointing this out.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"------------------------------------------------"</span>

<span class="hljs-comment"># Use $IFS (Internal Field Separator variable) to split a line of input to</span>
<span class="hljs-comment"># "read", if you do not want the default to be whitespace.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"List of all users:"</span>
OIFS=<span class="hljs-variable">$IFS</span>; IFS=:       <span class="hljs-comment"># /etc/passwd uses ":" for field separator.</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> name passwd uid gid fullname ignore
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$name</span> (<span class="hljs-variable">$fullname</span>)"</span>
<span class="hljs-keyword">done</span> &lt;/etc/passwd   <span class="hljs-comment"># I/O redirection.</span>
IFS=<span class="hljs-variable">$OIFS</span>              <span class="hljs-comment"># Restore original $IFS.</span>
<span class="hljs-comment"># This code snippet also by Heiner Steven.</span>



<span class="hljs-comment">#  Setting the $IFS variable within the loop itself</span>
<span class="hljs-comment">#+ eliminates the need for storing the original $IFS</span>
<span class="hljs-comment">#+ in a temporary variable.</span>
<span class="hljs-comment">#  Thanks, Dim Segebart, for pointing this out.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"------------------------------------------------"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"List of all users:"</span>

<span class="hljs-keyword">while</span> IFS=: <span class="hljs-built_in">read</span> name passwd uid gid fullname ignore
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$name</span> (<span class="hljs-variable">$fullname</span>)"</span>
<span class="hljs-keyword">done</span> &lt;/etc/passwd   <span class="hljs-comment"># I/O redirection.</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\$IFS still <span class="hljs-variable">$IFS</span>"</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p><a name="PIPEREADREF0" id="PIPEREADREF0"></a></p>
                    <p>
                      <a href="special-chars.html#PIPEREF">Piping</a> output to
                      a <i class="FIRSTTERM">read</i>, using
                      <a href="internal.html#ECHOREF">echo</a> to set variables
                      <a href="gotchas.html#BADREAD0">will fail</a>.
                    </p>
                    <p>
                      <a name="READPIPEREF" id="READPIPEREF"></a>Yet, piping the
                      output of <a href="basic.html#CATREF">cat</a>
                      <em>seems</em> to work.
                    </p>
                    <p><a name="WHILEREADREF" id="WHILEREADREF"></a></p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs">cat file1 file2 |
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line
<span class="hljs-keyword">do</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$line</span>
<span class="hljs-keyword">done</span></pre>
                        </td>
                      </tr>
                    </tbody></table>
                    <p>However, as Bjon Eriksson shows:</p>
                    <div class="EXAMPLE">
                      <a name="READPIPE" id="READPIPE"></a>
                      <p><b>Example 15-8. Problems reading from a pipe</b></p>
                      <table border="0" bgcolor="#E0E0E0" width="90%">
                        <tbody><tr>
                          <td>
                            <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-comment"># readpipe.sh</span>
<span class="hljs-comment"># This example contributed by Bjon Eriksson.</span>

<span class="hljs-comment">### shopt -s lastpipe</span>

last=<span class="hljs-string">"(null)"</span>
cat <span class="hljs-variable">$0</span> |
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line
<span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"{<span class="hljs-variable">$line</span>}"</span>
    last=<span class="hljs-variable">$line</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"++++++++++++++++++++++"</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"\nAll done, last: <span class="hljs-variable">$last</span>\n"</span> <span class="hljs-comment">#  The output of this line</span>
                                   <span class="hljs-comment">#+ changes if you uncomment line 5.</span>
                                   <span class="hljs-comment">#  (Bash, version -ge 4.2 required.)</span>

<span class="hljs-built_in">exit</span> 0  <span class="hljs-comment"># End of code.</span>
        <span class="hljs-comment"># (Partial) output of script follows.</span>
        <span class="hljs-comment"># The 'echo' supplies extra brackets.</span>

<span class="hljs-comment">#############################################</span>

./readpipe.sh 

{<span class="hljs-comment">#!/bin/sh}</span>
{last=<span class="hljs-string">"(null)"</span>}
{cat <span class="hljs-variable">$0</span> |}
{<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line}
{<span class="hljs-keyword">do</span>}
{<span class="hljs-built_in">echo</span> <span class="hljs-string">"{<span class="hljs-variable">$line</span>}"</span>}
{last=<span class="hljs-variable">$line</span>}
{<span class="hljs-keyword">done</span>}
{<span class="hljs-built_in">printf</span> <span class="hljs-string">"nAll done, last: <span class="hljs-variable">$lastn</span>"</span>}


All <span class="hljs-keyword">done</span>, last: (null)

The variable (last) is <span class="hljs-built_in">set</span> within the loop/subshell
but its value does not persist outside the loop.</pre>
                          </td>
                        </tr>
                      </tbody></table>
                    </div>
                    <p>
                      The <i class="FIRSTTERM">gendiff</i> script, usually found
                      in <tt class="FILENAME">/usr/bin</tt> on many Linux
                      distros, pipes the output of
                      <a href="moreadv.html#FINDREF">find</a> to a
                      <i class="FIRSTTERM">while read</i> construct.
                    </p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs">find <span class="hljs-variable">$1</span> \( -name <span class="hljs-string">"*<span class="hljs-variable">$2</span>"</span> -o -name <span class="hljs-string">".*<span class="hljs-variable">$2</span>"</span> \) -<span class="hljs-built_in">print</span> |
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> f; <span class="hljs-keyword">do</span>
. . .</pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="TIP">
              <table class="TIP" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      It is possible to <i class="FIRSTTERM">paste</i> text into
                      the input field of a <i class="FIRSTTERM">read</i> (but
                      <em>not</em> multiple lines!). See
                      <a href="contributed-scripts.html#PADSW">Example A-38</a>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
        </dl>
      </div>
      <div class="VARIABLELIST">
        <p>
          <b><a name="INTFILESYSTEM1" id="INTFILESYSTEM1"></a>Filesystem</b>
        </p>
        <dl>
          <dt><a name="CDREF" id="CDREF"></a><b class="COMMAND">cd</b></dt>
          <dd>
            <p>
              The familiar <b class="COMMAND">cd</b> change directory command
              finds use in scripts where execution of a command requires being
              in a specified directory.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs">(<span class="hljs-built_in">cd</span> /<span class="hljs-built_in">source</span>/directory &amp;&amp; tar cf - . ) | (<span class="hljs-built_in">cd</span> /dest/directory &amp;&amp; tar xpvf -)</pre>
                </td>
              </tr>
            </tbody></table>
            [from the
            <a href="special-chars.html#COXEX">previously cited</a> example by
            Alan Cox]
            <p>
              The <tt class="OPTION">-P</tt> (physical) option to
              <b class="COMMAND">cd</b> causes it to ignore symbolic links.
            </p>
            <p>
              <b class="COMMAND">cd -</b> changes to
              <a href="internalvariables.html#OLDPWD">$OLDPWD</a>, the previous
              working directory.
            </p>
            <p><a name="DOUBLESLASHREF" id="DOUBLESLASHREF"></a></p>
            <div class="CAUTION">
              <table class="CAUTION no-border" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/caution.gif" hspace="5" alt="Caution">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <b class="COMMAND">cd</b> command does not function as
                      expected when presented with two forward slashes.
                    </p>
                    <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
                      <tbody><tr>
                        <td>
                          <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">cd</span> //</span>
<span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">pwd</span></span>
//
              </pre>
                        </td>
                      </tr>
                    </tbody></table>
                    The output should, of course, be
                    <tt class="COMPUTEROUTPUT">/</tt>. This is a problem both
                    from the command-line and in a script.
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt><a name="PWD2REF" id="PWD2REF"></a><b class="COMMAND">pwd</b></dt>
          <dd>
            <p>
              Print Working Directory. This gives the user's (or script's)
              current directory (see
              <a href="internal.html#EX37">Example 15-9</a>). The effect is
              identical to reading the value of the builtin variable
              <a href="internalvariables.html#PWDREF">$PWD</a>.
            </p>
          </dd>
          <dt>
            <a name="DIRSD" id="DIRSD"></a><b class="COMMAND">pushd</b>,
            <b class="COMMAND">popd</b>, <b class="COMMAND">dirs</b>
          </dt>
          <dd>
            <p>
              This command set is a mechanism for bookmarking working
              directories, a means of moving back and forth through directories
              in an orderly manner. A pushdown
              <a href="internalvariables.html#STACKDEFREF">stack</a> is used to
              keep track of directory names. Options allow various manipulations
              of the directory stack.
            </p>
            <p>
              <a name="PUSHDREF" id="PUSHDREF"></a><tt class="USERINPUT"><b>pushd dir-name</b></tt> pushes the path
              <tt class="REPLACEABLE"><i>dir-name</i></tt> onto the directory
              stack (to the <i class="FIRSTTERM">top</i> of the stack) and
              simultaneously changes the current working directory to
              <tt class="REPLACEABLE"><i>dir-name</i></tt>
            </p>
            <p>
              <a name="POPDREF" id="POPDREF"></a><b class="COMMAND">popd</b> removes (pops) the top directory path
              name off the directory stack and simultaneously changes the
              current working directory to the directory now at the
              <i class="FIRSTTERM">top</i> of the stack.
            </p>
            <p>
              <a name="DIRSREF" id="DIRSREF"></a><b class="COMMAND">dirs</b> lists the contents of the directory
              stack (compare this with the
              <a href="internalvariables.html#DIRSTACKREF">$DIRSTACK</a>
              variable). A successful <b class="COMMAND">pushd</b> or
              <b class="COMMAND">popd</b> will automatically invoke
              <b class="COMMAND">dirs</b>.
            </p>
            <p>
              Scripts that require various changes to the current working
              directory without hard-coding the directory name changes can make
              good use of these commands. Note that the implicit
              <tt class="VARNAME">$DIRSTACK</tt> array variable, accessible from
              within a script, holds the contents of the directory stack.
            </p>
            <div class="EXAMPLE">
              <a name="EX37" id="EX37"></a>
              <p><b>Example 15-9. Changing the current working directory</b></p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

dir1=/usr/<span class="hljs-built_in">local</span>
dir2=/var/spool

<span class="hljs-built_in">pushd</span> <span class="hljs-variable">$dir1</span>
<span class="hljs-comment"># Will do an automatic 'dirs' (list directory stack to stdout).</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Now in directory `pwd`."</span> <span class="hljs-comment"># Uses back-quoted 'pwd'.</span>

<span class="hljs-comment"># Now, do some stuff in directory 'dir1'.</span>
<span class="hljs-built_in">pushd</span> <span class="hljs-variable">$dir2</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Now in directory `pwd`."</span>

<span class="hljs-comment"># Now, do some stuff in directory 'dir2'.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"The top entry in the DIRSTACK array is <span class="hljs-variable">$DIRSTACK</span>."</span>
<span class="hljs-built_in">popd</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Now back in directory `pwd`."</span>

<span class="hljs-comment"># Now, do some more stuff in directory 'dir1'.</span>
<span class="hljs-built_in">popd</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Now back in original working directory `pwd`."</span>

<span class="hljs-built_in">exit</span> 0

<span class="hljs-comment"># What happens if you don't 'popd' -- then exit the script?</span>
<span class="hljs-comment"># Which directory do you end up in? Why?</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
        </dl>
      </div>
      <div class="VARIABLELIST">
        <p>
          <b><a name="INTVAR1" id="INTVAR1"></a>Variables</b>
        </p>
        <dl>
          <dt><a name="LETREF" id="LETREF"></a><b class="COMMAND">let</b></dt>
          <dd>
            <p>
              The <b class="COMMAND">let</b> command carries out
              <i class="FIRSTTERM">arithmetic</i> operations on variables.
              <a name="AEN9009" href="#FTN.AEN9009" id="AEN9009"><span class="footnote">[3]</span></a>
              In many cases, it functions as a less complex version of
              <a href="moreadv.html#EXPRREF">expr</a>.
            </p>
            <div class="EXAMPLE">
              <a name="EX46" id="EX46"></a>
              <p>
                <b>Example 15-10. Letting <i class="FIRSTTERM">let</i> do
                  arithmetic.</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">let</span> a=11            <span class="hljs-comment"># Same as 'a=11'</span>
<span class="hljs-built_in">let</span> a=a+5           <span class="hljs-comment"># Equivalent to  let "a = a + 5"</span>
                    <span class="hljs-comment"># (Double quotes and spaces make it more readable.)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"11 + 5 = <span class="hljs-variable">$a</span>"</span>  <span class="hljs-comment"># 16</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"a &lt;&lt;= 3"</span>       <span class="hljs-comment"># Equivalent to  let "a = a &lt;&lt; 3"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\"\$a\" (=16) left-shifted 3 places = <span class="hljs-variable">$a</span>"</span>
                    <span class="hljs-comment"># 128</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"a /= 4"</span>        <span class="hljs-comment"># Equivalent to  let "a = a / 4"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"128 / 4 = <span class="hljs-variable">$a</span>"</span> <span class="hljs-comment"># 32</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"a -= 5"</span>        <span class="hljs-comment"># Equivalent to  let "a = a - 5"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"32 - 5 = <span class="hljs-variable">$a</span>"</span>  <span class="hljs-comment"># 27</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"a *=  10"</span>      <span class="hljs-comment"># Equivalent to  let "a = a * 10"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"27 * 10 = <span class="hljs-variable">$a</span>"</span> <span class="hljs-comment"># 270</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"a %= 8"</span>        <span class="hljs-comment"># Equivalent to  let "a = a % 8"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"270 modulo 8 = <span class="hljs-variable">$a</span>  (270 / 8 = 33, remainder <span class="hljs-variable">$a</span>)"</span>
                    <span class="hljs-comment"># 6</span>


<span class="hljs-comment"># Does "let" permit C-style operators?</span>
<span class="hljs-comment"># Yes, just as the (( ... )) double-parentheses construct does.</span>

<span class="hljs-built_in">let</span> a++             <span class="hljs-comment"># C-style (post) increment.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"6++ = <span class="hljs-variable">$a</span>"</span>     <span class="hljs-comment"># 6++ = 7</span>
<span class="hljs-built_in">let</span> a--             <span class="hljs-comment"># C-style decrement.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"7-- = <span class="hljs-variable">$a</span>"</span>     <span class="hljs-comment"># 7-- = 6</span>
<span class="hljs-comment"># Of course, ++a, etc., also allowed . . .</span>
<span class="hljs-built_in">echo</span>


<span class="hljs-comment"># Trinary operator.</span>

<span class="hljs-comment"># Note that $a is 6, see above.</span>
<span class="hljs-built_in">let</span> <span class="hljs-string">"t = a&lt;7?7:11"</span>   <span class="hljs-comment"># True</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$t</span>  <span class="hljs-comment"># 7</span>

<span class="hljs-built_in">let</span> a++
<span class="hljs-built_in">let</span> <span class="hljs-string">"t = a&lt;7?7:11"</span>   <span class="hljs-comment"># False</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$t</span>  <span class="hljs-comment">#     11</span>

<span class="hljs-built_in">exit</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="EXITVALANOMALY02" id="EXITVALANOMALY02"></a></p>
            <div class="CAUTION">
              <table class="CAUTION" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/caution.gif" hspace="5" alt="Caution">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <i class="FIRSTTERM">let</i> command can, in certain
                      contexts, return a surprising
                      <a href="exit-status.html#EXITSTATUSREF">exit status</a>.
                    </p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># Evgeniy Ivanov points out:</span>

var=0
<span class="hljs-built_in">echo</span> $?     <span class="hljs-comment"># 0</span>
            <span class="hljs-comment"># As expected.</span>

<span class="hljs-built_in">let</span> var++
<span class="hljs-built_in">echo</span> $?     <span class="hljs-comment"># 1</span>
            <span class="hljs-comment"># The command was successful, so why isn't $?=0 ???</span>
            <span class="hljs-comment"># Anomaly!</span>

<span class="hljs-built_in">let</span> var++
<span class="hljs-built_in">echo</span> $?     <span class="hljs-comment"># 0</span>
            <span class="hljs-comment"># As expected.</span>


<span class="hljs-comment"># Likewise . . .</span>

<span class="hljs-built_in">let</span> var=0
<span class="hljs-built_in">echo</span> $?     <span class="hljs-comment"># 1</span>
            <span class="hljs-comment"># The command was successful, so why isn't $?=0 ???</span>

<span class="hljs-comment">#  However, as Jeff Gorak points out,</span>
<span class="hljs-comment">#+ this is part of the design spec for 'let' . . .</span>
<span class="hljs-comment"># "If the last ARG evaluates to 0, let returns 1;</span>
<span class="hljs-comment">#  let returns 0 otherwise." ['help let']</span></pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="EVALREF" id="EVALREF"></a><b class="COMMAND">eval</b>
          </dt>
          <dd>
            <p>
              <tt class="USERINPUT"><b>eval arg1 [arg2] ... [argN]</b></tt>
            </p>
            <p>
              Combines the arguments in an expression or list of expressions and
              <tt class="REPLACEABLE"><i>evaluates</i></tt> them. Any variables
              within the expression are expanded. The net result is to
              <b class="COMMAND">convert a string into a command</b>.
            </p>
            <div class="TIP">
              <table class="TIP" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <b class="COMMAND">eval</b> command can be used for
                      code generation from the command-line or within a script.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> command_string=<span class="hljs-string">"ps ax"</span></span>
<span class="hljs-meta">bash$</span><span class="bash"> process=<span class="hljs-string">"ps ax"</span></span>
<span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-variable">$command_string</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$process</span>"</span></span>
26973 pts/3    R+     0:00 grep --color ps ax
 26974 pts/3    R+     0:00 ps ax
              </pre>
                </td>
              </tr>
            </tbody></table>
            <p><a name="EVALFORCED" id="EVALFORCED"></a></p>
            <p>
              Each invocation of <i class="FIRSTTERM">eval</i> forces a re-<em>evaluation</em>
              of its arguments.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs">a=<span class="hljs-string">'$b'</span>
b=<span class="hljs-string">'$c'</span>
c=d

<span class="hljs-built_in">echo</span> <span class="hljs-variable">$a</span>             <span class="hljs-comment"># $b</span>
                    <span class="hljs-comment"># First level.</span>
<span class="hljs-built_in">eval</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$a</span>        <span class="hljs-comment"># $c</span>
                    <span class="hljs-comment"># Second level.</span>
<span class="hljs-built_in">eval</span> <span class="hljs-built_in">eval</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$a</span>   <span class="hljs-comment"># d</span>
                    <span class="hljs-comment"># Third level.</span>

<span class="hljs-comment"># Thank you, E. Choroba.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p><a name="EVALEFF" id="EVALEFF"></a></p>
            <div class="EXAMPLE">
              <a name="EX43" id="EX43"></a>
              <p>
                <b>Example 15-11. Showing the effect of
                  <i class="FIRSTTERM">eval</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Exercising "eval" ...</span>

y=`<span class="hljs-built_in">eval</span> ls -l`  <span class="hljs-comment">#  Similar to y=`ls -l`</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$y</span>         <span class="hljs-comment">#+ but linefeeds removed because "echoed" variable is unquoted.</span>
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$y</span>"</span>       <span class="hljs-comment">#  Linefeeds preserved when variable is quoted.</span>

<span class="hljs-built_in">echo</span>; <span class="hljs-built_in">echo</span>

y=`<span class="hljs-built_in">eval</span> df`     <span class="hljs-comment">#  Similar to y=`df`</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$y</span>         <span class="hljs-comment">#+ but linefeeds removed.</span>

<span class="hljs-comment">#  When LF's not preserved, it may make it easier to parse output,</span>
<span class="hljs-comment">#+ using utilities such as "awk".</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"==========================================================="</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">eval</span> <span class="hljs-string">"`seq 3 | sed -e 's/.*/echo var&amp;=ABCDEFGHIJ/'`"</span>
<span class="hljs-comment"># var1=ABCDEFGHIJ</span>
<span class="hljs-comment"># var2=ABCDEFGHIJ</span>
<span class="hljs-comment"># var3=ABCDEFGHIJ</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"==========================================================="</span>
<span class="hljs-built_in">echo</span>


<span class="hljs-comment"># Now, showing how to do something useful with "eval" . . .</span>
<span class="hljs-comment"># (Thank you, E. Choroba!)</span>

version=3.4     <span class="hljs-comment">#  Can we split the version into major and minor</span>
                <span class="hljs-comment">#+ part in one command?</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"version = <span class="hljs-variable">$version</span>"</span>
<span class="hljs-built_in">eval</span> major=<span class="hljs-variable">${version/./;minor=}</span>     <span class="hljs-comment">#  Replaces '.' in version by ';minor='</span>
                                    <span class="hljs-comment">#  The substitution yields '3; minor=4'</span>
                                    <span class="hljs-comment">#+ so eval does minor=4, major=3</span>
<span class="hljs-built_in">echo</span> Major: <span class="hljs-variable">$major</span>, minor: <span class="hljs-variable">$minor</span>   <span class="hljs-comment">#  Major: 3, minor: 4</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="ARRCHOICE0" id="ARRCHOICE0"></a></p>
            <div class="EXAMPLE">
              <a name="ARRCHOICE" id="ARRCHOICE"></a>
              <p>
                <b>Example 15-12. Using <i class="FIRSTTERM">eval</i> to select
                  among variables</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># arr-choice.sh</span>

<span class="hljs-comment">#  Passing arguments to a function to select</span>
<span class="hljs-comment">#+ one particular variable out of a group.</span>

arr0=( 10 11 12 13 14 15 )
arr1=( 20 21 22 23 24 25 )
arr2=( 30 31 32 33 34 35 )
<span class="hljs-comment">#       0  1  2  3  4  5      Element number (zero-indexed)</span>


<span class="hljs-function"><span class="hljs-title">choose_array</span></span> ()
{
  <span class="hljs-built_in">eval</span> array_member=\<span class="hljs-variable">${arr${array_number}</span>[element_number]}
  <span class="hljs-comment">#                 ^       ^^^^^^^^^^^^</span>
  <span class="hljs-comment">#  Using eval to construct the name of a variable,</span>
  <span class="hljs-comment">#+ in this particular case, an array name.</span>

  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Element <span class="hljs-variable">$element_number</span> of array <span class="hljs-variable">$array_number</span> is <span class="hljs-variable">$array_member</span>"</span>
} <span class="hljs-comment">#  Function can be rewritten to take parameters.</span>

array_number=0    <span class="hljs-comment"># First array.</span>
element_number=3
choose_array      <span class="hljs-comment"># 13</span>

array_number=2    <span class="hljs-comment"># Third array.</span>
element_number=4
choose_array      <span class="hljs-comment"># 34</span>

array_number=3    <span class="hljs-comment"># Null array (arr3 not allocated).</span>
element_number=4
choose_array      <span class="hljs-comment"># (null)</span>

<span class="hljs-comment"># Thank you, Antonio Macchi, for pointing this out.</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="ECHOPARAMS" id="ECHOPARAMS"></a>
              <p>
                <b>Example 15-13. <i class="FIRSTTERM">Echoing</i> the
                  <i class="FIRSTTERM">command-line parameters</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># echo-params.sh</span>

<span class="hljs-comment"># Call this script with a few command-line parameters.</span>
<span class="hljs-comment"># For example:</span>
<span class="hljs-comment">#     sh echo-params.sh first second third fourth fifth</span>

params=<span class="hljs-variable">$#</span>              <span class="hljs-comment"># Number of command-line parameters.</span>
param=1                <span class="hljs-comment"># Start at first command-line param.</span>

<span class="hljs-keyword">while</span> [ <span class="hljs-string">"<span class="hljs-variable">$param</span>"</span> -le <span class="hljs-string">"<span class="hljs-variable">$params</span>"</span> ]
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Command-line parameter "</span>
  <span class="hljs-built_in">echo</span> -n \$<span class="hljs-variable">$param</span>     <span class="hljs-comment">#  Gives only the *name* of variable.</span>
<span class="hljs-comment">#         ^^^          #  $1, $2, $3, etc.</span>
                       <span class="hljs-comment">#  Why?</span>
                       <span class="hljs-comment">#  \$ escapes the first "$"</span>
                       <span class="hljs-comment">#+ so it echoes literally,</span>
                       <span class="hljs-comment">#+ and $param dereferences "$param" . . .</span>
                       <span class="hljs-comment">#+ . . . as expected.</span>
  <span class="hljs-built_in">echo</span> -n <span class="hljs-string">" = "</span>
  <span class="hljs-built_in">eval</span> <span class="hljs-built_in">echo</span> \$<span class="hljs-variable">$param</span>   <span class="hljs-comment">#  Gives the *value* of variable.</span>
<span class="hljs-comment"># ^^^^      ^^^        #  The "eval" forces the *evaluation*</span>
                       <span class="hljs-comment">#+ of \$$</span>
                       <span class="hljs-comment">#+ as an indirect variable reference.</span>

(( param ++ ))         <span class="hljs-comment"># On to the next.</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">exit</span> $?

<span class="hljs-comment"># =================================================</span>

$ sh echo-params.sh first second third fourth fifth
Command-line parameter <span class="hljs-variable">$1</span> = first
Command-line parameter <span class="hljs-variable">$2</span> = second
Command-line parameter <span class="hljs-variable">$3</span> = third
Command-line parameter <span class="hljs-variable">$4</span> = fourth
Command-line parameter <span class="hljs-variable">$5</span> = fifth</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="EX44" id="EX44"></a>
              <p><b>Example 15-14. Forcing a log-off</b></p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Killing ppp to force a log-off.</span>
<span class="hljs-comment"># For dialup connection, of course.</span>

<span class="hljs-comment"># Script should be run as root user.</span>

SERPORT=ttyS3
<span class="hljs-comment">#  Depending on the hardware and even the kernel version,</span>
<span class="hljs-comment">#+ the modem port on your machine may be different --</span>
<span class="hljs-comment">#+ /dev/ttyS1 or /dev/ttyS2.</span>


killppp=<span class="hljs-string">"eval kill -9 `ps ax | awk '/ppp/ { print <span class="hljs-variable">$1</span> }'`"</span>
<span class="hljs-comment">#                     -------- process ID of ppp -------  </span>

<span class="hljs-variable">$killppp</span>                     <span class="hljs-comment"># This variable is now a command.</span>


<span class="hljs-comment"># The following operations must be done as root user.</span>

chmod 666 /dev/<span class="hljs-variable">$SERPORT</span>      <span class="hljs-comment"># Restore r+w permissions, or else what?</span>
<span class="hljs-comment">#  Since doing a SIGKILL on ppp changed the permissions on the serial port,</span>
<span class="hljs-comment">#+ we restore permissions to previous state.</span>

rm /var/lock/LCK..<span class="hljs-variable">$SERPORT</span>   <span class="hljs-comment"># Remove the serial port lock file. Why?</span>

<span class="hljs-built_in">exit</span> $?

<span class="hljs-comment"># Exercises:</span>
<span class="hljs-comment"># ---------</span>
<span class="hljs-comment"># 1) Have script check whether root user is invoking it.</span>
<span class="hljs-comment"># 2) Do a check on whether the process to be killed</span>
<span class="hljs-comment">#+   is actually running before attempting to kill it.   </span>
<span class="hljs-comment"># 3) Write an alternate version of this script based on 'fuser':</span>
<span class="hljs-comment">#+      if [ fuser -s /dev/modem ]; then . . .</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="ROT14" id="ROT14"></a>
              <p>
                <b>Example 15-15. A version of <i class="FIRSTTERM">rot13</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># A version of "rot13" using 'eval'.</span>
<span class="hljs-comment"># Compare to "rot13.sh" example.</span>

setvar_rot_13()              <span class="hljs-comment"># "rot13" scrambling</span>
{
  <span class="hljs-built_in">local</span> varname=<span class="hljs-variable">$1</span> varvalue=<span class="hljs-variable">$2</span>
  <span class="hljs-built_in">eval</span> <span class="hljs-variable">$varname</span>=<span class="hljs-string">'$(echo "$varvalue" | tr a-z n-za-m)'</span>
}


setvar_rot_13 var <span class="hljs-string">"foobar"</span>   <span class="hljs-comment"># Run "foobar" through rot13.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$var</span>                    <span class="hljs-comment"># sbbone</span>

setvar_rot_13 var <span class="hljs-string">"<span class="hljs-variable">$var</span>"</span>     <span class="hljs-comment"># Run "sbbone" through rot13.</span>
                             <span class="hljs-comment"># Back to original variable.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$var</span>                    <span class="hljs-comment"># foobar</span>

<span class="hljs-comment"># This example by Stephane Chazelas.</span>
<span class="hljs-comment"># Modified by document author.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              Here is another example of using <i class="FIRSTTERM">eval</i> to
              <em>evaluate</em> a complex expression, this one from an earlier
              version of YongYe's
              <a href="https://github.com/yongye/shell/blob/master/Tetris_Game.sh" target="_top">Tetris game script</a>.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-built_in">eval</span> <span class="hljs-variable">${1}</span>+=\"<span class="hljs-variable">${x}</span> <span class="hljs-variable">${y}</span> \"</pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              <a href="contributed-scripts.html#SAMORSE">Example A-53</a> uses
              <i class="FIRSTTERM">eval</i> to convert
              <a href="arrays.html#ARRAYREF">array</a> elements into a command
              list.
            </p>
            <p>
              The <i class="FIRSTTERM">eval</i> command occurs in the older
              version of <a href="ivr.html#IVRREF">indirect referencing</a>.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-built_in">eval</span> var=\$<span class="hljs-variable">$var</span></pre>
                </td>
              </tr>
            </tbody></table>
            <div class="TIP">
              <table class="TIP" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <i class="FIRSTTERM">eval</i> command can be used to
                      <a href="bashver3.html#BRACEEXPREF3">parameterize
                        <i class="FIRSTTERM">brace expansion</i></a>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="EVALRISK" id="EVALRISK"></a></p>
            <div class="CAUTION">
              <table class="CAUTION" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/caution.gif" hspace="5" alt="Caution">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <b class="COMMAND">eval</b> command can be risky, and
                      normally should be avoided when there exists a reasonable
                      alternative. An
                      <tt class="USERINPUT"><b>eval $COMMANDS</b></tt> executes
                      the contents of
                      <tt class="REPLACEABLE"><i>COMMANDS</i></tt>, which may contain such unpleasant surprises as
                      <b class="COMMAND">rm -rf *</b>. Running an
                      <b class="COMMAND">eval</b> on unfamiliar code written by
                      persons unknown is living dangerously.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt><a name="SETREF" id="SETREF"></a><b class="COMMAND">set</b></dt>
          <dd>
            <p>
              The <b class="COMMAND">set</b> command changes the value of
              internal script variables/options. One use for this is to toggle
              <a href="options.html#OPTIONSREF">option flags</a> which help
              determine the behavior of the script. Another application for it
              is to reset the
              <a href="internalvariables.html#POSPARAMREF">positional parameters</a>
              that a script sees as the result of a command (<tt class="USERINPUT"><b>set `command`</b></tt>). The script can then parse the
              <a href="special-chars.html#FIELDREF">fields</a> of the command
              output.
            </p>
            <div class="EXAMPLE">
              <a name="EX34" id="EX34"></a>
              <p>
                <b>Example 15-16. Using <i class="FIRSTTERM">set</i> with
                  positional parameters</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># ex34.sh</span>
<span class="hljs-comment"># Script "set-test"</span>

<span class="hljs-comment"># Invoke this script with three command-line parameters,</span>
<span class="hljs-comment"># for example, "sh ex34.sh one two three".</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Positional parameters before  set \`uname -a\` :"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Command-line argument #1 = <span class="hljs-variable">$1</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Command-line argument #2 = <span class="hljs-variable">$2</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Command-line argument #3 = <span class="hljs-variable">$3</span>"</span>


<span class="hljs-built_in">set</span> `uname -a` <span class="hljs-comment"># Sets the positional parameters to the output</span>
               <span class="hljs-comment"># of the command `uname -a`</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> +++++
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$_</span>        <span class="hljs-comment"># +++++</span>
<span class="hljs-comment"># Flags set in script.</span>
<span class="hljs-built_in">echo</span> $-        <span class="hljs-comment"># hB</span>
<span class="hljs-comment">#                Anomalous behavior?</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Positional parameters after  set \`uname -a\` :"</span>
<span class="hljs-comment"># $1, $2, $3, etc. reinitialized to result of `uname -a`</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Field #1 of 'uname -a' = <span class="hljs-variable">$1</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Field #2 of 'uname -a' = <span class="hljs-variable">$2</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Field #3 of 'uname -a' = <span class="hljs-variable">$3</span>"</span>
<span class="hljs-built_in">echo</span> \<span class="hljs-comment">#\#\#</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$_</span>        <span class="hljs-comment"># ###</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>More fun with positional parameters.</p>
            <div class="EXAMPLE">
              <a name="REVPOSPARAMS" id="REVPOSPARAMS"></a>
              <p><b>Example 15-17. Reversing the positional parameters</b></p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># revposparams.sh: Reverse positional parameters.</span>
<span class="hljs-comment"># Script by Dan Jacobson, with stylistic revisions by document author.</span>


<span class="hljs-built_in">set</span> a\ b c d\ e;
<span class="hljs-comment">#     ^      ^     Spaces escaped </span>
<span class="hljs-comment">#       ^ ^        Spaces not escaped</span>
OIFS=<span class="hljs-variable">$IFS</span>; IFS=:;
<span class="hljs-comment">#              ^   Saving old IFS and setting new one.</span>

<span class="hljs-built_in">echo</span>

until [ <span class="hljs-variable">$#</span> -eq 0 ]
<span class="hljs-keyword">do</span>          <span class="hljs-comment">#      Step through positional parameters.</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"### k0 = "</span><span class="hljs-variable">$k</span><span class="hljs-string">""</span>     <span class="hljs-comment"># Before</span>
  k=<span class="hljs-variable">$1</span>:<span class="hljs-variable">$k</span>;  <span class="hljs-comment">#      Append each pos param to loop variable.</span>
<span class="hljs-comment">#     ^</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"### k = "</span><span class="hljs-variable">$k</span><span class="hljs-string">""</span>      <span class="hljs-comment"># After</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">shift</span>;
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">set</span> <span class="hljs-variable">$k</span>  <span class="hljs-comment">#  Set new positional parameters.</span>
<span class="hljs-built_in">echo</span> -
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$#</span> <span class="hljs-comment">#  Count of positional parameters.</span>
<span class="hljs-built_in">echo</span> -
<span class="hljs-built_in">echo</span>

<span class="hljs-keyword">for</span> i   <span class="hljs-comment">#  Omitting the "in list" sets the variable -- i --</span>
        <span class="hljs-comment">#+ to the positional parameters.</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>  <span class="hljs-comment"># Display new positional parameters.</span>
<span class="hljs-keyword">done</span>

IFS=<span class="hljs-variable">$OIFS</span>  <span class="hljs-comment"># Restore IFS.</span>

<span class="hljs-comment">#  Question:</span>
<span class="hljs-comment">#  Is it necessary to set an new IFS, internal field separator,</span>
<span class="hljs-comment">#+ in order for this script to work properly?</span>
<span class="hljs-comment">#  What happens if you don't? Try it.</span>
<span class="hljs-comment">#  And, why use the new IFS -- a colon -- in line 17,</span>
<span class="hljs-comment">#+ to append to the loop variable?</span>
<span class="hljs-comment">#  What is the purpose of this?</span>

<span class="hljs-built_in">exit</span> 0

$ ./revposparams.sh

<span class="hljs-comment">### k0 = </span>
<span class="hljs-comment">### k = a b</span>

<span class="hljs-comment">### k0 = a b</span>
<span class="hljs-comment">### k = c a b</span>

<span class="hljs-comment">### k0 = c a b</span>
<span class="hljs-comment">### k = d e c a b</span>

-
3
-

d e
c
a b</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              Invoking <b class="COMMAND">set</b> without any options or
              arguments simply lists all the
              <a href="othertypesv.html#ENVREF">environmental</a> and other
              variables that have been initialized.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">set</span></span>
AUTHORCOPY=/home/bozo/posts
 BASH=/bin/bash
 BASH_VERSION=$'2.05.8(1)-release'
 ...
 XAUTHORITY=/home/bozo/.Xauthority
 _=/etc/bashrc
 variable22=abc
 variable23=xzy
              </pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              Using <b class="COMMAND">set</b> with the
              <tt class="OPTION">--</tt> option explicitly assigns the contents
              of a variable to the positional parameters. If no variable follows
              the <tt class="OPTION">--</tt> it
              <i class="FIRSTTERM">unsets</i> the positional parameters.
            </p>
            <div class="EXAMPLE">
              <a name="SETPOS" id="SETPOS"></a>
              <p><b>Example 15-18. Reassigning the positional parameters</b></p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

variable=<span class="hljs-string">"one two three four five"</span>

<span class="hljs-built_in">set</span> -- <span class="hljs-variable">$variable</span>
<span class="hljs-comment"># Sets positional parameters to the contents of "$variable".</span>

first_param=<span class="hljs-variable">$1</span>
second_param=<span class="hljs-variable">$2</span>
<span class="hljs-built_in">shift</span>; <span class="hljs-built_in">shift</span>        <span class="hljs-comment"># Shift past first two positional params.</span>
<span class="hljs-comment"># shift 2             also works.</span>
remaining_params=<span class="hljs-string">"$*"</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"first parameter = <span class="hljs-variable">$first_param</span>"</span>             <span class="hljs-comment"># one</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"second parameter = <span class="hljs-variable">$second_param</span>"</span>           <span class="hljs-comment"># two</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"remaining parameters = <span class="hljs-variable">$remaining_params</span>"</span>   <span class="hljs-comment"># three four five</span>

<span class="hljs-built_in">echo</span>; <span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Again.</span>
<span class="hljs-built_in">set</span> -- <span class="hljs-variable">$variable</span>
first_param=<span class="hljs-variable">$1</span>
second_param=<span class="hljs-variable">$2</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"first parameter = <span class="hljs-variable">$first_param</span>"</span>             <span class="hljs-comment"># one</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"second parameter = <span class="hljs-variable">$second_param</span>"</span>           <span class="hljs-comment"># two</span>

<span class="hljs-comment"># ======================================================</span>

<span class="hljs-built_in">set</span> --
<span class="hljs-comment"># Unsets positional parameters if no variable specified.</span>

first_param=<span class="hljs-variable">$1</span>
second_param=<span class="hljs-variable">$2</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"first parameter = <span class="hljs-variable">$first_param</span>"</span>             <span class="hljs-comment"># (null value)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"second parameter = <span class="hljs-variable">$second_param</span>"</span>           <span class="hljs-comment"># (null value)</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              See also <a href="loops1.html#EX22A">Example 11-2</a> and
              <a href="extmisc.html#EX33A">Example 16-56</a>.
            </p>
          </dd>
          <dt>
            <a name="UNSETREF" id="UNSETREF"></a><b class="COMMAND">unset</b>
          </dt>
          <dd>
            <p>
              The <b class="COMMAND">unset</b> command deletes a shell variable,
              effectively setting it to <i class="FIRSTTERM">null</i>. Note that
              this command does not affect positional parameters.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">unset</span> PATH</span>
<span class="hljs-meta">
bash$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span></span>
<span class="hljs-meta">

bash$</span><span class="bash"> </span></pre>
                </td>
              </tr>
            </tbody></table>
            <div class="EXAMPLE">
              <a name="UNS" id="UNS"></a>
              <p>
                <b>Example 15-19. <span class="QUOTE">"Unsetting"</span> a
                  variable</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># unset.sh: Unsetting a variable.</span>

variable=hello                       <span class="hljs-comment">#  Initialized.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"variable = <span class="hljs-variable">$variable</span>"</span>

<span class="hljs-built_in">unset</span> variable                       <span class="hljs-comment">#  Unset.</span>
                                     <span class="hljs-comment">#  In this particular context,</span>
                                     <span class="hljs-comment">#+ same effect as:   variable=</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"(unset) variable = <span class="hljs-variable">$variable</span>"</span>  <span class="hljs-comment">#  $variable is null.</span>

<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$variable</span>"</span> ]                <span class="hljs-comment">#  Try a string-length test.</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\$variable has zero length."</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      In most contexts, an
                      <i class="FIRSTTERM">undeclared</i> variable and one that
                      has been <i class="FIRSTTERM">unset</i> are equivalent.
                      However, the
                      <a href="parameter-substitution.html#UNDDR">${parameter:-default}</a>
                      parameter substitution construct can distinguish between
                      the two.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="EXPORTREF" id="EXPORTREF"></a><b class="COMMAND">export</b>
          </dt>
          <dd>
            <p><a name="EXPORTREF2" id="EXPORTREF2"></a></p>
            <p>
              The <b class="COMMAND">export</b>
              <a name="AEN9199" href="#FTN.AEN9199" id="AEN9199"><span class="footnote">[4]</span></a>
              command makes available variables to all child processes of the
              running script or shell. One important use of the
              <b class="COMMAND">export</b> command is in
              <a href="files.html#FILESREF1">startup files</a>, to initialize
              and make accessible
              <a href="othertypesv.html#ENVREF">environmental variables</a> to
              subsequent user processes.
            </p>
            <div class="CAUTION">
              <table class="CAUTION" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/caution.gif" hspace="5" alt="Caution">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      Unfortunately,
                      <a href="gotchas.html#PARCHILDPROBREF">there is no way to export variables back to the parent
                        process</a>, to the process that called or invoked the script or
                      shell.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="EXPORTAWK" id="EXPORTAWK"></a></p>
            <div class="EXAMPLE">
              <a name="COLTOTALER3" id="COLTOTALER3"></a>
              <p>
                <b>Example 15-20. Using <i class="FIRSTTERM">export</i> to pass
                  a variable to an embedded
                  <i class="FIRSTTERM">awk</i> script</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment">#  Yet another version of the "column totaler" script (col-totaler.sh)</span>
<span class="hljs-comment">#+ that adds up a specified column (of numbers) in the target file.</span>
<span class="hljs-comment">#  This uses the environment to pass a script variable to 'awk' . . .</span>
<span class="hljs-comment">#+ and places the awk script in a variable.</span>


ARGS=2
E_WRONGARGS=85

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne <span class="hljs-string">"<span class="hljs-variable">$ARGS</span>"</span> ] <span class="hljs-comment"># Check for proper number of command-line args.</span>
<span class="hljs-keyword">then</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: `basename <span class="hljs-variable">$0</span>` filename column-number"</span>
   <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_WRONGARGS</span>
<span class="hljs-keyword">fi</span>

filename=<span class="hljs-variable">$1</span>
column_number=<span class="hljs-variable">$2</span>

<span class="hljs-comment">#===== Same as original script, up to this point =====#</span>

<span class="hljs-built_in">export</span> column_number
<span class="hljs-comment"># Export column number to environment, so it's available for retrieval.</span>


<span class="hljs-comment"># -----------------------------------------------</span>
awkscript=<span class="hljs-string">'{ total += $ENVIRON["column_number"] }
END { print total }'</span>
<span class="hljs-comment"># Yes, a variable can hold an awk script.</span>
<span class="hljs-comment"># -----------------------------------------------</span>

<span class="hljs-comment"># Now, run the awk script.</span>
awk <span class="hljs-string">"<span class="hljs-variable">$awkscript</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$filename</span>"</span>

<span class="hljs-comment"># Thanks, Stephane Chazelas.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="TIP">
              <table class="TIP no-border" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      It is possible to initialize and export variables in the
                      same operation, as in
                      <b class="COMMAND">export var1=xxx</b>.
                    </p>
                    <p>
                      However, as Greg Keraunen points out, in certain
                      situations this may have a different effect than setting a
                      variable, then exporting it.
                    </p>
                    <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
                      <tbody><tr>
                        <td>
                          <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">export</span> var=(a b); <span class="hljs-built_in">echo</span> <span class="hljs-variable">${var[0]}</span></span>
(a b)
<span class="hljs-meta">


bash$</span><span class="bash"> var=(a b); <span class="hljs-built_in">export</span> var; <span class="hljs-built_in">echo</span> <span class="hljs-variable">${var[0]}</span></span>
a
              </pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      A variable to be exported may require special treatment.
                      See <a href="sample-bashrc.html#BASHPROF">Example M-2</a>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="DECLARE2REF" id="DECLARE2REF"></a><b class="COMMAND">declare</b>, <b class="COMMAND">typeset</b>
          </dt>
          <dd>
            <p>
              The <a href="declareref.html">declare</a> and
              <a href="declareref.html">typeset</a> commands specify and/or
              restrict properties of variables.
            </p>
          </dd>
          <dt>
            <a name="READONLYREF" id="READONLYREF"></a><b class="COMMAND">readonly</b>
          </dt>
          <dd>
            <p>
              Same as <a href="declareref.html">declare -r</a>, sets a variable
              as read-only, or, in effect, as a constant. Attempts to change the
              variable fail with an error message. This is the shell analog of
              the <i class="FIRSTTERM">C</i> language
              <b class="COMMAND">const</b> type qualifier.
            </p>
          </dd>
          <dt>
            <a name="GETOPTSX" id="GETOPTSX"></a><b class="COMMAND">getopts</b>
          </dt>
          <dd>
            <p>
              This powerful tool parses command-line arguments passed to the
              script. This is the Bash analog of the
              <a href="extmisc.html#GETOPTY">getopt</a> external command and the
              <i class="FIRSTTERM">getopt</i> library function familiar to
              <i class="FIRSTTERM">C</i> programmers. It permits passing and
              concatenating multiple options
              <a name="AEN9289" href="#FTN.AEN9289" id="AEN9289"><span class="footnote">[5]</span></a>
              and associated arguments to a script (for example
              <tt class="USERINPUT"><b>scriptname -abc -e /usr/local</b></tt>).
            </p>
            <p><a name="GETOPTSOPT" id="GETOPTSOPT"></a></p>
            <p>
              The <b class="COMMAND">getopts</b> construct uses two implicit
              variables. <tt class="VARNAME">$OPTIND</tt> is the argument
              pointer (<i class="WORDASWORD">OPTion INDex</i>) and
              <tt class="VARNAME">$OPTARG</tt> (<i class="WORDASWORD">OPTion ARGument</i>) the (optional) argument attached to an option. A colon
              following the option name in the declaration tags that option as
              having an associated argument.
            </p>
            <p>
              A <b class="COMMAND">getopts</b> construct usually comes packaged
              in a <a href="loops1.html#WHILELOOPREF">while loop</a>, which
              processes the options and arguments one at a time, then increments
              the implicit <tt class="VARNAME">$OPTIND</tt> variable to point to
              the next.
            </p>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <ol type="1">
                      <li>
                        <p>
                          The arguments passed from the command-line to the
                          script must be preceded by a dash (<tt class="OPTION">-</tt>). It is the prefixed <tt class="OPTION">-</tt> that
                          lets <b class="COMMAND">getopts</b> recognize
                          command-line arguments as
                          <i class="FIRSTTERM">options</i>. In fact,
                          <b class="COMMAND">getopts</b> will not process
                          arguments without the prefixed
                          <tt class="OPTION">-</tt>, and will terminate option
                          processing at the first argument encountered lacking
                          them.
                        </p>
                      </li>
                      <li>
                        <p>
                          The <b class="COMMAND">getopts</b> template differs
                          slightly from the standard
                          <a href="loops1.html#WHILELOOPREF">while loop</a>, in
                          that it lacks condition brackets.
                        </p>
                      </li>
                      <li>
                        <p>
                          The <b class="COMMAND">getopts</b> construct is a
                          highly functional replacement for the traditional
                          <a href="extmisc.html#GETOPTY">getopt</a> external
                          command.
                        </p>
                      </li>
                    </ol>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-keyword">while</span> <span class="hljs-built_in">getopts</span> <span class="hljs-string">":abcde:fg"</span> Option
<span class="hljs-comment"># Initial declaration.</span>
<span class="hljs-comment"># a, b, c, d, e, f, and g are the options (flags) expected.</span>
<span class="hljs-comment"># The : after option 'e' shows it will have an argument passed with it.</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-keyword">case</span> <span class="hljs-variable">$Option</span> <span class="hljs-keyword">in</span>
    a ) <span class="hljs-comment"># Do something with variable 'a'.</span>
    b ) <span class="hljs-comment"># Do something with variable 'b'.</span>
    ...
    e)  <span class="hljs-comment"># Do something with 'e', and also with $OPTARG,</span>
        <span class="hljs-comment"># which is the associated argument passed with option 'e'.</span>
    ...
    g ) <span class="hljs-comment"># Do something with variable 'g'.</span>
  <span class="hljs-keyword">esac</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">shift</span> $((<span class="hljs-variable">$OPTIND</span> - <span class="hljs-number">1</span>))
<span class="hljs-comment"># Move argument pointer to next.</span>

<span class="hljs-comment"># All this is not nearly as complicated as it looks &lt;grin&gt;.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <div class="EXAMPLE">
              <a name="EX33" id="EX33"></a>
              <p>
                <b>Example 15-21. Using <i class="FIRSTTERM">getopts</i> to read
                  the options/arguments passed to a script</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># ex33.sh: Exercising getopts and OPTIND</span>
<span class="hljs-comment">#          Script modified 10/09/03 at the suggestion of Bill Gradwohl.</span>


<span class="hljs-comment"># Here we observe how 'getopts' processes command-line arguments to script.</span>
<span class="hljs-comment"># The arguments are parsed as "options" (flags) and associated arguments.</span>

<span class="hljs-comment"># Try invoking this script with:</span>
<span class="hljs-comment">#   'scriptname -mn'</span>
<span class="hljs-comment">#   'scriptname -oq qOption' (qOption can be some arbitrary string.)</span>
<span class="hljs-comment">#   'scriptname -qXXX -r'</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   'scriptname -qr'</span>
<span class="hljs-comment">#+      - Unexpected result, takes "r" as the argument to option "q"</span>
<span class="hljs-comment">#   'scriptname -q -r' </span>
<span class="hljs-comment">#+      - Unexpected result, same as above</span>
<span class="hljs-comment">#   'scriptname -mnop -mnop'  - Unexpected result</span>
<span class="hljs-comment">#   (OPTIND is unreliable at stating where an option came from.)</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  If an option expects an argument ("flag:"), then it will grab</span>
<span class="hljs-comment">#+ whatever is next on the command-line.</span>

NO_ARGS=0 
E_OPTERROR=85

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -eq <span class="hljs-string">"<span class="hljs-variable">$NO_ARGS</span>"</span> ]    <span class="hljs-comment"># Script invoked with no command-line args?</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: `basename <span class="hljs-variable">$0</span>` options (-mnopqrs)"</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_OPTERROR</span>          <span class="hljs-comment"># Exit and explain usage.</span>
                            <span class="hljs-comment"># Usage: scriptname -options</span>
                            <span class="hljs-comment"># Note: dash (-) necessary</span>
<span class="hljs-keyword">fi</span>  


<span class="hljs-keyword">while</span> <span class="hljs-built_in">getopts</span> <span class="hljs-string">":mnopq:rs"</span> Option
<span class="hljs-keyword">do</span>
  <span class="hljs-keyword">case</span> <span class="hljs-variable">$Option</span> <span class="hljs-keyword">in</span>
    m     ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Scenario #1: option -m-   [OPTIND=<span class="hljs-variable">${OPTIND}</span>]"</span>;;
    n | o ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Scenario #2: option -<span class="hljs-variable">$Option</span>-   [OPTIND=<span class="hljs-variable">${OPTIND}</span>]"</span>;;
    p     ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Scenario #3: option -p-   [OPTIND=<span class="hljs-variable">${OPTIND}</span>]"</span>;;
    q     ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Scenario #4: option -q-\
                  with argument \"<span class="hljs-variable">$OPTARG</span>\"   [OPTIND=<span class="hljs-variable">${OPTIND}</span>]"</span>;;
    <span class="hljs-comment">#  Note that option 'q' must have an associated argument,</span>
    <span class="hljs-comment">#+ otherwise it falls through to the default.</span>
    r | s ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Scenario #5: option -<span class="hljs-variable">$Option</span>-"</span>;;
    *     ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Unimplemented option chosen."</span>;;   <span class="hljs-comment"># Default.</span>
  <span class="hljs-keyword">esac</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">shift</span> $((<span class="hljs-variable">$OPTIND</span> - <span class="hljs-number">1</span>))
<span class="hljs-comment">#  Decrements the argument pointer so it points to next argument.</span>
<span class="hljs-comment">#  $1 now references the first non-option item supplied on the command-line</span>
<span class="hljs-comment">#+ if one exists.</span>

<span class="hljs-built_in">exit</span> $?

<span class="hljs-comment">#   As Bill Gradwohl states,</span>
<span class="hljs-comment">#  "The getopts mechanism allows one to specify:  scriptname -mnop -mnop</span>
<span class="hljs-comment">#+  but there is no reliable way to differentiate what came</span>
<span class="hljs-comment">#+ from where by using OPTIND."</span>
<span class="hljs-comment">#  There are, however, workarounds.</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
        </dl>
      </div>
      <div class="VARIABLELIST">
        <p>
          <b><a name="INTSCRBEH1" id="INTSCRBEH1"></a>Script Behavior</b>
        </p>
        <dl>
          <dt>
            <a name="SOURCEREF" id="SOURCEREF"></a><b class="COMMAND">source</b>, <span class="TOKEN">.</span> (<a href="special-chars.html#DOTREF">dot</a>
            command)
          </dt>
          <dd>
            <p>
              This command, when invoked from the command-line, executes a
              script. Within a script, a
              <tt class="USERINPUT"><b>source file-name</b></tt> loads the file
              <tt class="FILENAME">file-name</tt>.
              <i class="FIRSTTERM">Sourcing</i> a file (dot-command)
              <i class="FIRSTTERM">imports</i> code into the script, appending
              to the script (same effect as the
              <tt class="USERINPUT"><b>#include</b></tt> directive in a
              <i class="FIRSTTERM">C</i> program). The net result is the same as
              if the <span class="QUOTE">"sourced"</span> lines of code were
              physically present in the body of the script. This is useful in
              situations when multiple scripts use a common data file or
              function library.
            </p>
            <div class="EXAMPLE">
              <a name="EX38" id="EX38"></a>
              <p>
                <b>Example 15-22. <span class="QUOTE">"Including"</span> a data
                  file</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment">#  Note that this example must be invoked with bash, i.e., bash ex38.sh</span>
<span class="hljs-comment">#+ not  sh ex38.sh !</span>

. data-file    <span class="hljs-comment"># Load a data file.</span>
<span class="hljs-comment"># Same effect as "source data-file", but more portable.</span>

<span class="hljs-comment">#  The file "data-file" must be present in current working directory,</span>
<span class="hljs-comment">#+ since it is referred to by its basename.</span>

<span class="hljs-comment"># Now, let's reference some data from that file.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"variable1 (from data-file) = <span class="hljs-variable">$variable1</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"variable3 (from data-file) = <span class="hljs-variable">$variable3</span>"</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"sum = <span class="hljs-variable">$variable2</span> + <span class="hljs-variable">$variable4</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Sum of variable2 + variable4 (from data-file) = <span class="hljs-variable">$sum</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"message1 (from data-file) is \"<span class="hljs-variable">$message1</span>\""</span>
<span class="hljs-comment">#                                  Escaped quotes</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"message2 (from data-file) is \"<span class="hljs-variable">$message2</span>\""</span>

print_message This is the message-print <span class="hljs-keyword">function</span> <span class="hljs-keyword">in</span> the data-file.


<span class="hljs-built_in">exit</span> $?</pre>
                  </td>
                </tr>
              </tbody></table>
              <p>
                File <tt class="FILENAME">data-file</tt> for
                <a href="internal.html#EX38">Example 15-22</a>, above. Must be
                present in same directory.
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># This is a data file loaded by a script.</span>
<span class="hljs-comment"># Files of this type may contain variables, functions, etc.</span>
<span class="hljs-comment"># It loads with a 'source' or '.' command from a shell script.</span>

<span class="hljs-comment"># Let's initialize some variables.</span>

variable1=23
variable2=474
variable3=5
variable4=97

message1=<span class="hljs-string">"Greetings from *** line <span class="hljs-variable">$LINENO</span> *** of the data file!"</span>
message2=<span class="hljs-string">"Enough for now. Goodbye."</span>

<span class="hljs-function"><span class="hljs-title">print_message</span></span> ()
{   <span class="hljs-comment"># Echoes any message passed to it.</span>

  <span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]
  <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">return</span> 1 <span class="hljs-comment"># Error, if argument missing.</span>
  <span class="hljs-keyword">fi</span>

  <span class="hljs-built_in">echo</span>

  until [ -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]
  <span class="hljs-keyword">do</span>             <span class="hljs-comment"># Step through arguments passed to function.</span>
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-comment"># Echo args one at a time, suppressing line feeds.</span>
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">" "</span>  <span class="hljs-comment"># Insert spaces between words.</span>
    <span class="hljs-built_in">shift</span>        <span class="hljs-comment"># Next one.</span>
  <span class="hljs-keyword">done</span>  

  <span class="hljs-built_in">echo</span>

  <span class="hljs-built_in">return</span> 0
}</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              If the <i class="FIRSTTERM">sourced</i> file is itself an
              executable script, then it will run, then return control to the
              script that called it. A
              <i class="FIRSTTERM">sourced</i> executable script may use a
              <a href="complexfunct.html#RETURNREF">return</a> for this purpose.
            </p>
            <p><a name="SOURCEPARAMS" id="SOURCEPARAMS"></a></p>
            <p>
              Arguments may be (optionally) passed to the
              <i class="FIRSTTERM">sourced</i> file as
              <a href="othertypesv.html#POSPARAMREF1">positional parameters</a>.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-built_in">source</span> <span class="hljs-variable">$filename</span> <span class="hljs-variable">$arg1</span> arg2</pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              It is even possible for a script to
              <i class="FIRSTTERM">source</i> itself, though this does not seem
              to have any practical applications.
            </p>
            <div class="EXAMPLE">
              <a name="SELFSOURCE" id="SELFSOURCE"></a>
              <p>
                <b>Example 15-23. A (useless) script that sources itself</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># self-source.sh: a script sourcing itself "recursively."</span>
<span class="hljs-comment"># From "Stupid Script Tricks," Volume II.</span>

MAXPASSCNT=100    <span class="hljs-comment"># Maximum number of execution passes.</span>

<span class="hljs-built_in">echo</span> -n  <span class="hljs-string">"<span class="hljs-variable">$pass_count</span>  "</span>
<span class="hljs-comment">#  At first execution pass, this just echoes two blank spaces,</span>
<span class="hljs-comment">#+ since $pass_count still uninitialized.</span>

<span class="hljs-built_in">let</span> <span class="hljs-string">"pass_count += 1"</span>
<span class="hljs-comment">#  Assumes the uninitialized variable $pass_count</span>
<span class="hljs-comment">#+ can be incremented the first time around.</span>
<span class="hljs-comment">#  This works with Bash and pdksh, but</span>
<span class="hljs-comment">#+ it relies on non-portable (and possibly dangerous) behavior.</span>
<span class="hljs-comment">#  Better would be to initialize $pass_count to 0 before incrementing.</span>

<span class="hljs-keyword">while</span> [ <span class="hljs-string">"<span class="hljs-variable">$pass_count</span>"</span> -le <span class="hljs-variable">$MAXPASSCNT</span> ]
<span class="hljs-keyword">do</span>
  . <span class="hljs-variable">$0</span>   <span class="hljs-comment"># Script "sources" itself, rather than calling itself.</span>
         <span class="hljs-comment"># ./$0 (which would be true recursion) doesn't work here. Why?</span>
<span class="hljs-keyword">done</span>  

<span class="hljs-comment">#  What occurs here is not actually recursion,</span>
<span class="hljs-comment">#+ since the script effectively "expands" itself, i.e.,</span>
<span class="hljs-comment">#+ generates a new section of code</span>
<span class="hljs-comment">#+ with each pass through the 'while' loop',</span>
<span class="hljs-comment">#  with each 'source' in line 20.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  Of course, the script interprets each newly 'sourced' "#!" line</span>
<span class="hljs-comment">#+ as a comment, and not as the start of a new script.</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">exit</span> 0   <span class="hljs-comment"># The net effect is counting from 1 to 100.</span>
         <span class="hljs-comment"># Very impressive.</span>

<span class="hljs-comment"># Exercise:</span>
<span class="hljs-comment"># --------</span>
<span class="hljs-comment"># Write a script that uses this trick to actually do something useful.</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="EXITREF" id="EXITREF"></a><b class="COMMAND">exit</b>
          </dt>
          <dd>
            <p>
              Unconditionally terminates a script.
              <a name="AEN9393" href="#FTN.AEN9393" id="AEN9393"><span class="footnote">[6]</span></a>
              The <b class="COMMAND">exit</b> command may optionally take an
              integer argument, which is returned to the shell as the
              <a href="exit-status.html#EXITSTATUSREF">exit status</a> of the
              script. It is good practice to end all but the simplest scripts
              with an <tt class="USERINPUT"><b>exit 0</b></tt>, indicating a successful run.
            </p>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      If a script terminates with an
                      <b class="COMMAND">exit</b> lacking an argument, the exit
                      status of the script is the exit status of the last
                      command executed in the script, not counting the
                      <b class="COMMAND">exit</b>. This is equivalent to an
                      <b class="COMMAND">exit $?</b>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      An <b class="COMMAND">exit</b> command may also be used to
                      terminate a
                      <a href="subshells.html#SUBSHELLSREF">subshell</a>.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="EXECREF" id="EXECREF"></a><b class="COMMAND">exec</b>
          </dt>
          <dd>
            <p>
              This shell builtin replaces the current process with a specified
              command. Normally, when the shell encounters a command, it
              <a href="internal.html#FORKREF">forks off</a> a child process to
              actually execute the command. Using the
              <b class="COMMAND">exec</b> builtin, the shell does not fork, and
              the command <i class="FIRSTTERM">exec</i>'ed replaces the shell.
              When used in a script, therefore, it forces an exit from the
              script when the <b class="COMMAND">exec</b>'ed command terminates.
              <a name="AEN9425" href="#FTN.AEN9425" id="AEN9425"><span class="footnote">[7]</span></a>
            </p>
            <div class="EXAMPLE">
              <a name="EX54" id="EX54"></a>
              <p>
                <b>Example 15-24. Effects of <i class="FIRSTTERM">exec</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">exec</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"Exiting \"<span class="hljs-variable">$0</span>\" at line <span class="hljs-variable">$LINENO</span>."</span>   <span class="hljs-comment"># Exit from script here.</span>
<span class="hljs-comment"># $LINENO is an internal Bash variable set to the line number it's on.</span>

<span class="hljs-comment"># ----------------------------------</span>
<span class="hljs-comment"># The following lines never execute.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"This echo fails to echo."</span>

<span class="hljs-built_in">exit</span> 99                       <span class="hljs-comment">#  This script will not exit here.</span>
                              <span class="hljs-comment">#  Check exit value after script terminates</span>
                              <span class="hljs-comment">#+ with an 'echo $?'.</span>
                              <span class="hljs-comment">#  It will *not* be 99.</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="SELFEXEC" id="SELFEXEC"></a>
              <p>
                <b>Example 15-25. A script that
                  <i class="FIRSTTERM">exec's</i> itself</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># self-exec.sh</span>

<span class="hljs-comment"># Note: Set permissions on this script to 555 or 755,</span>
<span class="hljs-comment">#       then call it with ./self-exec.sh or sh ./self-exec.sh.</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"This line appears ONCE in the script, yet it keeps echoing."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"The PID of this instance of the script is still $$."</span>
<span class="hljs-comment">#     Demonstrates that a subshell is not forked off.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"==================== Hit Ctl-C to exit ===================="</span>

sleep 1

<span class="hljs-built_in">exec</span> <span class="hljs-variable">$0</span>   <span class="hljs-comment">#  Spawns another instance of this same script</span>
          <span class="hljs-comment">#+ that replaces the previous one.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"This line will never echo!"</span>  <span class="hljs-comment"># Why not?</span>

<span class="hljs-built_in">exit</span> 99                            <span class="hljs-comment"># Will not exit here!</span>
                                   <span class="hljs-comment"># Exit code will not be 99!</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              An <b class="COMMAND">exec</b> also serves to
              <a href="x17974.html#USINGEXECREF">reassign file descriptors</a>.
              For example,
              <tt class="USERINPUT"><b>exec &lt;zzz-file</b></tt> replaces
              <tt class="FILENAME">stdin</tt> with the file
              <tt class="FILENAME">zzz-file</tt>.
            </p>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <tt class="OPTION">-exec</tt> option to
                      <a href="moreadv.html#FINDREF">find</a> is
                      <tt class="REPLACEABLE"><i>not</i></tt> the same as the
                      <b class="COMMAND">exec</b> shell builtin.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="SHOPTREF" id="SHOPTREF"></a><b class="COMMAND">shopt</b>
          </dt>
          <dd>
            <p>
              This command permits changing
              <i class="FIRSTTERM">shell options</i> on the fly (see
              <a href="aliases.html#AL">Example 25-1</a> and
              <a href="aliases.html#UNAL">Example 25-2</a>). It often appears in
              the Bash <a href="files.html#FILESREF1">startup files</a>, but
              also has its uses in scripts. Needs
              <a href="bashver2.html#BASH2REF">version 2</a> or later of Bash.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-built_in">shopt</span> -s cdspell
<span class="hljs-comment"># Allows minor misspelling of directory names with 'cd'</span>
<span class="hljs-comment"># Option -s sets, -u unsets.</span>

<span class="hljs-built_in">cd</span> /hpme  <span class="hljs-comment"># Oops! Mistyped '/home'.</span>
<span class="hljs-built_in">pwd</span>       <span class="hljs-comment"># /home</span>
          <span class="hljs-comment"># The shell corrected the misspelling.</span></pre>
                </td>
              </tr>
            </tbody></table>
          </dd>
          <dt>
            <b class="COMMAND">caller</b><a name="CALLERREF" id="CALLERREF"></a>
          </dt>
          <dd>
            <p>
              Putting a <b class="COMMAND">caller</b> command inside a
              <a href="functions.html#FUNCTIONREF">function</a> echoes to
              <tt class="FILENAME">stdout</tt> information about the
              <i class="FIRSTTERM">caller</i> of that function.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-function"><span class="hljs-title">function1</span></span> ()
{
  <span class="hljs-comment"># Inside function1 ().</span>
  <span class="hljs-built_in">caller</span> 0   <span class="hljs-comment"># Tell me about it.</span>
}

function1    <span class="hljs-comment"># Line 9 of script.</span>

<span class="hljs-comment"># 9 main test.sh</span>
<span class="hljs-comment"># ^                 Line number that the function was called from.</span>
<span class="hljs-comment">#   ^^^^            Invoked from "main" part of script.</span>
<span class="hljs-comment">#        ^^^^^^^    Name of calling script.</span>

<span class="hljs-built_in">caller</span> 0     <span class="hljs-comment"># Has no effect because it's not inside a function.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              A <b class="COMMAND">caller</b> command can also return
              <i class="FIRSTTERM">caller</i> information from a script
              <a href="internal.html#SOURCEREF">sourced</a> within another
              script. Analogous to a function, this is a
              <span class="QUOTE">"subroutine call."</span>
            </p>
            <p>You may find this command useful in debugging.</p>
          </dd>
        </dl>
      </div>
      <div class="VARIABLELIST">
        <p>
          <b><a name="INTCOMMAND1" id="INTCOMMAND1"></a>Commands</b>
        </p>
        <dl>
          <dt>
            <a name="TRUEREF" id="TRUEREF"></a><b class="COMMAND">true</b>
          </dt>
          <dd>
            <p>
              A command that returns a successful (<span class="RETURNVALUE">zero</span>) <a href="exit-status.html#EXITSTATUSREF">exit status</a>, but
              does nothing else.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-literal">true</span></span>
<span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">echo</span> $?</span>
0
              </pre>
                </td>
              </tr>
            </tbody></table>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># Endless loop</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>   <span class="hljs-comment"># alias for ":"</span>
<span class="hljs-keyword">do</span>
   operation-1
   operation-2
   ...
   operation-n
   <span class="hljs-comment"># Need a way to break out of loop or script will hang.</span>
<span class="hljs-keyword">done</span></pre>
                </td>
              </tr>
            </tbody></table>
          </dd>
          <dt>
            <a name="FALSEREF" id="FALSEREF"></a><b class="COMMAND">false</b>
          </dt>
          <dd>
            <p>
              A command that returns an unsuccessful
              <a href="exit-status.html#EXITSTATUSREF">exit status</a>, but does
              nothing else.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-literal">false</span></span>
<span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">echo</span> $?</span>
1
              </pre>
                </td>
              </tr>
            </tbody></table>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># Testing "false" </span>
<span class="hljs-keyword">if</span> <span class="hljs-literal">false</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"false evaluates \"true\""</span>
<span class="hljs-keyword">else</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"false evaluates \"false\""</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-comment"># false evaluates "false"</span>


<span class="hljs-comment"># Looping while "false" (null loop)</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">false</span>
<span class="hljs-keyword">do</span>
   <span class="hljs-comment"># The following code will not execute.</span>
   operation-1
   operation-2
   ...
   operation-n
   <span class="hljs-comment"># Nothing happens!</span>
<span class="hljs-keyword">done</span>   </pre>
                </td>
              </tr>
            </tbody></table>
          </dd>
          <dt>
            <a name="TYPEREF" id="TYPEREF"></a><b class="COMMAND">type [cmd]</b>
          </dt>
          <dd>
            <p>
              Similar to the
              <a href="filearchiv.html#WHICHREF">which</a> external command,
              <b class="COMMAND">type cmd</b> identifies
              <span class="QUOTE">"cmd."</span> Unlike
              <b class="COMMAND">which</b>, <b class="COMMAND">type</b> is a
              Bash builtin. The useful <tt class="OPTION">-a</tt> option to
              <b class="COMMAND">type</b> identifies
              <tt class="REPLACEABLE"><i>keywords</i></tt> and
              <tt class="REPLACEABLE"><i>builtins</i></tt>, and also locates system commands with identical names.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">type</span> <span class="hljs-string">'['</span></span>
[ is a shell builtin
<span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">type</span> -a <span class="hljs-string">'['</span></span>
[ is a shell builtin
 [ is /usr/bin/[
<span class="hljs-meta">

bash$</span><span class="bash"> <span class="hljs-built_in">type</span> <span class="hljs-built_in">type</span></span>
type is a shell builtin
              </pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              The <b class="COMMAND">type</b> command can be useful for
              <a href="special-chars.html#DEVNULLREDIRECT">testing whether a certain command exists</a>.
            </p>
          </dd>
          <dt>
            <a name="HASHCMDREF" id="HASHCMDREF"></a><b class="COMMAND">hash [cmds]</b>
          </dt>
          <dd>
            <p>
              Records the <i class="FIRSTTERM">path</i> name of specified
              commands -- in the shell <i class="FIRSTTERM">hash table</i>
              <a name="AEN9591" href="#FTN.AEN9591" id="AEN9591"><span class="footnote">[8]</span></a>
              -- so the shell or script will not need to search the
              <a href="internalvariables.html#PATHREF">$PATH</a> on subsequent
              calls to those commands. When <b class="COMMAND">hash</b> is
              called with no arguments, it simply lists the commands that have
              been hashed. The <tt class="OPTION">-r</tt> option resets the hash
              table.
            </p>
          </dd>
          <dt>
            <a name="BINDREF" id="BINDREF"></a><b class="COMMAND">bind</b>
          </dt>
          <dd>
            <p>
              The <b class="COMMAND">bind</b> builtin displays or modifies
              <i class="FIRSTTERM">readline</i>
              <a name="AEN9621" href="#FTN.AEN9621" id="AEN9621"><span class="footnote">[9]</span></a>
              key bindings.
            </p>
          </dd>
          <dt>
            <a name="HELPREF" id="HELPREF"></a><b class="COMMAND">help</b>
          </dt>
          <dd>
            <p>
              Gets a short usage summary of a shell builtin. This is the
              counterpart to <a href="filearchiv.html#WHATISREF">whatis</a>, but
              for builtins. The display of
              <i class="FIRSTTERM">help</i> information got a much-needed update
              in the <a href="bashver4.html#BASH4REF">version 4 release</a> of
              Bash.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">help</span> <span class="hljs-built_in">exit</span></span>
exit: exit [n]
    Exit the shell with a status of N.  If N is omitted, the exit status
    is that of the last command executed.
              </pre>
                </td>
              </tr>
            </tbody></table>
          </dd>
        </dl>
      </div>
    </div>
    <h3 class="FOOTNOTES">Notes</h3>
    <table border="0" class="FOOTNOTES" width="100%">
      <tbody><tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN8607" href="internal.html#AEN8607" id="FTN.AEN8607"><span class="footnote">[1]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            As Nathan Coulter points out, "while forking a process is a low-cost
            operation, executing a new program in the newly-forked child process
            adds more overhead."
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN8650" href="internal.html#AEN8650" id="FTN.AEN8650"><span class="footnote">[2]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            An exception to this is the
            <a href="timedate.html#TIMREF">time</a> command, listed in the
            official Bash documentation as a keyword (<span class="QUOTE">"reserved word"</span>).
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9009" href="internal.html#AEN9009" id="FTN.AEN9009"><span class="footnote">[3]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            Note that <i class="FIRSTTERM">let</i>
            <a href="gotchas.html#LETBAD">cannot be used for setting
              <i class="FIRSTTERM">string</i> variables.</a>
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9199" href="internal.html#AEN9199" id="FTN.AEN9199"><span class="footnote">[4]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            To <i class="FIRSTTERM">Export</i> information is to make it
            available in a more general context. See also
            <a href="subshells.html#SCOPEREF">scope</a>.
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9289" href="internal.html#AEN9289" id="FTN.AEN9289"><span class="footnote">[5]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            An <i class="FIRSTTERM">option</i> is an argument that acts as a
            flag, switching script behaviors on or off. The argument associated
            with a particular option indicates the behavior that the option
            (flag) switches on or off.
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9393" href="internal.html#AEN9393" id="FTN.AEN9393"><span class="footnote">[6]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            Technically, an <b class="COMMAND">exit</b> only terminates the
            process (or shell) in which it is running, <em>not</em> the
            <i class="FIRSTTERM">parent process</i>.
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9425" href="internal.html#AEN9425" id="FTN.AEN9425"><span class="footnote">[7]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            Unless the <b class="COMMAND">exec</b> is used to
            <a href="x17974.html#USINGEXECREF">reassign file descriptors</a>.
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9591" href="internal.html#AEN9591" id="FTN.AEN9591"><span class="footnote">[8]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p><a name="HASHREF" id="HASHREF"></a></p>
          <p>
            <i class="FIRSTTERM">Hashing</i> is a method of creating lookup keys
            for data stored in a table. The <em>data items themselves</em> are
            <span class="QUOTE">"scrambled"</span> to create keys, using one of
            a number of simple mathematical
            <i class="FIRSTTERM">algorithms</i> (methods, or recipes).
          </p>
          <p>
            An advantage of <i class="FIRSTTERM">hashing</i> is that it is fast.
            A disadvantage is that <i class="FIRSTTERM">collisions</i> -- where
            a single key maps to more than one data item -- are possible.
          </p>
          <p>
            For examples of hashing see
            <a href="contributed-scripts.html#HASHLIB">Example A-20</a> and
            <a href="contributed-scripts.html#HASHEXAMPLE">Example A-21</a>.
          </p>
        </td>
      </tr>
      <tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN9621" href="internal.html#AEN9621" id="FTN.AEN9621"><span class="footnote">[9]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            <a name="READLINEREF" id="READLINEREF"></a>The
            <i class="FIRSTTERM">readline</i> library is what Bash uses for
            reading input in an interactive shell.
          </p>
        </td>
      </tr>
    </tbody></table>
    <div class="NAVFOOTER">
      <hr align="left" width="100%">
      <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
          <td width="33%" align="left" valign="top">
            <a href="part4.html" accesskey="P">Prev</a>
          </td>
          <td width="34%" align="center" valign="top">
            <a href="index.html" accesskey="H">Home</a>
          </td>
          <td width="33%" align="right" valign="top">
            <a href="x9644.html" accesskey="N">Next</a>
          </td>
        </tr>
        <tr>
          <td width="33%" align="left" valign="top">Commands</td>
          <td width="34%" align="center" valign="top">
            <a href="part4.html" accesskey="U">Up</a>
          </td>
          <td width="33%" align="right" valign="top">Job Control Commands</td>
        </tr>
      </tbody></table>
    </div>
  

<button id="theme-toggle">Toggle theme</button></body></html>
