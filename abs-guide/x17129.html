<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
  <title>A Brief Introduction to Regular Expressions</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
  <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
  <link rel="UP" title="Regular Expressions" href="regexp.html">
  <link rel="PREVIOUS" title="Regular Expressions" href="regexp.html">
  <link rel="NEXT" title="Globbing" href="globbingref.html">
</head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
      </tr>
      <tr>
        <td width="10%" align="left" valign="bottom"><a href="regexp.html" accesskey="P">Prev</a></td>
        <td width="80%" align="center" valign="bottom">Chapter 18. Regular Expressions</td>
        <td width="10%" align="right" valign="bottom"><a href="globbingref.html" accesskey="N">Next</a></td>
      </tr>
    </table>
    <hr align="left" width="100%">
  </div>
  <div class="SECT1">
    <h1 class="SECT1"><a name="AEN17129" id="AEN17129"></a>18.1. A Brief Introduction to Regular Expressions</h1>
    <p>An expression is a string of characters. Those characters having an interpretation above and beyond their literal meaning are called <i class="FIRSTTERM">metacharacters</i>. A quote symbol, for example, may denote speech by a person, <i class="FIRSTTERM">ditto</i>, or a meta-meaning <a name="AEN17134" href="#FTN.AEN17134" id="AEN17134"><span class="footnote">[1]</span></a> for the symbols that follow. Regular Expressions are sets of characters and/or metacharacters that match (or specify) patterns.</p>
    <p>A Regular Expression contains one or more of the following:</p>
    <ul>
      <li>
        <p><i class="FIRSTTERM">A character set</i>. These are the characters retaining their literal meaning. The simplest type of Regular Expression consists <em>only</em> of a character set, with no metacharacters.</p>
      </li>
      <li>
        <p><a name="ANCHORREF" id="ANCHORREF"></a></p>
        <p><i class="FIRSTTERM">An anchor</i>. These designate (<i class="FIRSTTERM">anchor</i>) the position in the line of text that the RE is to match. For example, <span class="TOKEN">^</span>, and <span class="TOKEN">$</span> are anchors.</p>
      </li>
      <li>
        <p><i class="FIRSTTERM">Modifiers</i>. These expand or narrow (<i class="FIRSTTERM">modify</i>) the range of text the RE is to match. Modifiers include the asterisk, brackets, and the backslash.</p>
      </li>
    </ul>
    <p>The main uses for Regular Expressions (<i class="FIRSTTERM">RE</i>s) are text searches and string manipulation. An RE <i class="FIRSTTERM">matches</i> a single character or a set of characters -- a string or a part of a string.</p>
    <ul>
      <li>
        <p><a name="ASTERISKREG" id="ASTERISKREG"></a>The asterisk -- <span class="TOKEN">*</span> -- matches any number of repeats of the character string or RE preceding it, including <em>zero</em> instances.</p>
        <p><span class="QUOTE">"1133*"</span> matches <tt class="REPLACEABLE"><i>11 + one or more 3's</i></tt>: <tt class="REPLACEABLE"><i>113</i></tt>, <tt class="REPLACEABLE"><i>1133</i></tt>, <tt class="REPLACEABLE"><i>1133333</i></tt>, and so forth.</p>
      </li>
      <li>
        <p><a name="REGEXDOT" id="REGEXDOT"></a>The <i class="FIRSTTERM">dot</i> -- <span class="TOKEN">.</span> -- matches any one character, except a newline. <a name="AEN17189" href="#FTN.AEN17189" id="AEN17189"><span class="footnote">[2]</span></a></p>
        <p><span class="QUOTE">"13."</span> matches <tt class="REPLACEABLE"><i>13 + at least one of any character (including a space)</i></tt>: <tt class="REPLACEABLE"><i>1133</i></tt>, <tt class="REPLACEABLE"><i>11333</i></tt>, but not <tt class="REPLACEABLE"><i>13</i></tt> (additional character missing).</p>
        <p>See <a href="textproc.html#CWSOLVER">Example 16-18</a> for a demonstration of <i class="FIRSTTERM">dot single-character</i> matching.</p>
      </li>
      <li>
        <p><a name="CARETREF" id="CARETREF"></a>The caret -- <span class="TOKEN">^</span> -- matches the beginning of a line, but sometimes, depending on context, negates the meaning of a set of characters in an RE.</p>
      </li>
      <li>
        <p><a name="DOLLARSIGNREF" id="DOLLARSIGNREF"></a></p>
        <p>The dollar sign -- <span class="TOKEN">$</span> -- at the end of an RE matches the end of a line.</p>
        <p><span class="QUOTE">"XXX$"</span> matches <span class="TOKEN">XXX</span> at the end of a line.</p>
        <p><span class="QUOTE">"^$"</span> matches blank lines.</p>
      </li>
      <li>
        <p><a name="BRACKETSREF" id="BRACKETSREF"></a></p>
        <p>Brackets -- <span class="TOKEN">[...]</span> -- enclose a set of characters to match in a single RE.</p>
        <p><span class="QUOTE">"[xyz]"</span> matches any one of the characters <tt class="REPLACEABLE"><i>x</i></tt>, <tt class="REPLACEABLE"><i>y</i></tt>, or <tt class="REPLACEABLE"><i>z</i></tt>.</p>
        <p><span class="QUOTE">"[c-n]"</span> matches any one of the characters in the range <tt class="REPLACEABLE"><i>c</i></tt> to <tt class="REPLACEABLE"><i>n</i></tt>.</p>
        <p><span class="QUOTE">"[B-Pk-y]"</span> matches any one of the characters in the ranges <tt class="REPLACEABLE"><i>B</i></tt> to <tt class="REPLACEABLE"><i>P</i></tt> and <tt class="REPLACEABLE"><i>k</i></tt> to <tt class="REPLACEABLE"><i>y</i></tt>.</p>
        <p><span class="QUOTE">"[a-z0-9]"</span> matches any single lowercase letter or any digit.</p>
        <p><span class="QUOTE">"[^b-d]"</span> matches any character <em>except</em> those in the range <tt class="REPLACEABLE"><i>b</i></tt> to <tt class="REPLACEABLE"><i>d</i></tt>. This is an instance of <span class="TOKEN">^</span> negating or inverting the meaning of the following RE (taking on a role similar to <span class="TOKEN">!</span> in a different context).</p>
        <p>Combined sequences of bracketed characters match common word patterns. <span class="QUOTE">"[Yy][Ee][Ss]"</span> matches <tt class="REPLACEABLE"><i>yes</i></tt>, <tt class="REPLACEABLE"><i>Yes</i></tt>, <tt class="REPLACEABLE"><i>YES</i></tt>, <tt class="REPLACEABLE"><i>yEs</i></tt>, and so forth. <span class="QUOTE">"[0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9][0-9][0-9]"</span> matches any Social Security number.</p>
      </li>
      <li>
        <p><a name="REGEXBS" id="REGEXBS"></a></p>
        <p>The backslash -- <span class="TOKEN">\</span> -- <a href="escapingsection.html#ESCP">escapes</a> a special character, which means that character gets interpreted literally (and is therefore no longer <i class="FIRSTTERM">special</i>).</p>
        <p>A <span class="QUOTE">"\$"</span> reverts back to its literal meaning of <span class="QUOTE">"$"</span>, rather than its RE meaning of end-of-line. Likewise a <span class="QUOTE">"\\"</span> has the literal meaning of <span class="QUOTE">"\"</span>.</p>
      </li>
      <li>
        <p><a name="ANGLEBRAC" id="ANGLEBRAC"></a></p>
        <p><a href="escapingsection.html#ESCP">Escaped</a> <span class="QUOTE">"angle brackets"</span> -- <span class="TOKEN">\&lt;...\&gt;</span> -- mark word boundaries.</p>
        <p>The angle brackets must be escaped, since otherwise they have only their literal character meaning.</p>
        <p><span class="QUOTE">"\&lt;the\&gt;"</span> matches the word <span class="QUOTE">"the,"</span> but not the words <span class="QUOTE">"them,"</span> <span class="QUOTE">"there,"</span> <span class="QUOTE">"other,"</span> etc.</p>
        <table border="1" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="SCREEN"><font color="#000000"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>cat textfile</b></tt>
<tt class="COMPUTEROUTPUT">This is line 1, of which there is only one instance.
 This is the only instance of line 2.
 This is line 3, another line.
 This is line 4.</tt>


<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>grep 'the' textfile</b></tt>
<tt class="COMPUTEROUTPUT">This is line 1, of which there is only one instance.
 This is the only instance of line 2.
 This is line 3, another line.</tt>


<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>grep '\&lt;the\&gt;' textfile</b></tt>
<tt class="COMPUTEROUTPUT">This is the only instance of line 2.</tt>
              </font></pre>
            </td>
          </tr>
        </table>
      </li>
    </ul>
    <table class="SIDEBAR" border="1" cellpadding="5">
      <tr>
        <td>
          <div class="SIDEBAR">
            <a name="AEN17316" id="AEN17316"></a>
            <p>The only way to be certain that a particular RE works is to test it.</p>
            <table border="0" bgcolor="#E0E0E0" width="100%">
              <tr>
                <td>
                  <pre class="PROGRAMLISTING"><font color="#000000">TEST FILE: tstfile                          # No match.
                                            # No match.
Run   grep "1133*"  on this file.           # Match.
                                            # No match.
                                            # No match.
This line contains the number 113.          # Match.
This line contains the number 13.           # No match.
This line contains the number 133.          # No match.
This line contains the number 1133.         # Match.
This line contains the number 113312.       # Match.
This line contains the number 1112.         # No match.
This line contains the number 113312312.    # Match.
This line contains no numbers at all.       # No match.</font></pre>
                </td>
              </tr>
            </table>
            <table border="1" bgcolor="#E0E0E0" width="100%">
              <tr>
                <td>
                  <pre class="SCREEN"><font color="#000000"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>grep "1133*" tstfile</b></tt>
<tt class="COMPUTEROUTPUT">Run   grep "1133*"  on this file.           # Match.
 This line contains the number 113.          # Match.
 This line contains the number 1133.         # Match.
 This line contains the number 113312.       # Match.
 This line contains the number 113312312.    # Match.</tt>
              </font></pre>
                </td>
              </tr>
            </table>
          </div>
        </td>
      </tr>
    </table>
    <ul>
      <li style="list-style-type: square">
        <div class="FORMALPARA">
          <p><b><a name="EXTREGEX" id="EXTREGEX"></a>Extended REs.</b> Additional metacharacters added to the basic set. Used in <a href="textproc.html#EGREPREF">egrep</a>, <a href="awk.html#AWKREF">awk</a>, and <a href="wrapper.html#PERLREF">Perl</a>.</p>
        </div>
      </li>
      <li>
        <p><a name="QUEXREGEX" id="QUEXREGEX"></a></p>
        <p>The question mark -- <span class="TOKEN">?</span> -- matches zero or one of the previous RE. It is generally used for matching single characters.</p>
      </li>
      <li>
        <p><a name="PLUSREF" id="PLUSREF"></a></p>
        <p>The plus -- <span class="TOKEN">+</span> -- matches one or more of the previous RE. It serves a role similar to the <span class="TOKEN">*</span>, but does <em>not</em> match zero occurrences.</p>
        <table border="0" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="PROGRAMLISTING"><font color="#000000"># GNU versions of sed and awk can use "+",
# but it needs to be escaped.

echo a111b | sed -ne '/a1\+b/p'
echo a111b | grep 'a1\+b'
echo a111b | gawk '/a1+b/'
# All of above are equivalent.

# Thanks, S.C.</font></pre>
            </td>
          </tr>
        </table>
        <p><a name="ESCPCB" id="ESCPCB"></a></p>
      </li>
      <li>
        <p><a href="escapingsection.html#ESCP">Escaped</a> <span class="QUOTE">"curly brackets"</span> -- <span class="TOKEN">\{ \}</span> -- indicate the number of occurrences of a preceding RE to match.</p>
        <p>It is necessary to escape the curly brackets since they have only their literal character meaning otherwise. This usage is technically not part of the basic RE set.</p>
        <p><span class="QUOTE">"[0-9]\{5\}"</span> matches exactly five digits (characters in the range of 0 to 9).</p>
        <div class="NOTE">
          <table class="NOTE" width="90%" border="0">
            <tr>
              <td width="25" align="center" valign="top"><img src="../images/note.gif" hspace="5" alt="Note"></td>
              <td align="left" valign="top">
                <p>Curly brackets are not available as an RE in the <span class="QUOTE">"classic"</span> (non-POSIX compliant) version of <a href="awk.html#AWKREF">awk</a>. <a name="GNUGAWK" id="GNUGAWK"></a>However, the GNU extended version of <i class="FIRSTTERM">awk</i>, <b class="COMMAND">gawk</b>, has the <tt class="OPTION">--re-interval</tt> option that permits them (without being escaped).</p>
                <table border="1" bgcolor="#E0E0E0" width="90%">
                  <tr>
                    <td>
                      <pre class="SCREEN"><font color="#000000"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>echo 2222 | gawk --re-interval '/2{3}/'</b></tt>
<tt class="COMPUTEROUTPUT">2222</tt>
              </font></pre>
                    </td>
                  </tr>
                </table>
                <p><b class="COMMAND">Perl</b> and some <b class="COMMAND">egrep</b> versions do not require escaping the curly brackets.</p>
              </td>
            </tr>
          </table>
        </div>
      </li>
      <li>
        <p><a name="PARENGRPS" id="PARENGRPS"></a></p>
        <p>Parentheses -- <b class="COMMAND">( )</b> -- enclose a group of REs. They are useful with the following <span class="QUOTE">"<span class="TOKEN">|</span>"</span> operator and in <a href="string-manipulation.html#EXPRPAREN">substring extraction</a> using <a href="moreadv.html#EXPRREF">expr</a>.</p>
      </li>
      <li>
        <p>The -- <b class="COMMAND">|</b> -- <span class="QUOTE">"or"</span> RE operator matches any of a set of alternate characters.</p>
        <table border="1" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="SCREEN"><font color="#000000"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>egrep 're(a|e)d' misc.txt</b></tt>
<tt class="COMPUTEROUTPUT">People who read seem to be better informed than those who do not.
 The clarinet produces sound by the vibration of its reed.</tt>
              </font></pre>
            </td>
          </tr>
        </table>
      </li>
    </ul>
    <div class="NOTE">
      <table class="NOTE" width="100%" border="0">
        <tr>
          <td width="25" align="center" valign="top"><img src="../images/note.gif" hspace="5" alt="Note"></td>
          <td align="left" valign="top">
            <p>Some versions of <b class="COMMAND">sed</b>, <b class="COMMAND">ed</b>, and <b class="COMMAND">ex</b> support escaped versions of the extended Regular Expressions described above, as do the GNU utilities.</p>
          </td>
        </tr>
      </table>
    </div>
    <ul>
      <li style="list-style-type: square">
        <div class="FORMALPARA">
          <p><b><a name="POSIXREF" id="POSIXREF"></a>POSIX Character Classes.</b> <tt class="USERINPUT"><b>[:class:]</b></tt></p>
        </div>
        <p>This is an alternate method of specifying a range of characters to match.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:alnum:]</b></tt> matches alphabetic or numeric characters. This is equivalent to <tt class="USERINPUT"><b>A-Za-z0-9</b></tt>.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:alpha:]</b></tt> matches alphabetic characters. This is equivalent to <tt class="USERINPUT"><b>A-Za-z</b></tt>.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:blank:]</b></tt> matches a space or a tab.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:cntrl:]</b></tt> matches control characters.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:digit:]</b></tt> matches (decimal) digits. This is equivalent to <tt class="USERINPUT"><b>0-9</b></tt>.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:graph:]</b></tt> (graphic printable characters). Matches characters in the range of <a href="special-chars.html#ASCIIDEF">ASCII</a> 33 - 126. This is the same as <tt class="USERINPUT"><b>[:print:]</b></tt>, below, but excluding the space character.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:lower:]</b></tt> matches lowercase alphabetic characters. This is equivalent to <tt class="USERINPUT"><b>a-z</b></tt>.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:print:]</b></tt> (printable characters). Matches characters in the range of ASCII 32 - 126. This is the same as <tt class="USERINPUT"><b>[:graph:]</b></tt>, above, but adding the space character.</p>
      </li>
      <li>
        <p><a name="WSPOSIX" id="WSPOSIX"></a><tt class="USERINPUT"><b>[:space:]</b></tt> matches whitespace characters (space and horizontal tab).</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:upper:]</b></tt> matches uppercase alphabetic characters. This is equivalent to <tt class="USERINPUT"><b>A-Z</b></tt>.</p>
      </li>
      <li>
        <p><tt class="USERINPUT"><b>[:xdigit:]</b></tt> matches hexadecimal digits. This is equivalent to <tt class="USERINPUT"><b>0-9A-Fa-f</b></tt>.</p>
        <div class="IMPORTANT">
          <table class="IMPORTANT" width="90%" border="0">
            <tr>
              <td width="25" align="center" valign="top"><img src="../images/important.gif" hspace="5" alt="Important"></td>
              <td align="left" valign="top">
                <p>POSIX character classes generally require quoting or <a href="testconstructs.html#DBLBRACKETS">double brackets</a> ([[ ]]).</p>
              </td>
            </tr>
          </table>
        </div>
        <table border="1" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="SCREEN"><font color="#000000"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>grep [[:digit:]] test.file</b></tt>
<tt class="COMPUTEROUTPUT">abc=723</tt>
              </font></pre>
            </td>
          </tr>
        </table>
        <table border="0" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="PROGRAMLISTING"><font color="#000000"># ...
if [[ $arow =~ [[:digit:]] ]]   #  Numerical input?
then       #  POSIX char class
  if [[ $acol =~ [[:alpha:]] ]] # Number followed by a letter? Illegal!
# ...
# From ktour.sh example script.</font></pre>
            </td>
          </tr>
        </table>
        <p>These character classes may even be used with <a href="globbingref.html">globbing</a>, to a limited extent.</p>
        <table border="1" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="SCREEN"><font color="#000000"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>ls -l ?[[:digit:]][[:digit:]]?</b></tt>
<tt class="COMPUTEROUTPUT">-rw-rw-r--    1 bozo  bozo         0 Aug 21 14:47 a33b</tt>
              </font></pre>
            </td>
          </tr>
        </table>
        <p>POSIX character classes are used in <a href="textproc.html#EX49">Example 16-21</a> and <a href="textproc.html#LOWERCASE">Example 16-22</a>.</p>
      </li>
    </ul>
    <p><a href="sedawk.html#SEDREF">Sed</a>, <a href="awk.html#AWKREF">awk</a>, and <a href="wrapper.html#PERLREF">Perl</a>, used as filters in scripts, take REs as arguments when "sifting" or transforming files or I/O streams. See <a href="contributed-scripts.html#BEHEAD">Example A-12</a> and <a href="contributed-scripts.html#TREE">Example A-16</a> for illustrations of this.</p>
    <p>The standard reference on this complex topic is Friedl's <i class="CITETITLE">Mastering Regular Expressions</i>. <i class="CITETITLE">Sed &amp; Awk</i>, by Dougherty and Robbins, also gives a very lucid treatment of REs. See the <a href="biblio.html"><i>Bibliography</i></a> for more information on these books.</p>
  </div>
  <h3 class="FOOTNOTES">Notes</h3>
  <table border="0" class="FOOTNOTES" width="100%">
    <tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN17134" href="x17129.html#AEN17134" id="FTN.AEN17134"><span class="footnote">[1]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p><a name="METAMEANINGREF" id="METAMEANINGREF"></a>A <i class="FIRSTTERM">meta-meaning</i> is the meaning of a term or expression on a higher level of abstraction. For example, the <i class="FIRSTTERM">literal</i> meaning of <i class="FIRSTTERM">regular expression</i> is an ordinary expression that conforms to accepted usage. The <i class="FIRSTTERM">meta-meaning</i> is drastically different, as discussed at length in this chapter.</p>
      </td>
    </tr>
    <tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN17189" href="x17129.html#AEN17189" id="FTN.AEN17189"><span class="footnote">[2]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p>Since <a href="sedawk.html#SEDREF">sed</a>, <a href="awk.html#AWKREF">awk</a>, and <a href="textproc.html#GREPREF">grep</a> process single lines, there will usually not be a newline to match. In those cases where there is a newline in a multiple line expression, the dot will match the newline.</p>
        <table border="0" bgcolor="#E0E0E0" width="90%">
          <tr>
            <td>
              <pre class="PROGRAMLISTING"><font color="#000000">#!/bin/bash

sed -e 'N;s/.*/[&amp;]/' &lt;&lt; EOF   # Here Document
line1
line2
EOF
# OUTPUT:
# [line1
# line2]



echo

awk '{ $0=$1 "\n" $2; if (/line.1/) {print}}' &lt;&lt; EOF
line 1
line 2
EOF
# OUTPUT:
# line
# 1


# Thanks, S.C.

exit 0</font></pre>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  <div class="NAVFOOTER">
    <hr align="left" width="100%">
    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="33%" align="left" valign="top"><a href="regexp.html" accesskey="P">Prev</a></td>
        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
        <td width="33%" align="right" valign="top"><a href="globbingref.html" accesskey="N">Next</a></td>
      </tr>
      <tr>
        <td width="33%" align="left" valign="top">Regular Expressions</td>
        <td width="34%" align="center" valign="top"><a href="regexp.html" accesskey="U">Up</a></td>
        <td width="33%" align="right" valign="top">Globbing</td>
      </tr>
    </table>
  </div>
</body>
</html>
