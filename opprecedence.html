<!DOCTYPE html><html><head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
  <title>Operator Precedence</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
  <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
  <link rel="UP" title="Operations and Related Topics" href="operations.html">
  <link rel="PREVIOUS" title="The Double-Parentheses Construct" href="dblparens.html">
  <link rel="NEXT" title="Beyond the Basics" href="part3.html">
<link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"><script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }

      document.getElementById('theme-toggle').addEventListener(
        'click',
        () => document.body.classList.toggle('dark-mode')
      );
    });
  </script></head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
      </tr>
      <tr>
        <td width="10%" align="left" valign="bottom"><a href="dblparens.html" accesskey="P">Prev</a></td>
        <td width="80%" align="center" valign="bottom">Chapter 8. Operations and Related Topics</td>
        <td width="10%" align="right" valign="bottom"><a href="part3.html" accesskey="N">Next</a></td>
      </tr>
    </tbody></table>
    <hr align="left" width="100%">
  </div>
  <div class="SECT1">
    <h1 class="SECT1"><a name="OPPRECEDENCE" id="OPPRECEDENCE"></a>8.4. Operator Precedence</h1>
    <p><a name="OPPRECEDENCE1" id="OPPRECEDENCE1"></a></p>
    <p>In a script, operations execute in order of <i class="FIRSTTERM">precedence</i>: the higher precedence operations execute <em>before</em> the lower precedence ones. <a name="AEN4290" href="#FTN.AEN4290" id="AEN4290"><span class="footnote">[1]</span></a></p>
    <div class="TABLE">
      <a name="AEN4294" id="AEN4294"></a>
      <p><b>Table 8-1. Operator Precedence</b></p>
      <table border="1" class="CALSTABLE">
        <thead>
          <tr>
            <th align="left" valign="top">Operator</th>
            <th align="left" valign="top">Meaning</th>
            <th align="left" valign="top">Comments</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" valign="top"></td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top"><b class="COMMAND">HIGHEST PRECEDENCE</b></td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">var++ var--</tt></td>
            <td align="left" valign="top">post-increment, post-decrement</td>
            <td align="left" valign="top"><a href="assortedtips.html#CSTYLE">C-style</a> operators</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">++var --var</tt></td>
            <td align="left" valign="top">pre-increment, pre-decrement</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">! ~</tt></td>
            <td align="left" valign="top"><a href="special-chars.html#NOTREF">negation</a></td>
            <td align="left" valign="top">logical / bitwise, inverts sense of following operator</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">**</tt></td>
            <td align="left" valign="top"><a href="ops.html#EXPONENTIATIONREF">exponentiation</a></td>
            <td align="left" valign="top"><a href="ops.html#AROPS1">arithmetic operation</a></td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">* / %</tt></td>
            <td align="left" valign="top">multiplication, division, modulo</td>
            <td align="left" valign="top">arithmetic operation</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">+ -</tt></td>
            <td align="left" valign="top">addition, subtraction</td>
            <td align="left" valign="top">arithmetic operation</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">&lt;&lt; &gt;&gt;</tt></td>
            <td align="left" valign="top">left, right shift</td>
            <td align="left" valign="top"><a href="ops.html#BITWSOPS1">bitwise</a></td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">-z -n</tt></td>
            <td align="left" valign="top"><i class="FIRSTTERM">unary</i> comparison</td>
            <td align="left" valign="top">string is/is-not <a href="comparison-ops.html#STRINGNULL">null</a></td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">-e -f -t -x, etc.</tt></td>
            <td align="left" valign="top"><i class="FIRSTTERM">unary</i> comparison</td>
            <td align="left" valign="top"><a href="fto.html">file-test</a></td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">&lt; -lt &gt; -gt &lt;= -le &gt;= -ge</tt></td>
            <td align="left" valign="top"><i class="FIRSTTERM">compound</i> comparison</td>
            <td align="left" valign="top">string and integer</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">-nt -ot -ef</tt></td>
            <td align="left" valign="top"><i class="FIRSTTERM">compound</i> comparison</td>
            <td align="left" valign="top">file-test</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">== -eq <a href="comparison-ops.html#NOTEQUAL">!=</a> -ne</tt></td>
            <td align="left" valign="top">equality / inequality</td>
            <td align="left" valign="top">test operators, string and integer</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">&amp;</tt></td>
            <td align="left" valign="top">AND</td>
            <td align="left" valign="top">bitwise</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">^</tt></td>
            <td align="left" valign="top">XOR</td>
            <td align="left" valign="top"><i class="FIRSTTERM">exclusive</i> OR, bitwise</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">|</tt></td>
            <td align="left" valign="top">OR</td>
            <td align="left" valign="top">bitwise</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">&amp;&amp; -a</tt></td>
            <td align="left" valign="top">AND</td>
            <td align="left" valign="top"><a href="ops.html#LOGOPS1">logical</a>, <i class="FIRSTTERM">compound</i> comparison</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">|| -o</tt></td>
            <td align="left" valign="top">OR</td>
            <td align="left" valign="top">logical, <i class="FIRSTTERM">compound</i> comparison</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">?:</tt></td>
            <td align="left" valign="top"><a href="special-chars.html#CSTRINARY">trinary operator</a></td>
            <td align="left" valign="top">C-style</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">=</tt></td>
            <td align="left" valign="top"><a href="varassignment.html#EQREF">assignment</a></td>
            <td align="left" valign="top">(do not confuse with equality <i class="FIRSTTERM">test</i>)</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">*= /= %= += -= &lt;&lt;= &gt;&gt;= &amp;=</tt></td>
            <td align="left" valign="top"><a href="ops.html#ARITHOPSCOMB">combination assignment</a></td>
            <td align="left" valign="top">times-equal, divide-equal, mod-equal, etc.</td>
          </tr>
          <tr>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="top"><tt class="OPTION">,</tt></td>
            <td align="left" valign="top"><a href="ops.html#COMMAOP">comma</a></td>
            <td align="left" valign="top">links a sequence of operations</td>
          </tr>
          <tr>
            <td align="left" valign="top"></td>
            <td align="left" valign="top">&nbsp;</td>
            <td align="left" valign="top"><b class="COMMAND">LOWEST PRECEDENCE</b></td>
          </tr>
        </tbody>
      </table>
    </div>
    <p>In practice, all you really need to remember is the following:</p>
    <ul>
      <li>
        <p>The <span class="QUOTE">"My Dear Aunt Sally"</span> mantra (<em>multiply, divide, add, subtract</em>) for the familiar <a href="ops.html#AROPS1">arithmetic operations</a>.</p>
      </li>
      <li>
        <p>The <i class="FIRSTTERM">compound</i> logical operators, <b class="COMMAND">&amp;&amp;</b>, <b class="COMMAND">||</b>, <b class="COMMAND">-a</b>, and <b class="COMMAND">-o</b> have low precedence.</p>
      </li>
      <li>
        <p>The order of evaluation of equal-precedence operators is usually <i class="FIRSTTERM">left-to-right</i>.</p>
      </li>
    </ul>
    <p>Now, let's utilize our knowledge of operator precedence to analyze a couple of lines from the <tt class="FILENAME">/etc/init.d/functions file</tt>, as found in the <i class="FIRSTTERM">Fedora Core</i> Linux distro.</p>
    <table border="0" bgcolor="#E0E0E0" width="100%">
      <tbody><tr>
        <td>
          <pre class="PROGRAMLISTING hljs"><span class="hljs-keyword">while</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$remaining</span>"</span> -a <span class="hljs-string">"<span class="hljs-variable">$retry</span>"</span> -gt 0 ]; <span class="hljs-keyword">do</span>

<span class="hljs-comment"># This looks rather daunting at first glance.</span>


<span class="hljs-comment"># Separate the conditions:</span>
<span class="hljs-keyword">while</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$remaining</span>"</span> -a <span class="hljs-string">"<span class="hljs-variable">$retry</span>"</span> -gt 0 ]; <span class="hljs-keyword">do</span>
<span class="hljs-comment">#       --condition 1-- ^^ --condition 2-</span>

<span class="hljs-comment">#  If variable "$remaining" is not zero length</span>
<span class="hljs-comment">#+      AND (-a)</span>
<span class="hljs-comment">#+ variable "$retry" is greater-than zero</span>
<span class="hljs-comment">#+ then</span>
<span class="hljs-comment">#+ the [ expresion-within-condition-brackets ] returns success (0)</span>
<span class="hljs-comment">#+ and the while-loop executes an iteration.</span>
<span class="hljs-comment">#  ==============================================================</span>
<span class="hljs-comment">#  Evaluate "condition 1" and "condition 2" ***before***</span>
<span class="hljs-comment">#+ ANDing them. Why? Because the AND (-a) has a lower precedence</span>
<span class="hljs-comment">#+ than the -n and -gt operators,</span>
<span class="hljs-comment">#+ and therefore gets evaluated *last*.</span>

<span class="hljs-comment">#################################################################</span>

<span class="hljs-keyword">if</span> [ -f /etc/sysconfig/i18n -a -z <span class="hljs-string">"<span class="hljs-variable">${NOLOCALE:-}</span>"</span> ] ; <span class="hljs-keyword">then</span>


<span class="hljs-comment"># Again, separate the conditions:</span>
<span class="hljs-keyword">if</span> [ -f /etc/sysconfig/i18n -a -z <span class="hljs-string">"<span class="hljs-variable">${NOLOCALE:-}</span>"</span> ] ; <span class="hljs-keyword">then</span>
<span class="hljs-comment">#    --condition 1--------- ^^ --condition 2-----</span>

<span class="hljs-comment">#  If file "/etc/sysconfig/i18n" exists</span>
<span class="hljs-comment">#+      AND (-a)</span>
<span class="hljs-comment">#+ variable $NOLOCALE is zero length</span>
<span class="hljs-comment">#+ then</span>
<span class="hljs-comment">#+ the [ test-expresion-within-condition-brackets ] returns success (0)</span>
<span class="hljs-comment">#+ and the commands following execute.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  As before, the AND (-a) gets evaluated *last*</span>
<span class="hljs-comment">#+ because it has the lowest precedence of the operators within</span>
<span class="hljs-comment">#+ the test brackets.</span>
<span class="hljs-comment">#  ==============================================================</span>
<span class="hljs-comment">#  Note:</span>
<span class="hljs-comment">#  ${NOLOCALE:-} is a parameter expansion that seems redundant.</span>
<span class="hljs-comment">#  But, if $NOLOCALE has not been declared, it gets set to *null*,</span>
<span class="hljs-comment">#+ in effect declaring it.</span>
<span class="hljs-comment">#  This makes a difference in some contexts.</span></pre>
        </td>
      </tr>
    </tbody></table>
    <div class="TIP">
      <table class="TIP" width="100%" border="0">
        <tbody><tr>
          <td width="25" align="center" valign="top"><img src="images/tip.gif" hspace="5" alt="Tip"></td>
          <td align="left" valign="top">
            <p>To avoid confusion or error in a complex sequence of test operators, break up the sequence into bracketed sections.</p>
            <table border="0" bgcolor="#E0E0E0" width="100%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$v1</span>"</span> -gt <span class="hljs-string">"<span class="hljs-variable">$v2</span>"</span>  -o  <span class="hljs-string">"<span class="hljs-variable">$v1</span>"</span> -lt <span class="hljs-string">"<span class="hljs-variable">$v2</span>"</span>  -a  -e <span class="hljs-string">"<span class="hljs-variable">$filename</span>"</span> ]
<span class="hljs-comment"># Unclear what's going on here...</span>

<span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$v1</span>"</span> -gt <span class="hljs-string">"<span class="hljs-variable">$v2</span>"</span> ]] || [[ <span class="hljs-string">"<span class="hljs-variable">$v1</span>"</span> -lt <span class="hljs-string">"<span class="hljs-variable">$v2</span>"</span> ]] &amp;&amp; [[ -e <span class="hljs-string">"<span class="hljs-variable">$filename</span>"</span> ]]
<span class="hljs-comment"># Much better -- the condition tests are grouped in logical sections.</span></pre>
                </td>
              </tr>
            </tbody></table>
          </td>
        </tr>
      </tbody></table>
    </div>
  </div>
  <h3 class="FOOTNOTES">Notes</h3>
  <table border="0" class="FOOTNOTES" width="100%">
    <tbody><tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN4290" href="opprecedence.html#AEN4290" id="FTN.AEN4290"><span class="footnote">[1]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p><i class="FIRSTTERM">Precedence</i>, in this context, has approximately the same meaning as <i class="FIRSTTERM">priority</i></p>
      </td>
    </tr>
  </tbody></table>
  <div class="NAVFOOTER">
    <hr align="left" width="100%">
    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td width="33%" align="left" valign="top"><a href="dblparens.html" accesskey="P">Prev</a></td>
        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
        <td width="33%" align="right" valign="top"><a href="part3.html" accesskey="N">Next</a></td>
      </tr>
      <tr>
        <td width="33%" align="left" valign="top">The Double-Parentheses Construct</td>
        <td width="34%" align="center" valign="top"><a href="operations.html" accesskey="U">Up</a></td>
        <td width="33%" align="right" valign="top">Beyond the Basics</td>
      </tr>
    </tbody></table>
  </div>


<button id="theme-toggle">Toggle theme</button></body></html>
