<!DOCTYPE html><html><head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
  <title>File test operators</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
  <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
  <link rel="UP" title="Tests" href="tests.html">
  <link rel="PREVIOUS" title="Test Constructs" href="testconstructs.html">
  <link rel="NEXT" title="Other Comparison Operators" href="comparison-ops.html">
<link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"></head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
      </tr>
      <tr>
        <td width="10%" align="left" valign="bottom"><a href="testconstructs.html" accesskey="P">Prev</a></td>
        <td width="80%" align="center" valign="bottom">Chapter 7. Tests</td>
        <td width="10%" align="right" valign="bottom"><a href="comparison-ops.html" accesskey="N">Next</a></td>
      </tr>
    </tbody></table>
    <hr align="left" width="100%">
  </div>
  <div class="SECT1">
    <h1 class="SECT1"><a name="FTO" id="FTO"></a>7.2. File test operators</h1>
    <div class="VARIABLELIST">
      <p><b><a name="RTIF" id="RTIF"></a>Returns true if...</b></p>
      <dl>
        <dt><span class="TOKEN">-e</span></dt>
        <dd>
          <p>file exists</p>
        </dd>
        <dt><span class="TOKEN">-a</span></dt>
        <dd>
          <p>file exists</p>
          <p>This is identical in effect to <span class="TOKEN">-e</span>. It has been <span class="QUOTE">"deprecated,"</span> <a name="AEN3289" href="#FTN.AEN3289" id="AEN3289"><span class="footnote">[1]</span></a> and its use is discouraged.</p>
        </dd>
        <dt><a name="REGULARFILE" id="REGULARFILE"></a><span class="TOKEN">-f</span></dt>
        <dd>
          <p>file is a <tt class="REPLACEABLE"><i>regular</i></tt> file (not a directory or <a href="devref1.html#DEVFILEREF">device file</a>)</p>
        </dd>
        <dt><span class="TOKEN">-s</span></dt>
        <dd>
          <p>file is not zero size</p>
        </dd>
        <dt><span class="TOKEN">-d</span></dt>
        <dd>
          <p>file is a directory</p>
        </dd>
        <dt><span class="TOKEN">-b</span></dt>
        <dd>
          <p>file is a <a href="devref1.html#BLOCKDEVREF">block device</a></p>
          <p><a name="BLOCKDEVTEST" id="BLOCKDEVTEST"></a></p>
        </dd>
        <dt><span class="TOKEN">-c</span></dt>
        <dd>
          <p><a name="CHARDEVTEST" id="CHARDEVTEST"></a>file is a <a href="devref1.html#CHARDEVREF">character device</a></p>
          <table border="0" bgcolor="#E0E0E0" width="90%">
            <tbody><tr>
              <td>
                <pre class="PROGRAMLISTING hljs">device0=<span class="hljs-string">"/dev/sda2"</span>    <span class="hljs-comment"># /   (root directory)</span>
<span class="hljs-keyword">if</span> [ -b <span class="hljs-string">"<span class="hljs-variable">$device0</span>"</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$device0</span> is a block device."</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># /dev/sda2 is a block device.</span>



device1=<span class="hljs-string">"/dev/ttyS1"</span>   <span class="hljs-comment"># PCMCIA modem card.</span>
<span class="hljs-keyword">if</span> [ -c <span class="hljs-string">"<span class="hljs-variable">$device1</span>"</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$device1</span> is a character device."</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># /dev/ttyS1 is a character device.</span></pre>
              </td>
            </tr>
          </tbody></table>
        </dd>
        <dt><span class="TOKEN">-p</span></dt>
        <dd>
          <p>file is a <a href="special-chars.html#PIPEREF">pipe</a></p>
          <table border="0" bgcolor="#E0E0E0" width="90%">
            <tbody><tr>
              <td>
                <pre class="PROGRAMLISTING hljs"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">show_input_type</span></span>()
{
   [ -p /dev/fd/0 ] &amp;&amp; <span class="hljs-built_in">echo</span> PIPE || <span class="hljs-built_in">echo</span> STDIN
}

show_input_type <span class="hljs-string">"Input"</span>                           <span class="hljs-comment"># STDIN</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Input"</span> | show_input_type                    <span class="hljs-comment"># PIPE</span>

<span class="hljs-comment"># This example courtesy of Carl Anderson.</span></pre>
              </td>
            </tr>
          </tbody></table>
        </dd>
        <dt><span class="TOKEN">-h</span></dt>
        <dd>
          <p>file is a <a href="basic.html#SYMLINKREF">symbolic link</a></p>
        </dd>
        <dt><span class="TOKEN">-L</span></dt>
        <dd>
          <p>file is a symbolic link</p>
        </dd>
        <dt><span class="TOKEN">-S</span></dt>
        <dd>
          <p>file is a <a href="devref1.html#SOCKETREF">socket</a></p>
        </dd>
        <dt><span class="TOKEN">-t</span></dt>
        <dd>
          <p><a name="TERMTEST" id="TERMTEST"></a>file (<a href="io-redirection.html#FDREF">descriptor</a>) is associated with a terminal device</p>
          <p>This test option <a href="intandnonint.html#II2TEST">may be used to check</a> whether the <tt class="FILENAME">stdin</tt> <tt class="USERINPUT"><b>[ -t 0 ]</b></tt> or <tt class="FILENAME">stdout</tt> <tt class="USERINPUT"><b>[ -t 1 ]</b></tt> in a given script is a terminal.</p>
        </dd>
        <dt><span class="TOKEN">-r</span></dt>
        <dd>
          <p>file has read permission (<em>for the user running the test</em>)</p>
        </dd>
        <dt><span class="TOKEN">-w</span></dt>
        <dd>
          <p>file has write permission (for the user running the test)</p>
        </dd>
        <dt><span class="TOKEN">-x</span></dt>
        <dd>
          <p>file has execute permission (for the user running the test)</p>
        </dd>
        <dt><span class="TOKEN">-g</span></dt>
        <dd>
          <p>set-group-id (sgid) flag set on file or directory</p>
          <p>If a directory has the <tt class="REPLACEABLE"><i>sgid</i></tt> flag set, then a file created within that directory belongs to the group that owns the directory, not necessarily to the group of the user who created the file. This may be useful for a directory shared by a workgroup.</p>
        </dd>
        <dt><span class="TOKEN">-u</span></dt>
        <dd>
          <p><a name="SUIDREF" id="SUIDREF"></a></p>
          <p>set-user-id (suid) flag set on file</p>
          <p>A binary owned by <i class="FIRSTTERM">root</i> with <tt class="REPLACEABLE"><i>set-user-id</i></tt> flag set runs with <i class="FIRSTTERM">root</i> privileges, even when an ordinary user invokes it. <a name="AEN3400" href="#FTN.AEN3400" id="AEN3400"><span class="footnote">[2]</span></a> This is useful for executables (such as <b class="COMMAND">pppd</b> and <b class="COMMAND">cdrecord</b>) that need to access system hardware. Lacking the <i class="FIRSTTERM">suid</i> flag, these binaries could not be invoked by a <i class="FIRSTTERM">non-root</i> user.</p>
          <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
            <tbody><tr>
              <td>
                <pre class="SCREEN hljs">             -rwsr-xr-t    1 root       178236 Oct  2  2000 /usr/sbin/pppd
              </pre>
              </td>
            </tr>
          </tbody></table>
          <p>A file with the <tt class="REPLACEABLE"><i>suid</i></tt> flag set shows an <i class="FIRSTTERM">s</i> in its permissions.</p>
        </dd>
        <dt><span class="TOKEN">-k</span></dt>
        <dd>
          <p><tt class="REPLACEABLE"><i>sticky bit</i></tt> set</p>
          <p>Commonly known as the <i class="FIRSTTERM">sticky bit,</i> the <i class="FIRSTTERM">save-text-mode</i> flag is a special type of file permission. If a file has this flag set, that file will be kept in cache memory, for quicker access. <a name="AEN3423" href="#FTN.AEN3423" id="AEN3423"><span class="footnote">[3]</span></a> If set on a directory, it restricts write permission. Setting the sticky bit adds a <i class="FIRSTTERM">t</i> to the permissions on the file or directory listing. This restricts altering or deleting specific files in that directory to the owner of those files.</p>
          <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
            <tbody><tr>
              <td>
                <pre class="SCREEN hljs">             drwxrwxrwt    7 root         1024 May 19 21:26 tmp/
              </pre>
              </td>
            </tr>
          </tbody></table>
          <p>If a user does not own a directory that has the sticky bit set, but has write permission in that directory, she can only delete those files that she owns in it. This keeps users from inadvertently overwriting or deleting each other's files in a publicly accessible directory, such as <tt class="FILENAME">/tmp</tt>. (The <i class="FIRSTTERM">owner</i> of the directory or <i class="FIRSTTERM">root</i> can, of course, delete or rename files there.)</p>
        </dd>
        <dt><span class="TOKEN">-O</span></dt>
        <dd>
          <p>you are owner of file</p>
        </dd>
        <dt><span class="TOKEN">-G</span></dt>
        <dd>
          <p>group-id of file same as yours</p>
        </dd>
        <dt><span class="TOKEN">-N</span></dt>
        <dd>
          <p>file modified since it was last read</p>
        </dd>
        <dt><span class="TOKEN">f1 -nt f2</span></dt>
        <dd>
          <p>file <tt class="REPLACEABLE"><i>f1</i></tt> is newer than <tt class="REPLACEABLE"><i>f2</i></tt></p>
        </dd>
        <dt><span class="TOKEN">f1 -ot f2</span></dt>
        <dd>
          <p>file <tt class="REPLACEABLE"><i>f1</i></tt> is older than <tt class="REPLACEABLE"><i>f2</i></tt></p>
        </dd>
        <dt><span class="TOKEN">f1 -ef f2</span></dt>
        <dd>
          <p>files <tt class="REPLACEABLE"><i>f1</i></tt> and <tt class="REPLACEABLE"><i>f2</i></tt> are hard links to the same file</p>
        </dd>
        <dt><span class="TOKEN">!</span></dt>
        <dd>
          <p><span class="QUOTE">"not"</span> -- reverses the sense of the tests above (returns true if condition absent).</p>
        </dd>
      </dl>
    </div>
    <div class="EXAMPLE">
      <a name="BROKENLINK" id="BROKENLINK"></a>
      <p><b>Example 7-4. Testing for broken links</b></p>
      <table border="0" bgcolor="#E0E0E0" width="100%">
        <tbody><tr>
          <td>
            <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># broken-link.sh</span>
<span class="hljs-comment"># Written by Lee bigelow &lt;ligelowbee@yahoo.com&gt;</span>
<span class="hljs-comment"># Used in ABS Guide with permission.</span>

<span class="hljs-comment">#  A pure shell script to find dead symlinks and output them quoted</span>
<span class="hljs-comment">#+ so they can be fed to xargs and dealt with :)</span>
<span class="hljs-comment">#+ eg. sh broken-link.sh /somedir /someotherdir|xargs rm</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  This, however, is a better method:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  find "somedir" -type l -print0|\</span>
<span class="hljs-comment">#  xargs -r0 file|\</span>
<span class="hljs-comment">#  grep "broken symbolic"|</span>
<span class="hljs-comment">#  sed -e 's/^\|: *broken symbolic.*$/"/g'</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#+ but that wouldn't be pure Bash, now would it.</span>
<span class="hljs-comment">#  Caution: beware the /proc file system and any circular links!</span>
<span class="hljs-comment">################################################################</span>


<span class="hljs-comment">#  If no args are passed to the script set directories-to-search </span>
<span class="hljs-comment">#+ to current directory.  Otherwise set the directories-to-search </span>
<span class="hljs-comment">#+ to the args passed.</span>
<span class="hljs-comment">######################</span>

[ <span class="hljs-variable">$#</span> -eq 0 ] &amp;&amp; directorys=`<span class="hljs-built_in">pwd</span>` || directorys=<span class="hljs-variable">$@</span>


<span class="hljs-comment">#  Setup the function linkchk to check the directory it is passed </span>
<span class="hljs-comment">#+ for files that are links and don't exist, then print them quoted.</span>
<span class="hljs-comment">#  If one of the elements in the directory is a subdirectory then </span>
<span class="hljs-comment">#+ send that subdirectory to the linkcheck function.</span>
<span class="hljs-comment">##########</span>

<span class="hljs-function"><span class="hljs-title">linkchk</span></span> () {
    <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> <span class="hljs-variable">$1</span>/*; <span class="hljs-keyword">do</span>
      [ -h <span class="hljs-string">"<span class="hljs-variable">$element</span>"</span> -a ! -e <span class="hljs-string">"<span class="hljs-variable">$element</span>"</span> ] &amp;&amp; <span class="hljs-built_in">echo</span> \"<span class="hljs-variable">$element</span>\"
      [ -d <span class="hljs-string">"<span class="hljs-variable">$element</span>"</span> ] &amp;&amp; linkchk <span class="hljs-variable">$element</span>
    <span class="hljs-comment"># Of course, '-h' tests for symbolic link, '-d' for directory.</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment">#  Send each arg that was passed to the script to the linkchk() function</span>
<span class="hljs-comment">#+ if it is a valid directoy.  If not, then print the error message</span>
<span class="hljs-comment">#+ and usage info.</span>
<span class="hljs-comment">##################</span>
<span class="hljs-keyword">for</span> directory <span class="hljs-keyword">in</span> <span class="hljs-variable">$directorys</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [ -d <span class="hljs-variable">$directory</span> ]
        <span class="hljs-keyword">then</span> linkchk <span class="hljs-variable">$directory</span>
        <span class="hljs-keyword">else</span> 
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$directory</span> is not a directory"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> dir1 dir2 ..."</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">exit</span> $?</pre>
          </td>
        </tr>
      </tbody></table>
    </div>
    <p><a href="zeros.html#COOKIES">Example 31-1</a>, <a href="loops1.html#BINGREP">Example 11-8</a>, <a href="loops1.html#FILEINFO">Example 11-3</a>, <a href="zeros.html#RAMDISK">Example 31-3</a>, and <a href="contributed-scripts.html#MAILFORMAT">Example A-1</a> also illustrate uses of the file test operators.</p>
  </div>
  <h3 class="FOOTNOTES">Notes</h3>
  <table border="0" class="FOOTNOTES" width="100%">
    <tbody><tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN3289" href="fto.html#AEN3289" id="FTN.AEN3289"><span class="footnote">[1]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p>Per the 1913 edition of <em>Webster's Dictionary</em>:</p>
        <table border="0" bgcolor="#E0E0E0" width="90%">
          <tbody><tr>
            <td>
              <pre class="PROGRAMLISTING hljs">Deprecate
...

To pray against, as an evil;
to seek to avert by prayer;
to desire the removal of;
to seek deliverance from;
to express deep regret <span class="hljs-keyword">for</span>;
to disapprove of strongly.</pre>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN3400" href="fto.html#AEN3400" id="FTN.AEN3400"><span class="footnote">[2]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p>Be aware that <i class="FIRSTTERM">suid</i> binaries may open security holes. The <i class="FIRSTTERM">suid</i> flag has no effect on shell scripts.</p>
      </td>
    </tr>
    <tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN3423" href="fto.html#AEN3423" id="FTN.AEN3423"><span class="footnote">[3]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p>On Linux systems, the sticky bit is no longer used for files, only on directories.</p>
      </td>
    </tr>
  </tbody></table>
  <div class="NAVFOOTER">
    <hr align="left" width="100%">
    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td width="33%" align="left" valign="top"><a href="testconstructs.html" accesskey="P">Prev</a></td>
        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
        <td width="33%" align="right" valign="top"><a href="comparison-ops.html" accesskey="N">Next</a></td>
      </tr>
      <tr>
        <td width="33%" align="left" valign="top">Test Constructs</td>
        <td width="34%" align="center" valign="top"><a href="tests.html" accesskey="U">Up</a></td>
        <td width="33%" align="right" valign="top">Other Comparison Operators</td>
      </tr>
    </tbody></table>
  </div>


</body></html>
