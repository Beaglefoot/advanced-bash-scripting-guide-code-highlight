<!DOCTYPE html><html><head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
  <title>Testing and Branching</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
  <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
  <link rel="UP" title="Loops and Branches" href="loops.html">
  <link rel="PREVIOUS" title="Loop Control" href="loopcontrol.html">
  <link rel="NEXT" title="Command Substitution" href="commandsub.html">
<link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"><script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }

      document.getElementById('theme-toggle').addEventListener(
        'click',
        () => document.body.classList.toggle('dark-mode')
      );
    });
  </script></head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
      </tr>
      <tr>
        <td width="10%" align="left" valign="bottom"><a href="loopcontrol.html" accesskey="P">Prev</a></td>
        <td width="80%" align="center" valign="bottom">Chapter 11. Loops and Branches</td>
        <td width="10%" align="right" valign="bottom"><a href="commandsub.html" accesskey="N">Next</a></td>
      </tr>
    </tbody></table>
    <hr align="left" width="100%">
  </div>
  <div class="SECT1">
    <h1 class="SECT1"><a name="TESTBRANCH" id="TESTBRANCH"></a>11.4. Testing and Branching</h1>
    <p>The <b class="COMMAND">case</b> and <b class="COMMAND">select</b> constructs are technically not loops, since they do not iterate the execution of a code block. Like loops, however, they direct program flow according to conditions at the top or bottom of the block.</p>
    <div class="VARIABLELIST">
      <p><b><a name="CASEESAC1" id="CASEESAC1"></a>Controlling program flow in a code block</b></p>
      <dl>
        <dt><b class="COMMAND">case (in) / esac</b></dt>
        <dd>
          <p>The <b class="COMMAND">case</b> construct is the shell scripting analog to <tt class="REPLACEABLE"><i>switch</i></tt> in <b class="COMMAND">C/C++</b>. It permits branching to one of a number of code blocks, depending on condition tests. It serves as a kind of shorthand for multiple <span class="TOKEN">if/then/else</span> statements and is an appropriate tool for creating menus.</p>
          <p><b class="COMMAND">case</b> "$<tt class="REPLACEABLE"><i>variable</i></tt>" in<br>
          <br>
          "$<tt class="REPLACEABLE"><i>condition1</i></tt>" )<br>
          <tt class="REPLACEABLE"><i>command</i></tt>...<br>
          ;;<br>
          <br>
          "$<tt class="REPLACEABLE"><i>condition2</i></tt>" )<br>
          <tt class="REPLACEABLE"><i>command</i></tt>...<br>
          ;;<br>
          <br>
          <br>
          <b class="COMMAND">esac</b></p>
          <div class="NOTE">
            <table class="NOTE" width="90%" border="0">
              <tbody><tr>
                <td width="25" align="center" valign="top"><img src="images/note.gif" hspace="5" alt="Note"></td>
                <td align="left" valign="top">
                  <ul>
                    <li>
                      <p>Quoting the variables is not mandatory, since word splitting does not take place.</p>
                    </li>
                    <li>
                      <p><a name="CASEPAREN" id="CASEPAREN"></a>Each test line ends with a right paren <b class="COMMAND">)</b>. <a name="AEN7087" href="#FTN.AEN7087" id="AEN7087"><span class="footnote">[1]</span></a></p>
                    </li>
                    <li>
                      <p>Each condition block ends with a <em>double</em> semicolon <span class="TOKEN">;;</span>.</p>
                    </li>
                    <li>
                      <p>If a condition tests <i class="FIRSTTERM">true</i>, then the associated commands execute and the <b class="COMMAND">case</b> block terminates.</p>
                    </li>
                    <li>
                      <p>The entire <b class="COMMAND">case</b> block ends with an <b class="COMMAND">esac</b> (<i class="WORDASWORD">case</i> spelled backwards).</p>
                    </li>
                  </ul>
                </td>
              </tr>
            </tbody></table>
          </div>
          <div class="EXAMPLE">
            <a name="EX29" id="EX29"></a>
            <p><b>Example 11-25. Using <i class="FIRSTTERM">case</i></b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Testing ranges of characters.</span>

<span class="hljs-built_in">echo</span>; <span class="hljs-built_in">echo</span> <span class="hljs-string">"Hit a key, then hit return."</span>
<span class="hljs-built_in">read</span> Keypress

<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$Keypress</span>"</span> <span class="hljs-keyword">in</span>
  [[:lower:]]   ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Lowercase letter"</span>;;
  [[:upper:]]   ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Uppercase letter"</span>;;
  [0-9]         ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Digit"</span>;;
  *             ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Punctuation, whitespace, or other"</span>;;
<span class="hljs-keyword">esac</span>      <span class="hljs-comment">#  Allows ranges of characters in [square brackets],</span>
          <span class="hljs-comment">#+ or POSIX ranges in [[double square brackets.</span>

<span class="hljs-comment">#  In the first version of this example,</span>
<span class="hljs-comment">#+ the tests for lowercase and uppercase characters were</span>
<span class="hljs-comment">#+ [a-z] and [A-Z].</span>
<span class="hljs-comment">#  This no longer works in certain locales and/or Linux distros.</span>
<span class="hljs-comment">#  POSIX is more portable.</span>
<span class="hljs-comment">#  Thanks to Frank Wang for pointing this out.</span>

<span class="hljs-comment">#  Exercise:</span>
<span class="hljs-comment">#  --------</span>
<span class="hljs-comment">#  As the script stands, it accepts a single keystroke, then terminates.</span>
<span class="hljs-comment">#  Change the script so it accepts repeated input,</span>
<span class="hljs-comment">#+ reports on each keystroke, and terminates only when "X" is hit.</span>
<span class="hljs-comment">#  Hint: enclose everything in a "while" loop.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                </td>
              </tr>
            </tbody></table>
          </div>
          <div class="EXAMPLE">
            <a name="EX30" id="EX30"></a>
            <p><b>Example 11-26. Creating menus using <i class="FIRSTTERM">case</i></b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Crude address database</span>

clear <span class="hljs-comment"># Clear the screen.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"          Contact List"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"          ------- ----"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Choose one of the following persons:"</span> 
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[E]vans, Roland"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[J]ones, Mildred"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[S]mith, Julie"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[Z]ane, Morris"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">read</span> person

<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$person</span>"</span> <span class="hljs-keyword">in</span>
<span class="hljs-comment"># Note variable is quoted.</span>

  <span class="hljs-string">"E"</span> | <span class="hljs-string">"e"</span> )
  <span class="hljs-comment"># Accept upper or lowercase input.</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Roland Evans"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"4321 Flash Dr."</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Hardscrabble, CO 80753"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"(303) 734-9874"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"(303) 734-9892 fax"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"revans@zzy.net"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Business partner &amp; old friend"</span>
  ;;
<span class="hljs-comment"># Note double semicolon to terminate each option.</span>

  <span class="hljs-string">"J"</span> | <span class="hljs-string">"j"</span> )
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Mildred Jones"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"249 E. 7th St., Apt. 19"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"New York, NY 10009"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"(212) 533-2814"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"(212) 533-9972 fax"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"milliej@loisaida.com"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Ex-girlfriend"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Birthday: Feb. 11"</span>
  ;;

<span class="hljs-comment"># Add info for Smith &amp; Zane later.</span>

          * )
   <span class="hljs-comment"># Default option.      </span>
   <span class="hljs-comment"># Empty input (hitting RETURN) fits here, too.</span>
   <span class="hljs-built_in">echo</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"Not yet in database."</span>
  ;;

<span class="hljs-keyword">esac</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment">#  Exercise:</span>
<span class="hljs-comment">#  --------</span>
<span class="hljs-comment">#  Change the script so it accepts multiple inputs,</span>
<span class="hljs-comment">#+ instead of terminating after displaying just one address.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                </td>
              </tr>
            </tbody></table>
          </div>
          <p><a name="CASECL" id="CASECL"></a></p>
          <p>An exceptionally clever use of <b class="COMMAND">case</b> involves testing for command-line parameters.</p>
          <table border="0" bgcolor="#E0E0E0" width="90%">
            <tbody><tr>
              <td>
                <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#! /bin/bash</span>

<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-keyword">in</span>
  <span class="hljs-string">""</span>) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">${0##*/}</span> &lt;filename&gt;"</span>; <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_PARAM</span>;;
                      <span class="hljs-comment"># No command-line parameters,</span>
                      <span class="hljs-comment"># or first parameter empty.</span>
<span class="hljs-comment"># Note that ${0##*/} is ${var##pattern} param substitution.</span>
                      <span class="hljs-comment"># Net result is $0.</span>

  -*) FILENAME=./<span class="hljs-variable">$1</span>;;   <span class="hljs-comment">#  If filename passed as argument ($1)</span>
                      <span class="hljs-comment">#+ starts with a dash,</span>
                      <span class="hljs-comment">#+ replace it with ./$1</span>
                      <span class="hljs-comment">#+ so further commands don't interpret it</span>
                      <span class="hljs-comment">#+ as an option.</span>

  * ) FILENAME=<span class="hljs-variable">$1</span>;;     <span class="hljs-comment"># Otherwise, $1.</span>
<span class="hljs-keyword">esac</span></pre>
              </td>
            </tr>
          </tbody></table>
          <p>Here is a more straightforward example of command-line parameter handling:</p>
          <table border="0" bgcolor="#E0E0E0" width="90%">
            <tbody><tr>
              <td>
                <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#! /bin/bash</span>


<span class="hljs-keyword">while</span> [ <span class="hljs-variable">$#</span> -gt 0 ]; <span class="hljs-keyword">do</span>    <span class="hljs-comment"># Until you run out of parameters . . .</span>
  <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-keyword">in</span>
    -d|--debug)
              <span class="hljs-comment"># "-d" or "--debug" parameter?</span>
              DEBUG=1
              ;;
    -c|--conf)
              CONFFILE=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
              <span class="hljs-built_in">shift</span>
              <span class="hljs-keyword">if</span> [ ! -f <span class="hljs-variable">$CONFFILE</span> ]; <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Supplied file doesn't exist!"</span>
                <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_CONFFILE</span>     <span class="hljs-comment"># File not found error.</span>
              <span class="hljs-keyword">fi</span>
              ;;
  <span class="hljs-keyword">esac</span>
  <span class="hljs-built_in">shift</span>       <span class="hljs-comment"># Check next set of parameters.</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment">#  From Stefano Falsetto's "Log2Rot" script,</span>
<span class="hljs-comment">#+ part of his "rottlog" package.</span>
<span class="hljs-comment">#  Used with permission.</span></pre>
              </td>
            </tr>
          </tbody></table>
          <div class="EXAMPLE">
            <a name="CASECMD" id="CASECMD"></a>
            <p><b>Example 11-27. Using <i class="FIRSTTERM">command substitution</i> to generate the <i class="FIRSTTERM">case</i> variable</b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># case-cmd.sh: Using command substitution to generate a "case" variable.</span>

<span class="hljs-keyword">case</span> $( arch ) <span class="hljs-keyword">in</span>   <span class="hljs-comment"># $( arch ) returns machine architecture.</span>
                    <span class="hljs-comment"># Equivalent to 'uname -m' ...</span>
  i386 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"80386-based machine"</span>;;
  i486 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"80486-based machine"</span>;;
  i586 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Pentium-based machine"</span>;;
  i686 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Pentium2+-based machine"</span>;;
  *    ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Other type of machine"</span>;;
<span class="hljs-keyword">esac</span>

<span class="hljs-built_in">exit</span> 0</pre>
                </td>
              </tr>
            </tbody></table>
          </div>
          <p><a name="CSGLOB" id="CSGLOB"></a></p>
          <p>A <b class="COMMAND">case</b> construct can filter strings for <a href="globbingref.html">globbing</a> patterns.</p>
          <div class="EXAMPLE">
            <a name="MATCHSTRING" id="MATCHSTRING"></a>
            <p><b>Example 11-28. Simple string matching</b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># match-string.sh: Simple string matching</span>
<span class="hljs-comment">#                  using a 'case' construct.</span>

<span class="hljs-function"><span class="hljs-title">match_string</span></span> ()
{ <span class="hljs-comment"># Exact string match.</span>
  MATCH=0
  E_NOMATCH=90
  PARAMS=2     <span class="hljs-comment"># Function requires 2 arguments.</span>
  E_BAD_PARAMS=91

  [ <span class="hljs-variable">$#</span> -eq <span class="hljs-variable">$PARAMS</span> ] || <span class="hljs-built_in">return</span> <span class="hljs-variable">$E_BAD_PARAMS</span>

  <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-keyword">in</span>
  <span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>) <span class="hljs-built_in">return</span> <span class="hljs-variable">$MATCH</span>;;
  *   ) <span class="hljs-built_in">return</span> <span class="hljs-variable">$E_NOMATCH</span>;;
  <span class="hljs-keyword">esac</span>

}  


a=one
b=two
c=three
d=two


match_string <span class="hljs-variable">$a</span>     <span class="hljs-comment"># wrong number of parameters</span>
<span class="hljs-built_in">echo</span> $?             <span class="hljs-comment"># 91</span>

match_string <span class="hljs-variable">$a</span> <span class="hljs-variable">$b</span>  <span class="hljs-comment"># no match</span>
<span class="hljs-built_in">echo</span> $?             <span class="hljs-comment"># 90</span>

match_string <span class="hljs-variable">$b</span> <span class="hljs-variable">$d</span>  <span class="hljs-comment"># match</span>
<span class="hljs-built_in">echo</span> $?             <span class="hljs-comment"># 0</span>


<span class="hljs-built_in">exit</span> 0              </pre>
                </td>
              </tr>
            </tbody></table>
          </div>
          <div class="EXAMPLE">
            <a name="ISALPHA" id="ISALPHA"></a>
            <p><b>Example 11-29. Checking for alphabetic input</b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># isalpha.sh: Using a "case" structure to filter a string.</span>

SUCCESS=0
FAILURE=1   <span class="hljs-comment">#  Was FAILURE=-1,</span>
            <span class="hljs-comment">#+ but Bash no longer allows negative return value.</span>

isalpha ()  <span class="hljs-comment"># Tests whether *first character* of input string is alphabetic.</span>
{
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]                <span class="hljs-comment"># No argument passed?</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">return</span> <span class="hljs-variable">$FAILURE</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-keyword">in</span>
  [a-zA-Z]*) <span class="hljs-built_in">return</span> <span class="hljs-variable">$SUCCESS</span>;;  <span class="hljs-comment"># Begins with a letter?</span>
  *        ) <span class="hljs-built_in">return</span> <span class="hljs-variable">$FAILURE</span>;;
<span class="hljs-keyword">esac</span>
}             <span class="hljs-comment"># Compare this with "isalpha ()" function in C.</span>


isalpha2 ()   <span class="hljs-comment"># Tests whether *entire string* is alphabetic.</span>
{
  [ <span class="hljs-variable">$#</span> -eq 1 ] || <span class="hljs-built_in">return</span> <span class="hljs-variable">$FAILURE</span>

  <span class="hljs-keyword">case</span> <span class="hljs-variable">$1</span> <span class="hljs-keyword">in</span>
  *[!a-zA-Z]*|<span class="hljs-string">""</span>) <span class="hljs-built_in">return</span> <span class="hljs-variable">$FAILURE</span>;;
               *) <span class="hljs-built_in">return</span> <span class="hljs-variable">$SUCCESS</span>;;
  <span class="hljs-keyword">esac</span>
}

isdigit ()    <span class="hljs-comment"># Tests whether *entire string* is numerical.</span>
{             <span class="hljs-comment"># In other words, tests for integer variable.</span>
  [ <span class="hljs-variable">$#</span> -eq 1 ] || <span class="hljs-built_in">return</span> <span class="hljs-variable">$FAILURE</span>

  <span class="hljs-keyword">case</span> <span class="hljs-variable">$1</span> <span class="hljs-keyword">in</span>
    *[!0-9]*|<span class="hljs-string">""</span>) <span class="hljs-built_in">return</span> <span class="hljs-variable">$FAILURE</span>;;
              *) <span class="hljs-built_in">return</span> <span class="hljs-variable">$SUCCESS</span>;;
  <span class="hljs-keyword">esac</span>
}



check_var ()  <span class="hljs-comment"># Front-end to isalpha ().</span>
{
<span class="hljs-keyword">if</span> isalpha <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"$*\" begins with an alpha character."</span>
  <span class="hljs-keyword">if</span> isalpha2 <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
  <span class="hljs-keyword">then</span>        <span class="hljs-comment"># No point in testing if first char is non-alpha.</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"$*\" contains only alpha characters."</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"$*\" contains at least one non-alpha character."</span>
  <span class="hljs-keyword">fi</span>  
<span class="hljs-keyword">else</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"$*\" begins with a non-alpha character."</span>
              <span class="hljs-comment"># Also "non-alpha" if no argument passed.</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span>

}

digit_check ()  <span class="hljs-comment"># Front-end to isdigit ().</span>
{
<span class="hljs-keyword">if</span> isdigit <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"$*\" contains only digits [0 - 9]."</span>
<span class="hljs-keyword">else</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"\"$*\" has at least one non-digit character."</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span>

}

a=23skidoo
b=H3llo
c=-What?
d=What?
e=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$b</span>)   <span class="hljs-comment"># Command substitution.</span>
f=AbcDef
g=27234
h=27a34
i=27.34

check_var <span class="hljs-variable">$a</span>
check_var <span class="hljs-variable">$b</span>
check_var <span class="hljs-variable">$c</span>
check_var <span class="hljs-variable">$d</span>
check_var <span class="hljs-variable">$e</span>
check_var <span class="hljs-variable">$f</span>
check_var     <span class="hljs-comment"># No argument passed, so what happens?</span>
<span class="hljs-comment">#</span>
digit_check <span class="hljs-variable">$g</span>
digit_check <span class="hljs-variable">$h</span>
digit_check <span class="hljs-variable">$i</span>


<span class="hljs-built_in">exit</span> 0        <span class="hljs-comment"># Script improved by S.C.</span>

<span class="hljs-comment"># Exercise:</span>
<span class="hljs-comment"># --------</span>
<span class="hljs-comment">#  Write an 'isfloat ()' function that tests for floating point numbers.</span>
<span class="hljs-comment">#  Hint: The function duplicates 'isdigit ()',</span>
<span class="hljs-comment">#+ but adds a test for a mandatory decimal point.</span></pre>
                </td>
              </tr>
            </tbody></table>
          </div>
        </dd>
        <dt><a name="SELECTREF" id="SELECTREF"></a><b class="COMMAND">select</b></dt>
        <dd>
          <p>The <b class="COMMAND">select</b> construct, adopted from the Korn Shell, is yet another tool for building menus.</p>
          <p><b class="COMMAND">select</b> <tt class="REPLACEABLE"><i>variable</i></tt> [in <tt class="REPLACEABLE"><i>list</i></tt>]<br>
          do<br>
          <tt class="REPLACEABLE"><i>command</i></tt>...<br>
          break<br>
          done</p>
          <p>This prompts the user to enter one of the choices presented in the variable list. Note that <b class="COMMAND">select</b> uses the <tt class="VARNAME">$PS3</tt> prompt (<tt class="PROMPT">#?</tt> ) by default, but this may be changed.</p>
          <div class="EXAMPLE">
            <a name="EX31" id="EX31"></a>
            <p><b>Example 11-30. Creating menus using <i class="FIRSTTERM">select</i></b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

PS3=<span class="hljs-string">'Choose your favorite vegetable: '</span> <span class="hljs-comment"># Sets the prompt string.</span>
                                       <span class="hljs-comment"># Otherwise it defaults to #? .</span>

<span class="hljs-built_in">echo</span>

select vegetable <span class="hljs-keyword">in</span> <span class="hljs-string">"beans"</span> <span class="hljs-string">"carrots"</span> <span class="hljs-string">"potatoes"</span> <span class="hljs-string">"onions"</span> <span class="hljs-string">"rutabagas"</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Your favorite veggie is <span class="hljs-variable">$vegetable</span>."</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Yuck!"</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">break</span>  <span class="hljs-comment"># What happens if there is no 'break' here?</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">exit</span>

<span class="hljs-comment"># Exercise:</span>
<span class="hljs-comment"># --------</span>
<span class="hljs-comment">#  Fix this script to accept user input not specified in</span>
<span class="hljs-comment">#+ the "select" statement.</span>
<span class="hljs-comment">#  For example, if the user inputs "peas,"</span>
<span class="hljs-comment">#+ the script would respond "Sorry. That is not on the menu."</span></pre>
                </td>
              </tr>
            </tbody></table>
          </div>
          <p><a name="INLISTOMIT" id="INLISTOMIT"></a></p>
          <p>If <tt class="USERINPUT"><b>in <tt class="REPLACEABLE"><i>list</i></tt></b></tt> is omitted, then <b class="COMMAND">select</b> uses the list of command line arguments (<tt class="VARNAME">$@</tt>) passed to the script or the function containing the <b class="COMMAND">select</b> construct.</p>
          <p>Compare this to the behavior of a</p>
          <p><b class="COMMAND">for</b> <tt class="REPLACEABLE"><i>variable</i></tt> [in <tt class="REPLACEABLE"><i>list</i></tt>]</p>construct with the <tt class="USERINPUT"><b>in <tt class="REPLACEABLE"><i>list</i></tt></b></tt> omitted.
          <div class="EXAMPLE">
            <a name="EX32" id="EX32"></a>
            <p><b>Example 11-31. Creating menus using <i class="FIRSTTERM">select</i> in a function</b></p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

PS3=<span class="hljs-string">'Choose your favorite vegetable: '</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-function"><span class="hljs-title">choice_of</span></span>()
{
select vegetable
<span class="hljs-comment"># [in list] omitted, so 'select' uses arguments passed to function.</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Your favorite veggie is <span class="hljs-variable">$vegetable</span>."</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Yuck!"</span>
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">break</span>
<span class="hljs-keyword">done</span>
}

choice_of beans rice carrots radishes rutabaga spinach
<span class="hljs-comment">#         $1    $2   $3      $4       $5       $6</span>
<span class="hljs-comment">#         passed to choice_of() function</span>

<span class="hljs-built_in">exit</span> 0</pre>
                </td>
              </tr>
            </tbody></table>
          </div>
          <p>See also <a href="bashver2.html#RESISTOR">Example 37-3</a>.</p>
        </dd>
      </dl>
    </div>
  </div>
  <h3 class="FOOTNOTES">Notes</h3>
  <table border="0" class="FOOTNOTES" width="100%">
    <tbody><tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN7087" href="testbranch.html#AEN7087" id="FTN.AEN7087"><span class="footnote">[1]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p>Pattern-match lines may also <em>start</em> with a <b class="COMMAND">(</b> left paren to give the layout a more structured appearance.</p>
        <table border="0" bgcolor="#E0E0E0" width="90%">
          <tbody><tr>
            <td>
              <pre class="PROGRAMLISTING hljs"><span class="hljs-keyword">case</span> $( arch ) <span class="hljs-keyword">in</span>   <span class="hljs-comment"># $( arch ) returns machine architecture.</span>
  ( i386 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"80386-based machine"</span>;;
<span class="hljs-comment"># ^      ^</span>
  ( i486 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"80486-based machine"</span>;;
  ( i586 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Pentium-based machine"</span>;;
  ( i686 ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Pentium2+-based machine"</span>;;
  (    * ) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Other type of machine"</span>;;
<span class="hljs-keyword">esac</span></pre>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
  </tbody></table>
  <div class="NAVFOOTER">
    <hr align="left" width="100%">
    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td width="33%" align="left" valign="top"><a href="loopcontrol.html" accesskey="P">Prev</a></td>
        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
        <td width="33%" align="right" valign="top"><a href="commandsub.html" accesskey="N">Next</a></td>
      </tr>
      <tr>
        <td width="33%" align="left" valign="top">Loop Control</td>
        <td width="34%" align="center" valign="top"><a href="loops.html" accesskey="U">Up</a></td>
        <td width="33%" align="right" valign="top">Command Substitution</td>
      </tr>
    </tbody></table>
  </div>


<button id="theme-toggle">Toggle theme</button></body></html>
