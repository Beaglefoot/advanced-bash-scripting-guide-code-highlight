<!DOCTYPE html><html><head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
  <title>Security Issues</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
  <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
  <link rel="UP" title="Miscellany" href="miscellany.html">
  <link rel="PREVIOUS" title="Assorted Tips" href="assortedtips.html">
  <link rel="NEXT" title="Portability Issues" href="portabilityissues.html">
<link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"><script>
    document.addEventListener('DOMContentLoaded', () => {
      const manuallySetTheme = localStorage.getItem('bash-guide-theme');

      if (manuallySetTheme === 'dark') document.body.classList.add('dark-mode');
      else if (manuallySetTheme === 'light') document.body.classList.remove('dark-mode');
      else if (matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }

      document.getElementById('theme-toggle').addEventListener(
        'click',
        () => {
          const isSet = document.body.classList.toggle('dark-mode');
          localStorage.setItem('bash-guide-theme', isSet ? 'dark' : 'light');
        }
      );
    });
  </script></head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
      </tr>
      <tr>
        <td width="10%" align="left" valign="bottom"><a href="assortedtips.html" accesskey="P">Prev</a></td>
        <td width="80%" align="center" valign="bottom">Chapter 36. Miscellany</td>
        <td width="10%" align="right" valign="bottom"><a href="portabilityissues.html" accesskey="N">Next</a></td>
      </tr>
    </tbody></table>
    <hr align="left" width="100%">
  </div>
  <div class="SECT1">
    <h1 class="SECT1"><a name="SECURITYISSUES" id="SECURITYISSUES"></a>36.8. Security Issues</h1>
    <div class="SECT2">
      <h2 class="SECT2"><a name="INFECTEDSCRIPTS" id="INFECTEDSCRIPTS"></a>36.8.1. Infected Shell Scripts</h2>
      <p><a name="INFECTEDSCRIPTS1" id="INFECTEDSCRIPTS1"></a></p>
      <p>A brief warning about script security is indicated. A shell script may contain a <i class="FIRSTTERM">worm</i>, <i class="FIRSTTERM">trojan</i>, or even a <i class="FIRSTTERM">virus</i>. For that reason, never run as <i class="FIRSTTERM">root</i> a script (or permit it to be inserted into the system startup scripts in <tt class="FILENAME">/etc/rc.d</tt>) unless you have obtained said script from a trusted source or you have carefully analyzed it to make certain it does nothing harmful.</p>
      <p>Various researchers at Bell Labs and other sites, including M. Douglas McIlroy, Tom Duff, and Fred Cohen have investigated the implications of shell script viruses. They conclude that it is all too easy for even a novice, a <span class="QUOTE">"script kiddie,"</span> to write one. <a name="AEN20748" href="#FTN.AEN20748" id="AEN20748"><span class="footnote">[1]</span></a></p>
      <p>Here is yet another reason to learn scripting. Being able to look at and understand scripts may protect your system from being compromised by a rogue script.</p>
    </div>
    <div class="SECT2">
      <h2 class="SECT2"><a name="HIDINGSOURCE" id="HIDINGSOURCE"></a>36.8.2. Hiding Shell Script Source</h2>
      <p>For security purposes, it may be necessary to render a script unreadable. If only there were a utility to create a stripped binary executable from a script. Francisco Rosales' <a href="http://www.datsi.fi.upm.es/~frosal/sources/" target="_top">shc -- generic shell script compiler</a> does exactly that.</p>
      <p>Unfortunately, according to <a href="http://www.linuxjournal.com/article/8256" target="_top">an article</a> in the October, 2005 <em>Linux Journal</em>, the binary can, in at least some cases, be decrypted to recover the original script source. Still, this could be a useful method of keeping scripts secure from all but the most skilled hackers.</p>
    </div>
    <div class="SECT2">
      <h2 class="SECT2"><a name="SECURITYTIPS" id="SECURITYTIPS"></a>36.8.3. Writing Secure Shell Scripts</h2>
      <p><a name="SECURITYTIPS1" id="SECURITYTIPS1"></a></p>
      <p><em>Dan Stromberg</em> suggests the following guidelines for writing (relatively) secure shell scripts.</p>
      <ul>
        <li>
          <p>Don't put secret data in <a href="othertypesv.html#ENVREF">environment variables</a>.</p>
        </li>
        <li>
          <p>Don't pass secret data in an external command's arguments (pass them in via a <a href="special-chars.html#PIPEREF">pipe</a> or <a href="io-redirection.html#IOREDIRREF">redirection</a> instead).</p>
        </li>
        <li>
          <p>Set your <a href="internalvariables.html#PATHREF">$PATH</a> carefully. Don't just trust whatever path you inherit from the caller if your script is running as <i class="FIRSTTERM">root</i>. In fact, whenever you use an environment variable inherited from the caller, think about what could happen if the caller put something misleading in the variable, e.g., if the caller set <a href="internalvariables.html#HOMEDIRREF">$HOME</a> to <tt class="FILENAME">/etc</tt>.</p>
        </li>
      </ul>
    </div>
  </div>
  <h3 class="FOOTNOTES">Notes</h3>
  <table border="0" class="FOOTNOTES" width="100%">
    <tbody><tr>
      <td align="left" valign="top" width="5%"><a name="FTN.AEN20748" href="securityissues.html#AEN20748" id="FTN.AEN20748"><span class="footnote">[1]</span></a></td>
      <td align="left" valign="top" width="95%">
        <p>See Marius van Oers' article, <a href="http://www.virusbtn.com/magazine/archives/200204/malshell.xml" target="_top">Unix Shell Scripting Malware</a>, and also the <a href="biblio.html#DENNINGREF"><em>Denning</em> reference</a> in the <i class="FIRSTTERM">bibliography</i>.</p>
      </td>
    </tr>
  </tbody></table>
  <div class="NAVFOOTER">
    <hr align="left" width="100%">
    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td width="33%" align="left" valign="top"><a href="assortedtips.html" accesskey="P">Prev</a></td>
        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
        <td width="33%" align="right" valign="top"><a href="portabilityissues.html" accesskey="N">Next</a></td>
      </tr>
      <tr>
        <td width="33%" align="left" valign="top">Assorted Tips</td>
        <td width="34%" align="center" valign="top"><a href="miscellany.html" accesskey="U">Up</a></td>
        <td width="33%" align="right" valign="top">Portability Issues</td>
      </tr>
    </tbody></table>
  </div>


<button id="theme-toggle">Toggle theme</button></body></html>
