<!DOCTYPE html><html><head>
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
    <title>Complex Commands</title>
    <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
    <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
    <link rel="UP" title="External Filters, Programs and Commands" href="external.html">
    <link rel="PREVIOUS" title="Basic Commands" href="basic.html">
    <link rel="NEXT" title="Time / Date Commands" href="timedate.html">
  <link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"><script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }

      document.getElementById('theme-toggle').addEventListener(
        'click',
        () => document.body.classList.toggle('dark-mode')
      );
    });
  </script></head>
  <body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
    <div class="NAVHEADER">
      <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
          <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
        </tr>
        <tr>
          <td width="10%" align="left" valign="bottom">
            <a href="basic.html" accesskey="P">Prev</a>
          </td>
          <td width="80%" align="center" valign="bottom">
            Chapter 16. External Filters, Programs and Commands
          </td>
          <td width="10%" align="right" valign="bottom">
            <a href="timedate.html" accesskey="N">Next</a>
          </td>
        </tr>
      </tbody></table>
      <hr align="left" width="100%">
    </div>
    <div class="SECT1">
      <h1 class="SECT1">
        <a name="MOREADV" id="MOREADV"></a>16.2. Complex Commands
      </h1>
      <div class="VARIABLELIST">
        <p>
          <b><a name="CCLISTING1" id="CCLISTING1"></a>Commands for more advanced
            users</b>
        </p>
        <dl>
          <dt>
            <a name="FINDREF" id="FINDREF"></a><b class="COMMAND">find</b>
          </dt>
          <dd>
            <p><a name="FINDREF0" id="FINDREF0"></a></p>
            <p>
              -exec <tt class="REPLACEABLE"><i>COMMAND</i></tt> \;
            </p>
            <p>
              Carries out <tt class="REPLACEABLE"><i>COMMAND</i></tt> on each
              file that <b class="COMMAND">find</b> matches. The command
              sequence terminates with <span class="TOKEN">;</span> (the
              <span class="QUOTE">";"</span> is
              <a href="escapingsection.html#ESCP">escaped</a> to make certain
              the shell passes it to <b class="COMMAND">find</b> literally,
              without interpreting it as a special character).
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> find ~/ -name <span class="hljs-string">'*.txt'</span></span>
/home/bozo/.kde/share/apps/karm/karmdata.txt
 /home/bozo/misc/irmeyc.txt
 /home/bozo/test-scripts/1.txt
              </pre>
                </td>
              </tr>
            </tbody></table>
            <p><a name="CURLYBRACKETSREF" id="CURLYBRACKETSREF"></a></p>
            <p>
              If <tt class="REPLACEABLE"><i>COMMAND</i></tt> contains
              <span class="TOKEN">{}</span>, then
              <b class="COMMAND">find</b> substitutes the full path name of the
              selected file for <span class="QUOTE">"{}"</span>.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs">find ~/ -name <span class="hljs-string">'core*'</span> -<span class="hljs-built_in">exec</span> rm {} \;
<span class="hljs-comment"># Removes all core dump files from user's home directory.</span></pre>
                </td>
              </tr>
            </tbody></table>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs">find /home/bozo/projects -mtime -1
<span class="hljs-comment">#                               ^   Note minus sign!</span>
<span class="hljs-comment">#  Lists all files in /home/bozo/projects directory tree</span>
<span class="hljs-comment">#+ that were modified within the last day (current_day - 1).</span>
<span class="hljs-comment">#</span>
find /home/bozo/projects -mtime 1
<span class="hljs-comment">#  Same as above, but modified *exactly* one day ago.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  mtime = last modification time of the target file</span>
<span class="hljs-comment">#  ctime = last status change time (via 'chmod' or otherwise)</span>
<span class="hljs-comment">#  atime = last access time</span>

DIR=/home/bozo/junk_files
find <span class="hljs-string">"<span class="hljs-variable">$DIR</span>"</span> -<span class="hljs-built_in">type</span> f -atime +5 -<span class="hljs-built_in">exec</span> rm {} \;
<span class="hljs-comment">#                          ^           ^^</span>
<span class="hljs-comment">#  Curly brackets are placeholder for the path name output by "find."</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  Deletes all files in "/home/bozo/junk_files"</span>
<span class="hljs-comment">#+ that have not been accessed in *at least* 5 days (plus sign ... +5).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  "-type filetype", where</span>
<span class="hljs-comment">#  f = regular file</span>
<span class="hljs-comment">#  d = directory</span>
<span class="hljs-comment">#  l = symbolic link, etc.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  (The 'find' manpage and info page have complete option listings.)</span></pre>
                </td>
              </tr>
            </tbody></table>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs">find /etc -<span class="hljs-built_in">exec</span> grep <span class="hljs-string">'[0-9][0-9]*[.][0-9][0-9]*[.][0-9][0-9]*[.][0-9][0-9]*'</span> {} \;

<span class="hljs-comment"># Finds all IP addresses (xxx.xxx.xxx.xxx) in /etc directory files.</span>
<span class="hljs-comment"># There a few extraneous hits. Can they be filtered out?</span>

<span class="hljs-comment"># Possibly by:</span>

find /etc -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> cat <span class="hljs-string">'{}'</span> \; | tr -c <span class="hljs-string">'.[:digit:]'</span> <span class="hljs-string">'\n'</span> \
| grep <span class="hljs-string">'^[^.][^.]*\.[^.][^.]*\.[^.][^.]*\.[^.][^.]*$'</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  [:digit:] is one of the character classes</span>
<span class="hljs-comment">#+ introduced with the POSIX 1003.2 standard. </span>

<span class="hljs-comment"># Thanks, Stephane Chazelas. </span></pre>
                </td>
              </tr>
            </tbody></table>
            <div class="NOTE">
              <table class="NOTE" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The <tt class="OPTION">-exec</tt> option to
                      <b class="COMMAND">find</b> should not be confused with
                      the <a href="internal.html#EXECREF">exec</a> shell
                      builtin.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="EX57" id="EX57"></a>
              <p>
                <b>Example 16-3. <i class="FIRSTTERM">Badname</i>, eliminate
                  file names in current directory containing bad characters and
                  <a href="special-chars.html#WHITESPACEREF">whitespace</a>.</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># badname.sh</span>
<span class="hljs-comment"># Delete filenames in current directory containing bad characters.</span>

<span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> *
<span class="hljs-keyword">do</span>
  badname=`<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$filename</span>"</span> | sed -n /[\+\{\;\"\\\=\?~\(\)\&lt;\&gt;\&amp;\*\|\$]/p`
<span class="hljs-comment"># badname=`echo "$filename" | sed -n '/[+{;"\=?~()&lt;&gt;&amp;*|$]/p'`  also works.</span>
<span class="hljs-comment"># Deletes files containing these nasties:     + { ; " \ = ? ~ ( ) &lt; &gt; &amp; * | $</span>
<span class="hljs-comment">#</span>
  rm <span class="hljs-variable">$badname</span> 2&gt;/dev/null
<span class="hljs-comment">#             ^^^^^^^^^^^ Error messages deep-sixed.</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Now, take care of files containing all manner of whitespace.</span>
find . -name <span class="hljs-string">"* *"</span> -<span class="hljs-built_in">exec</span> rm -f {} \;
<span class="hljs-comment"># The path name of the file that _find_ finds replaces the "{}".</span>
<span class="hljs-comment"># The '\' ensures that the ';' is interpreted literally, as end of command.</span>

<span class="hljs-built_in">exit</span> 0

<span class="hljs-comment">#---------------------------------------------------------------------</span>
<span class="hljs-comment"># Commands below this line will not execute because of _exit_ command.</span>

<span class="hljs-comment"># An alternative to the above script:</span>
find . -name <span class="hljs-string">'*[+{;"\\=?~()&lt;&gt;&amp;*|$ ]*'</span> -maxdepth 0 \
-<span class="hljs-built_in">exec</span> rm -f <span class="hljs-string">'{}'</span> \;
<span class="hljs-comment">#  The "-maxdepth 0" option ensures that _find_ will not search</span>
<span class="hljs-comment">#+ subdirectories below $PWD.</span>

<span class="hljs-comment"># (Thanks, S.C.)</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="IDELETE" id="IDELETE"></a>
              <p>
                <b>Example 16-4. Deleting a file by its
                  <i class="FIRSTTERM">inode</i> number</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># idelete.sh: Deleting a file by its inode number.</span>

<span class="hljs-comment">#  This is useful when a filename starts with an illegal character,</span>
<span class="hljs-comment">#+ such as ? or -.</span>

ARGCOUNT=1                      <span class="hljs-comment"># Filename arg must be passed to script.</span>
E_WRONGARGS=70
E_FILE_NOT_EXIST=71
E_CHANGED_MIND=72

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne <span class="hljs-string">"<span class="hljs-variable">$ARGCOUNT</span>"</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: `basename <span class="hljs-variable">$0</span>` filename"</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_WRONGARGS</span>
<span class="hljs-keyword">fi</span>  

<span class="hljs-keyword">if</span> [ ! -e <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"File \""</span><span class="hljs-variable">$1</span><span class="hljs-string">"\" does not exist."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_FILE_NOT_EXIST</span>
<span class="hljs-keyword">fi</span>  

inum=`ls -i | grep <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> | awk <span class="hljs-string">'{print $1}'</span>`
<span class="hljs-comment"># inum = inode (index node) number of file</span>
<span class="hljs-comment"># -----------------------------------------------------------------------</span>
<span class="hljs-comment"># Every file has an inode, a record that holds its physical address info.</span>
<span class="hljs-comment"># -----------------------------------------------------------------------</span>

<span class="hljs-built_in">echo</span>; <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Are you absolutely sure you want to delete \"<span class="hljs-variable">$1</span>\" (y/n)? "</span>
<span class="hljs-comment"># The '-v' option to 'rm' also asks this.</span>
<span class="hljs-built_in">read</span> answer
<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$answer</span>"</span> <span class="hljs-keyword">in</span>
[nN]) <span class="hljs-built_in">echo</span> <span class="hljs-string">"Changed your mind, huh?"</span>
      <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_CHANGED_MIND</span>
      ;;
*)    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Deleting file \"<span class="hljs-variable">$1</span>\"."</span>;;
<span class="hljs-keyword">esac</span>

find . -inum <span class="hljs-variable">$inum</span> -<span class="hljs-built_in">exec</span> rm {} \;
<span class="hljs-comment">#                           ^^</span>
<span class="hljs-comment">#        Curly brackets are placeholder</span>
<span class="hljs-comment">#+       for text output by "find."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"File "</span>\"<span class="hljs-variable">$1</span><span class="hljs-string">"\" deleted!"</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p>
              The <b class="COMMAND">find</b> command also works without the
              <tt class="OPTION">-exec</tt> option.
            </p>
            <table border="0" bgcolor="#E0E0E0" width="90%">
              <tbody><tr>
                <td>
                  <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment">#  Find suid root files.</span>
<span class="hljs-comment">#  A strange suid file might indicate a security hole,</span>
<span class="hljs-comment">#+ or even a system intrusion.</span>

directory=<span class="hljs-string">"/usr/sbin"</span>
<span class="hljs-comment"># Might also try /sbin, /bin, /usr/bin, /usr/local/bin, etc.</span>
permissions=<span class="hljs-string">"+4000"</span>  <span class="hljs-comment"># suid root (dangerous!)</span>


<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> $( find <span class="hljs-string">"<span class="hljs-variable">$directory</span>"</span> -perm <span class="hljs-string">"<span class="hljs-variable">$permissions</span>"</span> )
<span class="hljs-keyword">do</span>
  ls -ltF --author <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>
<span class="hljs-keyword">done</span></pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              See <a href="filearchiv.html#EX48">Example 16-30</a>,
              <a href="special-chars.html#EX58">Example 3-4</a>, and
              <a href="loops1.html#FINDSTRING">Example 11-10</a> for scripts
              using <b class="COMMAND">find</b>. Its
              <a href="basic.html#MANREF">manpage</a> provides more detail on
              this complex and powerful command.
            </p>
          </dd>
          <dt>
            <a name="XARGSREF" id="XARGSREF"></a><b class="COMMAND">xargs</b>
          </dt>
          <dd>
            <p>
              A filter for feeding arguments to a command, and also a tool for
              assembling the commands themselves. It breaks a data stream into
              small enough chunks for filters and commands to process. Consider
              it as a powerful replacement for
              <a href="commandsub.html#BACKQUOTESREF">backquotes</a>. In
              situations where
              <a href="commandsub.html#COMMANDSUBREF">command substitution</a>
              fails with a
              <span class="ERRORNAME">too many arguments</span> error,
              substituting <b class="COMMAND">xargs</b> often works.
              <a name="AEN10465" href="#FTN.AEN10465" id="AEN10465"><span class="footnote">[1]</span></a>
              Normally, <b class="COMMAND">xargs</b> reads from
              <tt class="FILENAME">stdin</tt> or from a pipe, but it can also be
              given the output of a file.
            </p>
            <p>
              The default command for <b class="COMMAND">xargs</b> is
              <a href="internal.html#ECHOREF">echo</a>. This means that input
              piped to <b class="COMMAND">xargs</b> may have linefeeds and other
              whitespace characters stripped out.
            </p>
            <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
              <tbody><tr>
                <td>
                  <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> ls -l</span>
total 0
 -rw-rw-r--    1 bozo  bozo         0 Jan 29 23:58 file1
 -rw-rw-r--    1 bozo  bozo         0 Jan 29 23:58 file2
<span class="hljs-meta">


bash$</span><span class="bash"> ls -l | xargs</span>
total 0 -rw-rw-r-- 1 bozo bozo 0 Jan 29 23:58 file1 -rw-rw-r-- 1 bozo bozo 0 Jan...
<span class="hljs-meta">


bash$</span><span class="bash"> find ~/mail -<span class="hljs-built_in">type</span> f | xargs grep <span class="hljs-string">"Linux"</span></span>
./misc:User-Agent: slrn/0.9.8.1 (Linux)
 ./sent-mail-jul-2005: hosted by the Linux Documentation Project.
 ./sent-mail-jul-2005: (Linux Documentation Project Site, rtf version)
 ./sent-mail-jul-2005: Subject: Criticism of Bozo's Windows/Linux article
 ./sent-mail-jul-2005: while mentioning that the Linux ext2/ext3 filesystem
 . . .
              </pre>
                </td>
              </tr>
            </tbody></table>
            <p>
              <tt class="USERINPUT"><b>ls | xargs -p -l gzip</b></tt>
              <a href="filearchiv.html#GZIPREF">gzips</a> every file in current
              directory, one at a time, prompting before each operation.
            </p>
            <p><a name="XARGSONEATATIME" id="XARGSONEATATIME"></a></p>
            <div class="NOTE">
              <table class="NOTE no-border" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/note.gif" hspace="5" alt="Note">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      Note that <i class="FIRSTTERM">xargs</i> processes the
                      arguments passed to it sequentially,
                      <em>one at a time</em>.
                    </p>
                    <table border="1" bgcolor="#E0E0E0" width="90%" class="no-border">
                      <tbody><tr>
                        <td>
                          <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> find /usr/bin | xargs file</span>
/usr/bin:          directory
 /usr/bin/foomatic-ppd-options:          perl script text executable
 . . .
              </pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="XARGSLIMARGS" id="XARGSLIMARGS"></a></p>
            <div class="TIP">
              <table class="TIP" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      An interesting <i class="FIRSTTERM">xargs</i> option is
                      <tt class="OPTION">-n <tt class="REPLACEABLE"><i>NN</i></tt></tt>, which limits to
                      <tt class="REPLACEABLE"><i>NN</i></tt> the number of
                      arguments passed.
                    </p>
                    <p>
                      <tt class="USERINPUT"><b>ls | xargs -n 8 echo</b></tt>
                      lists the files in the current directory in
                      <tt class="LITERAL">8</tt> columns.
                    </p>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="XARGSWS" id="XARGSWS"></a></p>
            <div class="TIP">
              <table class="TIP" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      Another useful option is <tt class="OPTION">-0</tt>, in
                      combination with
                      <tt class="USERINPUT"><b>find -print0</b></tt> or
                      <tt class="USERINPUT"><b>grep -lZ</b></tt>. This allows handling arguments containing whitespace or
                      quotes.
                    </p>
                    <p>
                      <tt class="USERINPUT"><b>find / -type f -print0 | xargs -0 grep -liwZ GUI |
                          xargs -0 rm -f</b></tt>
                    </p>
                    <p>
                      <tt class="USERINPUT"><b>grep -rliwZ GUI / | xargs -0 rm -f</b></tt>
                    </p>
                    <p>
                      Either of the above will remove any file containing
                      <span class="QUOTE">"GUI"</span>. <em>(Thanks, S.C.)</em>
                    </p>
                    <p>Or:</p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs">cat /proc/<span class="hljs-string">"<span class="hljs-variable">$pid</span>"</span>/<span class="hljs-string">"<span class="hljs-variable">$OPTION</span>"</span> | xargs -0 <span class="hljs-built_in">echo</span>
<span class="hljs-comment">#  Formats output:         ^^^^^^^^^^^^^^^</span>
<span class="hljs-comment">#  From Han Holl's fixup of "get-commandline.sh"</span>
<span class="hljs-comment">#+ script in "/dev and /proc" chapter.</span></pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="TIP">
              <table class="TIP" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/tip.gif" hspace="5" alt="Tip">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      <a name="XARGSMULTIPROCESS" id="XARGSMULTIPROCESS"></a>
                    </p>
                    <p>
                      The <tt class="OPTION">-P</tt> option to
                      <i class="FIRSTTERM">xargs</i> permits running processes
                      in parallel. This speeds up execution in a machine with a
                      multicore CPU.
                    </p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

ls *gif | xargs -t -n1 -P2 gif2png
<span class="hljs-comment"># Converts all the gif images in current directory to png.</span>

<span class="hljs-comment"># Options:</span>
<span class="hljs-comment"># =======</span>
<span class="hljs-comment"># -t    Print command to stderr.</span>
<span class="hljs-comment"># -n1   At most 1 argument per command line.</span>
<span class="hljs-comment"># -P2   Run up to 2 processes simultaneously.</span>

<span class="hljs-comment"># Thank you, Roberto Polli, for the inspiration.</span></pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="EX41" id="EX41"></a>
              <p>
                <b>Example 16-5. Logfile: Using
                  <i class="FIRSTTERM">xargs</i> to monitor system log</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Generates a log file in current directory</span>
<span class="hljs-comment"># from the tail end of /var/log/messages.</span>

<span class="hljs-comment"># Note: /var/log/messages must be world readable</span>
<span class="hljs-comment"># if this script invoked by an ordinary user.</span>
<span class="hljs-comment">#         #root chmod 644 /var/log/messages</span>

LINES=5

( date; uname -a ) &gt;&gt;logfile
<span class="hljs-comment"># Time and machine name</span>
<span class="hljs-built_in">echo</span> ---------------------------------------------------------- &gt;&gt;logfile
tail -n <span class="hljs-variable">$LINES</span> /var/<span class="hljs-built_in">log</span>/messages | xargs | fmt -s &gt;&gt;logfile
<span class="hljs-built_in">echo</span> &gt;&gt;logfile
<span class="hljs-built_in">echo</span> &gt;&gt;logfile

<span class="hljs-built_in">exit</span> 0

<span class="hljs-comment">#  Note:</span>
<span class="hljs-comment">#  ----</span>
<span class="hljs-comment">#  As Frank Wang points out,</span>
<span class="hljs-comment">#+ unmatched quotes (either single or double quotes) in the source file</span>
<span class="hljs-comment">#+ may give xargs indigestion.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  He suggests the following substitution for line 15:</span>
<span class="hljs-comment">#  tail -n $LINES /var/log/messages | tr -d "\"'" | xargs | fmt -s &gt;&gt;logfile</span>



<span class="hljs-comment">#  Exercise:</span>
<span class="hljs-comment">#  --------</span>
<span class="hljs-comment">#  Modify this script to track changes in /var/log/messages at intervals</span>
<span class="hljs-comment">#+ of 20 minutes.</span>
<span class="hljs-comment">#  Hint: Use the "watch" command. </span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <p><a name="XARGSCURLYREF" id="XARGSCURLYREF"></a></p>
            <p>
              <a href="moreadv.html#CURLYBRACKETSREF">As in <b class="COMMAND">find</b></a>, a curly bracket pair serves as a placeholder for replacement
              text.
            </p>
            <div class="EXAMPLE">
              <a name="EX42" id="EX42"></a>
              <p>
                <b>Example 16-6. Copying files in current directory to
                  another</b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># copydir.sh</span>

<span class="hljs-comment">#  Copy (verbose) all files in current directory ($PWD)</span>
<span class="hljs-comment">#+ to directory specified on command-line.</span>

E_NOARGS=85

<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]   <span class="hljs-comment"># Exit if no argument given.</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: `basename <span class="hljs-variable">$0</span>` directory-to-copy-to"</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_NOARGS</span>
<span class="hljs-keyword">fi</span>  

ls . | xargs -i -t cp ./{} <span class="hljs-variable">$1</span>
<span class="hljs-comment">#            ^^ ^^      ^^</span>
<span class="hljs-comment">#  -t is "verbose" (output command-line to stderr) option.</span>
<span class="hljs-comment">#  -i is "replace strings" option.</span>
<span class="hljs-comment">#  {} is a placeholder for output text.</span>
<span class="hljs-comment">#  This is similar to the use of a curly-bracket pair in "find."</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  List the files in current directory (ls .),</span>
<span class="hljs-comment">#+ pass the output of "ls" as arguments to "xargs" (-i -t options),</span>
<span class="hljs-comment">#+ then copy (cp) these arguments ({}) to new directory ($1).  </span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  The net result is the exact equivalent of</span>
<span class="hljs-comment">#+   cp * $1</span>
<span class="hljs-comment">#+ unless any of the filenames has embedded "whitespace" characters.</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="KILLBYNAME" id="KILLBYNAME"></a>
              <p><b>Example 16-7. Killing processes by name</b></p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># kill-byname.sh: Killing processes by name.</span>
<span class="hljs-comment"># Compare this script with kill-process.sh.</span>

<span class="hljs-comment">#  For instance,</span>
<span class="hljs-comment">#+ try "./kill-byname.sh xterm" --</span>
<span class="hljs-comment">#+ and watch all the xterms on your desktop disappear.</span>

<span class="hljs-comment">#  Warning:</span>
<span class="hljs-comment">#  -------</span>
<span class="hljs-comment">#  This is a fairly dangerous script.</span>
<span class="hljs-comment">#  Running it carelessly (especially as root)</span>
<span class="hljs-comment">#+ can cause data loss and other undesirable effects.</span>

E_BADARGS=66

<span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>  <span class="hljs-comment"># No command-line arg supplied?</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: `basename <span class="hljs-variable">$0</span>` Process(es)_to_kill"</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_BADARGS</span>
<span class="hljs-keyword">fi</span>


PROCESS_NAME=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
ps ax | grep <span class="hljs-string">"<span class="hljs-variable">$PROCESS_NAME</span>"</span> | awk <span class="hljs-string">'{print $1}'</span> | xargs -i <span class="hljs-built_in">kill</span> {} 2&amp;&gt;/dev/null
<span class="hljs-comment">#                                                       ^^      ^^</span>

<span class="hljs-comment"># ---------------------------------------------------------------</span>
<span class="hljs-comment"># Notes:</span>
<span class="hljs-comment"># -i is the "replace strings" option to xargs.</span>
<span class="hljs-comment"># The curly brackets are the placeholder for the replacement.</span>
<span class="hljs-comment"># 2&amp;&gt;/dev/null suppresses unwanted error messages.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Can  grep "$PROCESS_NAME" be replaced by pidof "$PROCESS_NAME"?</span>
<span class="hljs-comment"># ---------------------------------------------------------------</span>

<span class="hljs-built_in">exit</span> $?

<span class="hljs-comment">#  The "killall" command has the same effect as this script,</span>
<span class="hljs-comment">#+ but using it is not quite as educational.</span></pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="EXAMPLE">
              <a name="WF2" id="WF2"></a>
              <p>
                <b>Example 16-8. Word frequency analysis using
                  <i class="FIRSTTERM">xargs</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># wf2.sh: Crude word frequency analysis on a text file.</span>

<span class="hljs-comment"># Uses 'xargs' to decompose lines of text into single words.</span>
<span class="hljs-comment"># Compare this example to the "wf.sh" script later on.</span>


<span class="hljs-comment"># Check for input file on command-line.</span>
ARGS=1
E_BADARGS=85
E_NOFILE=86

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne <span class="hljs-string">"<span class="hljs-variable">$ARGS</span>"</span> ]
<span class="hljs-comment"># Correct number of arguments passed to script?</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: `basename <span class="hljs-variable">$0</span>` filename"</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_BADARGS</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]       <span class="hljs-comment"># Does file exist?</span>
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"File \"<span class="hljs-variable">$1</span>\" does not exist."</span>
  <span class="hljs-built_in">exit</span> <span class="hljs-variable">$E_NOFILE</span>
<span class="hljs-keyword">fi</span>



<span class="hljs-comment">#####################################################</span>
cat <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> | xargs -n1 | \
<span class="hljs-comment">#  List the file, one word per line. </span>
tr A-Z a-z | \
<span class="hljs-comment">#  Shift characters to lowercase.</span>
sed -e <span class="hljs-string">'s/\.//g'</span>  -e <span class="hljs-string">'s/\,//g'</span> -e <span class="hljs-string">'s/ /\
/g'</span> | \
<span class="hljs-comment">#  Filter out periods and commas, and</span>
<span class="hljs-comment">#+ change space between words to linefeed,</span>
sort | uniq -c | sort -nr
<span class="hljs-comment">#  Finally remove duplicates, prefix occurrence count</span>
<span class="hljs-comment">#+ and sort numerically.</span>
<span class="hljs-comment">#####################################################</span>

<span class="hljs-comment">#  This does the same job as the "wf.sh" example,</span>
<span class="hljs-comment">#+ but a bit more ponderously, and it runs more slowly (why?).</span>

<span class="hljs-built_in">exit</span> $?</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
          <dt>
            <a name="EXPRREF" id="EXPRREF"></a><tt class="USERINPUT"><b>expr</b></tt>
          </dt>
          <dd>
            <p>
              All-purpose expression evaluator: Concatenates and evaluates the
              arguments according to the operation given (arguments must be
              separated by spaces). Operations may be arithmetic, comparison,
              string, or logical.
            </p>
            <div class="VARIABLELIST">
              <dl>
                <dt>
                  <tt class="USERINPUT"><b>expr 3 + 5</b></tt>
                </dt>
                <dd>
                  <p>returns <tt class="LITERAL">8</tt></p>
                </dd>
                <dt>
                  <tt class="USERINPUT"><b>expr 5 % 3</b></tt>
                </dt>
                <dd>
                  <p>returns 2</p>
                </dd>
                <dt>
                  <tt class="USERINPUT"><b>expr 1 / 0</b></tt>
                </dt>
                <dd>
                  <p>
                    returns the error message,
                    <span class="ERRORCODE">expr: division by zero</span>
                  </p>
                  <p>Illegal arithmetic operations not allowed.</p>
                </dd>
                <dt>
                  <tt class="USERINPUT"><b>expr 5 \* 3</b></tt>
                </dt>
                <dd>
                  <p>returns 15</p>
                  <p>
                    The multiplication operator must be escaped when used in an
                    arithmetic expression with <b class="COMMAND">expr</b>.
                  </p>
                </dd>
                <dt>
                  <tt class="USERINPUT"><b>y=`expr $y + 1`</b></tt>
                </dt>
                <dd>
                  <p>
                    Increment a variable, with the same effect as
                    <tt class="USERINPUT"><b>let y=y+1</b></tt> and
                    <tt class="USERINPUT"><b>y=$(($y+1))</b></tt>. This is an example of
                    <a href="arithexp.html#ARITHEXPREF">arithmetic expansion</a>.
                  </p>
                </dd>
                <dt>
                  <a name="EXPEXTRSUB" id="EXPEXTRSUB"></a><tt class="USERINPUT"><b>z=`expr substr $string $position $length`</b></tt>
                </dt>
                <dd>
                  <p>
                    Extract substring of $length characters, starting at
                    $position.
                  </p>
                </dd>
              </dl>
            </div>
            <div class="EXAMPLE">
              <a name="EX45" id="EX45"></a>
              <p>
                <b>Example 16-9. Using <i class="FIRSTTERM">expr</i></b>
              </p>
              <table border="0" bgcolor="#E0E0E0" width="90%">
                <tbody><tr>
                  <td>
                    <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># Demonstrating some of the uses of 'expr'</span>
<span class="hljs-comment"># =======================================</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Arithmetic Operators</span>
<span class="hljs-comment"># ---------- ---------</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Arithmetic Operators"</span>
<span class="hljs-built_in">echo</span>
a=`expr 5 + 3`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"5 + 3 = <span class="hljs-variable">$a</span>"</span>

a=`expr <span class="hljs-variable">$a</span> + 1`
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"a + 1 = <span class="hljs-variable">$a</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"(incrementing a variable)"</span>

a=`expr 5 % 3`
<span class="hljs-comment"># modulo</span>
<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"5 mod 3 = <span class="hljs-variable">$a</span>"</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Logical Operators</span>
<span class="hljs-comment"># ------- ---------</span>

<span class="hljs-comment">#  Returns 1 if true, 0 if false,</span>
<span class="hljs-comment">#+ opposite of normal Bash convention.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Logical Operators"</span>
<span class="hljs-built_in">echo</span>

x=24
y=25
b=`expr <span class="hljs-variable">$x</span> = <span class="hljs-variable">$y</span>`         <span class="hljs-comment"># Test equality.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"b = <span class="hljs-variable">$b</span>"</span>            <span class="hljs-comment"># 0  ( $x -ne $y )</span>
<span class="hljs-built_in">echo</span>

a=3
b=`expr <span class="hljs-variable">$a</span> \&gt; 10`
<span class="hljs-built_in">echo</span> <span class="hljs-string">'b=`expr $a \&gt; 10`, therefore...'</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"If a &gt; 10, b = 0 (false)"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"b = <span class="hljs-variable">$b</span>"</span>            <span class="hljs-comment"># 0  ( 3 ! -gt 10 )</span>
<span class="hljs-built_in">echo</span>

b=`expr <span class="hljs-variable">$a</span> \&lt; 10`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"If a &lt; 10, b = 1 (true)"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"b = <span class="hljs-variable">$b</span>"</span>            <span class="hljs-comment"># 1  ( 3 -lt 10 )</span>
<span class="hljs-built_in">echo</span>
<span class="hljs-comment"># Note escaping of operators.</span>

b=`expr <span class="hljs-variable">$a</span> \&lt;= 3`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"If a &lt;= 3, b = 1 (true)"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"b = <span class="hljs-variable">$b</span>"</span>            <span class="hljs-comment"># 1  ( 3 -le 3 )</span>
<span class="hljs-comment"># There is also a "\&gt;=" operator (greater than or equal to).</span>


<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span>



<span class="hljs-comment"># String Operators</span>
<span class="hljs-comment"># ------ ---------</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"String Operators"</span>
<span class="hljs-built_in">echo</span>

a=1234zipper43231
<span class="hljs-built_in">echo</span> <span class="hljs-string">"The string being operated upon is \"<span class="hljs-variable">$a</span>\"."</span>

<span class="hljs-comment"># length: length of string</span>
b=`expr length <span class="hljs-variable">$a</span>`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Length of \"<span class="hljs-variable">$a</span>\" is <span class="hljs-variable">$b</span>."</span>

<span class="hljs-comment"># index: position of first character in substring</span>
<span class="hljs-comment">#        that matches a character in string</span>
b=`expr index <span class="hljs-variable">$a</span> 23`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Numerical position of first \"2\" in \"<span class="hljs-variable">$a</span>\" is \"<span class="hljs-variable">$b</span>\"."</span>

<span class="hljs-comment"># substr: extract substring, starting position &amp; length specified</span>
b=`expr substr <span class="hljs-variable">$a</span> 2 6`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Substring of \"<span class="hljs-variable">$a</span>\", starting at position 2,\
and 6 chars long is \"<span class="hljs-variable">$b</span>\"."</span>


<span class="hljs-comment">#  The default behavior of the 'match' operations is to</span>
<span class="hljs-comment">#+ search for the specified match at the BEGINNING of the string.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#       Using Regular Expressions ...</span>
b=`expr match <span class="hljs-string">"<span class="hljs-variable">$a</span>"</span> <span class="hljs-string">'[0-9]*'</span>`               <span class="hljs-comment">#  Numerical count.</span>
<span class="hljs-built_in">echo</span> Number of digits at the beginning of \"<span class="hljs-variable">$a</span>\" is <span class="hljs-variable">$b</span>.
b=`expr match <span class="hljs-string">"<span class="hljs-variable">$a</span>"</span> <span class="hljs-string">'\([0-9]*\)'</span>`           <span class="hljs-comment">#  Note that escaped parentheses</span>
<span class="hljs-comment">#                   ==      ==             #+ trigger substring match.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"The digits at the beginning of \"<span class="hljs-variable">$a</span>\" are \"<span class="hljs-variable">$b</span>\"."</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">exit</span> 0</pre>
                  </td>
                </tr>
              </tbody></table>
            </div>
            <div class="IMPORTANT">
              <table class="IMPORTANT" width="90%" border="0">
                <tbody><tr>
                  <td width="25" align="center" valign="top">
                    <img src="images/important.gif" hspace="5" alt="Important">
                  </td>
                  <td align="left" valign="top">
                    <p>
                      The
                      <a href="special-chars.html#NULLREF">: (<i class="FIRSTTERM">null</i>)</a>
                      operator can substitute for <b class="COMMAND">match</b>.
                      For example,
                      <tt class="USERINPUT"><b>b=`expr $a : [0-9]*`</b></tt> is
                      the exact equivalent of
                      <tt class="USERINPUT"><b>b=`expr match $a [0-9]*`</b></tt>
                      in the above listing.
                    </p>
                    <table border="0" bgcolor="#E0E0E0" width="90%">
                      <tbody><tr>
                        <td>
                          <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"String operations using \"expr \$string : \" construct"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"==================================================="</span>
<span class="hljs-built_in">echo</span>

a=1234zipper5FLIPPER43231

<span class="hljs-built_in">echo</span> <span class="hljs-string">"The string being operated upon is \"`expr "</span><span class="hljs-variable">$a</span><span class="hljs-string">" : '\(.*\)'`\"."</span>
<span class="hljs-comment">#     Escaped parentheses grouping operator.            ==  ==</span>

<span class="hljs-comment">#       ***************************</span>
<span class="hljs-comment">#+          Escaped parentheses</span>
<span class="hljs-comment">#+           match a substring</span>
<span class="hljs-comment">#       ***************************</span>


<span class="hljs-comment">#  If no escaped parentheses ...</span>
<span class="hljs-comment">#+ then 'expr' converts the string operand to an integer.</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Length of \"<span class="hljs-variable">$a</span>\" is `expr "</span><span class="hljs-variable">$a</span><span class="hljs-string">" : '.*'`."</span>   <span class="hljs-comment"># Length of string</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Number of digits at the beginning of \"<span class="hljs-variable">$a</span>\" is `expr "</span><span class="hljs-variable">$a</span><span class="hljs-string">" : '[0-9]*'`."</span>

<span class="hljs-comment"># ------------------------------------------------------------------------- #</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"The digits at the beginning of \"<span class="hljs-variable">$a</span>\" are `expr "</span><span class="hljs-variable">$a</span><span class="hljs-string">" : '\([0-9]*\)'`."</span>
<span class="hljs-comment">#                                                             ==      ==</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"The first 7 characters of \"<span class="hljs-variable">$a</span>\" are `expr "</span><span class="hljs-variable">$a</span><span class="hljs-string">" : '\(.......\)'`."</span>
<span class="hljs-comment">#         =====                                          ==       ==</span>
<span class="hljs-comment"># Again, escaped parentheses force a substring match.</span>
<span class="hljs-comment">#</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"The last 7 characters of \"<span class="hljs-variable">$a</span>\" are `expr "</span><span class="hljs-variable">$a</span><span class="hljs-string">" : '.*\(.......\)'`."</span>
<span class="hljs-comment">#         ====                  end of string operator  ^^</span>
<span class="hljs-comment">#  (In fact, means skip over one or more of any characters until specified</span>
<span class="hljs-comment">#+  substring found.)</span>

<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">exit</span> 0</pre>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </div>
          </dd>
        </dl>
      </div>
      <p>
        The above script illustrates how <b class="COMMAND">expr</b> uses the
        <i class="FIRSTTERM">escaped parentheses -- \( ... \) --</i> grouping
        operator in tandem with
        <a href="regexp.html#REGEXREF">regular expression</a> parsing to match a
        substring. Here is a another example, this time from
        <span class="QUOTE">"real life."</span>
      </p>
      <table border="0" bgcolor="#E0E0E0" width="100%">
        <tbody><tr>
          <td>
            <pre class="PROGRAMLISTING hljs"><span class="hljs-comment"># Strip the whitespace from the beginning and end.</span>
LRFDATE=`expr <span class="hljs-string">"<span class="hljs-variable">$LRFDATE</span>"</span> : <span class="hljs-string">'[[:space:]]*\(.*\)[[:space:]]*$'</span>`

<span class="hljs-comment">#  From Peter Knowles' "booklistgen.sh" script</span>
<span class="hljs-comment">#+ for converting files to Sony Librie/PRS-50X format.</span>
<span class="hljs-comment">#  (http://booklistgensh.peterknowles.com)</span></pre>
          </td>
        </tr>
      </tbody></table>
      <p>
        <a href="wrapper.html#PERLREF">Perl</a>,
        <a href="sedawk.html#SEDREF">sed</a>, and
        <a href="awk.html#AWKREF">awk</a> have far superior string parsing
        facilities. A short <b class="COMMAND">sed</b> or
        <b class="COMMAND">awk</b>
        <span class="QUOTE">"subroutine"</span> within a script (see
        <a href="wrapper.html">Section 36.2</a>) is an attractive alternative to
        <b class="COMMAND">expr</b>.
      </p>
      <p>
        See <a href="string-manipulation.html">Section 10.1</a> for more on
        using <b class="COMMAND">expr</b> in string operations.
      </p>
    </div>
    <h3 class="FOOTNOTES">Notes</h3>
    <table border="0" class="FOOTNOTES" width="100%">
      <tbody><tr>
        <td align="left" valign="top" width="5%">
          <a name="FTN.AEN10465" href="moreadv.html#AEN10465" id="FTN.AEN10465"><span class="footnote">[1]</span></a>
        </td>
        <td align="left" valign="top" width="95%">
          <p>
            And even when <i class="FIRSTTERM">xargs</i> is not strictly
            necessary, it can speed up execution of a command involving
            <a href="timedate.html#BATCHPROCREF">batch-processing</a> of
            multiple files.
          </p>
        </td>
      </tr>
    </tbody></table>
    <div class="NAVFOOTER">
      <hr align="left" width="100%">
      <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
          <td width="33%" align="left" valign="top">
            <a href="basic.html" accesskey="P">Prev</a>
          </td>
          <td width="34%" align="center" valign="top">
            <a href="index.html" accesskey="H">Home</a>
          </td>
          <td width="33%" align="right" valign="top">
            <a href="timedate.html" accesskey="N">Next</a>
          </td>
        </tr>
        <tr>
          <td width="33%" align="left" valign="top">Basic Commands</td>
          <td width="34%" align="center" valign="top">
            <a href="external.html" accesskey="U">Up</a>
          </td>
          <td width="33%" align="right" valign="top">Time / Date Commands</td>
        </tr>
      </tbody></table>
    </div>
  

<button id="theme-toggle">Toggle theme</button></body></html>
