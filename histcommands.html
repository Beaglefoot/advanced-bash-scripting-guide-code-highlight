<!DOCTYPE html><html><head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.7.28">
  <title>History Commands</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
  <link rel="HOME" title="Advanced Bash-Scripting Guide" href="index.html">
  <link rel="PREVIOUS" title="Localization" href="localization.html">
  <link rel="NEXT" title="Sample .bashrc and .bash_profile Files" href="sample-bashrc.html">
<link rel="stylesheet" href="styles/custom.css"><link rel="stylesheet" href="styles/atom-one-dark.css"><script>
    document.addEventListener('DOMContentLoaded', () => {
      const manuallySetTheme = localStorage.getItem('bash-guide-theme');

      if (manuallySetTheme === 'dark') document.body.classList.add('dark-mode');
      else if (manuallySetTheme === 'light') document.body.classList.remove('dark-mode');
      else if (matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }

      document.getElementById('theme-toggle').addEventListener(
        'click',
        () => {
          const isSet = document.body.classList.toggle('dark-mode');
          localStorage.setItem('bash-guide-theme', isSet ? 'dark' : 'light');
        }
      );
    });
  </script></head>
<body class="APPENDIX" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <th colspan="3" align="center">Advanced Bash-Scripting Guide:</th>
      </tr>
      <tr>
        <td width="10%" align="left" valign="bottom"><a href="localization.html" accesskey="P">Prev</a></td>
        <td width="80%" align="center" valign="bottom"></td>
        <td width="10%" align="right" valign="bottom"><a href="sample-bashrc.html" accesskey="N">Next</a></td>
      </tr>
    </tbody></table>
    <hr align="left" width="100%">
  </div>
  <div class="APPENDIX">
    <h1><a name="HISTCOMMANDS" id="HISTCOMMANDS"></a>Appendix L. History Commands</h1>
    <p>The Bash shell provides command-line tools for editing and manipulating a user's <i class="FIRSTTERM">command history</i>. This is primarily a convenience, a means of saving keystrokes.</p>
    <p>Bash history commands:</p>
    <ol type="1">
      <li>
        <p><b class="COMMAND">history</b></p>
      </li>
      <li>
        <p><b class="COMMAND">fc</b></p>
      </li>
    </ol>
    <table border="1" bgcolor="#E0E0E0" width="100%" class="no-border">
      <tbody><tr>
        <td>
          <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> <span class="hljs-built_in">history</span></span>
   1  mount /mnt/cdrom
    2  cd /mnt/cdrom
    3  ls
     ...
              </pre>
        </td>
      </tr>
    </tbody></table>
    <p>Internal variables associated with Bash history commands:</p>
    <ol type="1">
      <li>
        <p>$HISTCMD</p>
      </li>
      <li>
        <p>$HISTCONTROL</p>
      </li>
      <li>
        <p>$HISTIGNORE</p>
      </li>
      <li>
        <p>$HISTFILE</p>
      </li>
      <li>
        <p>$HISTFILESIZE</p>
      </li>
      <li>
        <p>$HISTSIZE</p>
      </li>
      <li>
        <p>$HISTTIMEFORMAT (Bash, ver. 3.0 or later)</p>
      </li>
      <li>
        <p>!!</p>
      </li>
      <li>
        <p>!$</p>
      </li>
      <li>
        <p>!#</p>
      </li>
      <li>
        <p>!N</p>
      </li>
      <li>
        <p>!-N</p>
      </li>
      <li>
        <p>!STRING</p>
      </li>
      <li>
        <p>!?STRING?</p>
      </li>
      <li>
        <p>^STRING^string^</p>
      </li>
    </ol>
    <p>Unfortunately, the Bash history tools find no use in scripting.</p>
    <table border="0" bgcolor="#E0E0E0" width="100%">
      <tbody><tr>
        <td>
          <pre class="PROGRAMLISTING hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># history.sh</span>
<span class="hljs-comment"># A (vain) attempt to use the 'history' command in a script.</span>

<span class="hljs-built_in">history</span>                      <span class="hljs-comment"># No output.</span>

var=$(<span class="hljs-built_in">history</span>); <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$var</span>"</span>  <span class="hljs-comment"># $var is empty.</span>

<span class="hljs-comment">#  History commands are, by default, disabled within a script.</span>
<span class="hljs-comment">#  However, as dhw points out,</span>
<span class="hljs-comment">#+ set -o history</span>
<span class="hljs-comment">#+ enables the history mechanism.</span>

<span class="hljs-built_in">set</span> -o <span class="hljs-built_in">history</span>
var=$(<span class="hljs-built_in">history</span>); <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$var</span>"</span>   <span class="hljs-comment"># 1  var=$(history)</span></pre>
        </td>
      </tr>
    </tbody></table>
    <table border="1" bgcolor="#E0E0E0" width="100%" class="no-border">
      <tbody><tr>
        <td>
          <pre class="SCREEN hljs"><span class="hljs-meta">bash$</span><span class="bash"> ./history.sh</span>
(no output)             
              </pre>
        </td>
      </tr>
    </tbody></table>
    <p>The <a href="http://samrowe.com/wordpress/advancing-in-the-bash-shell/" target="_top">Advancing in the Bash Shell</a> site gives a good introduction to the use of history commands in Bash.</p>
  </div>
  <div class="NAVFOOTER">
    <hr align="left" width="100%">
    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td width="33%" align="left" valign="top"><a href="localization.html" accesskey="P">Prev</a></td>
        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
        <td width="33%" align="right" valign="top"><a href="sample-bashrc.html" accesskey="N">Next</a></td>
      </tr>
      <tr>
        <td width="33%" align="left" valign="top">Localization</td>
        <td width="34%" align="center" valign="top">&nbsp;</td>
        <td width="33%" align="right" valign="top">Sample <tt class="FILENAME">.bashrc</tt> and <tt class="FILENAME">.bash_profile</tt> Files</td>
      </tr>
    </tbody></table>
  </div>


<button id="theme-toggle">Toggle theme</button></body></html>
